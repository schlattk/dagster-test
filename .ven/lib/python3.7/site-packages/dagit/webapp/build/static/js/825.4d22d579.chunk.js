(self.webpackChunk_dagster_io_dagit_app=self.webpackChunk_dagster_io_dagit_app||[]).push([[825],{73303:function(e,n,t){"use strict";t.r(n),t.d(n,{InstanceRoot:function(){return Ao},default:function(){return Ko}});var r,i,o,s,a=t(87067),l=t(325),c=t(27601),u=t(99500),d=t(52600),p=t(74942),h=t(30804),f=t(32030),m=t(34595),g=t(39061),x=t(82348),v=t(78072),y=t(95764),j=t(81034),w=t(922),b=t(33918),C=t(31112),k=t(12745),S=t(7838),T=t(74549),N=t(32289),I=["assetKey"],_=function(e){var n=e.assetKey,t=(0,j.Z)(e,I),r=l.useMemo((function(){var e=[{text:"Assets",href:"/instance/assets"}];return n.path.reduce((function(n,t){var r="".concat(n,"/").concat(encodeURIComponent(t));return e.push({text:t,href:r}),r}),"/instance/assets"),e}),[n.path]);return(0,N.jsx)(C.m,(0,y.Z)({title:(0,N.jsx)(f.x,{flex:{alignItems:"center",gap:4},style:{maxWidth:"600px",overflow:"hidden",marginBottom:4},children:(0,N.jsx)(E,{items:r,currentBreadcrumbRenderer:function(e){var n=e.text;return(0,N.jsx)(k.X6,{children:n})},breadcrumbRenderer:function(e){var n=e.text,t=e.href;return(0,N.jsx)(k.X6,{children:(0,N.jsx)(R,{to:t||"#",children:n})})}})})},t))},E=(0,w.ZP)(b.Oo).withConfig({displayName:"AssetPageHeader__BreadcrumbsWithSlashes",componentId:"sc-1hk7vw2-0"})(["& li:not(:first-child)::after{background:none;font-size:20px;font-weight:bold;color:#5c7080;content:'/';width:8px;line-height:16px;}"]),R=(0,w.ZP)(T.rU).withConfig({displayName:"AssetPageHeader__BreadcrumbLink",componentId:"sc-1hk7vw2-1"})(["color:",";:hover,:active{color:",";}"],S.w.Gray800,S.w.Gray800),Z=t(19065),O=t(54268),P=t(58591),L=t(31269),F=t(89646),D=t(60736),A=t(60652),K=t(19102),U=t(55419),z=t(18819),q=t(64424),G=t(44198),M=t(30057),$=t(55752),W=t(5484),J=t(37099),B=t(25582),Q=t(25466),V=t(42658),H=t(71725),X=t(7748),Y=t(33208),ee=t(10922),ne=t(62e3),te=t(34449),re=function(e){var n=e.assetId,t=e.loadedFromRepo,r=(0,d.useQuery)(ie).data,i=("RepositoryConnection"===(null===r||void 0===r?void 0:r.repositoriesOrError.__typename)?r.repositoriesOrError.nodes.filter((function(e){return e.name!==t.name||e.location.name!==t.location})):[]).filter((function(e){return e.assetNodes.some((function(e){return e.id===n&&e.opNames.length}))}));return 0===i.length?(0,N.jsx)("span",{}):(0,N.jsx)(f.x,{padding:{vertical:16,left:24,right:12},border:{side:"bottom",width:1,color:S.w.KeylineGray},children:(0,N.jsx)(D.b,{intent:"info",title:"Multiple repositories in your workspace include assets with this name. Showing the definition from ".concat((0,J.i)(t.name,t.location)," below. (Also found in ").concat(i.map((function(e){return(0,J.i)(e.name,e.location.name)})).join(", "),"). You may want to consider renaming to avoid collisions.")})})},ie=(0,p.Ps)(r||(r=(0,u.Z)(["\n  query AssetIdScanQuery {\n    repositoriesOrError {\n      __typename\n      ... on RepositoryConnection {\n        nodes {\n          id\n          name\n          location {\n            id\n            name\n          }\n          assetNodes {\n            id\n            opNames\n          }\n        }\n      }\n    }\n  }\n"]))),oe=t(7713),se=t(77171),ae=function(e){var n=e.items,t=e.liveDataByNode,r=(0,c.k6)();return null===n?(0,N.jsx)(le,{flex:{alignItems:"center",justifyContent:"center"},children:(0,N.jsx)(m.$,{purpose:"section"})}):(0,N.jsx)(le,{flex:{gap:4},padding:{horizontal:12},children:n.map((function(e){return(0,N.jsx)(ce,{onClick:function(n){n.stopPropagation(),r.push((0,se.p)(e.assetKey,{view:"definition"}))},children:(0,N.jsx)(X.p4,{definition:e,inAssetCatalog:!0,selected:!1,liveData:t[(0,g.Wu)(e.assetKey)]})},e.id)}))})},le=(0,w.ZP)(f.x).withConfig({displayName:"AssetNodeList__Container",componentId:"sc-1ee72i3-0"})(["height:144px;overflow-x:auto;width:100%;white-space:nowrap;"]),ce=w.ZP.div.withConfig({displayName:"AssetNodeList__AssetNodeWrapper",componentId:"sc-1ee72i3-1"})(["cursor:pointer;width:240px;flex-shrink:0;"]),ue=t(95609),de=function(e){var n=e.assetNode,t=e.upstream,r=e.downstream,i=e.liveDataByNode,o=(0,ue.d)([n.assetKey]),s=(0,oe.U6)(n),a=s.assetMetadata,l=s.assetType,c=(0,te.d)(n),u=(0,J.k)(n.repository.name,n.repository.location.name);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(re,{assetId:n.id,loadedFromRepo:u}),(0,N.jsxs)(f.x,{flex:{direction:"row"},style:{flex:1},children:[(0,N.jsxs)(f.x,{style:{flex:1,minWidth:0},flex:{direction:"column"},border:{side:"right",width:1,color:S.w.KeylineGray},children:[(0,N.jsxs)(f.x,{padding:{vertical:16,horizontal:24},border:{side:"bottom",width:1,color:S.w.KeylineGray},flex:{justifyContent:"space-between",gap:8},children:[(0,N.jsx)(k.pm,{children:"Description"}),(0,N.jsx)(pe,{assetNode:n,repoAddress:u})]}),(0,N.jsx)(f.x,{padding:{vertical:16,horizontal:24},style:{flex:1,flexBasis:"content",flexGrow:0,minHeight:120},children:(0,N.jsx)(ee.d,{description:n.description||"No description provided.",maxHeight:260})}),n.partitionDefinition&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(f.x,{padding:{vertical:16,horizontal:24},border:{side:"horizontal",width:1,color:S.w.KeylineGray},flex:{justifyContent:"space-between",gap:8},children:(0,N.jsx)(k.pm,{children:"Partitions"})}),(0,N.jsxs)(f.x,{padding:{top:16,horizontal:24,bottom:24},flex:{direction:"column",gap:16},children:[(0,N.jsx)("p",{children:n.partitionDefinition}),(0,N.jsx)(ue.m,{assetKey:n.assetKey,data:o})]})]}),(0,N.jsxs)(f.x,{padding:{vertical:16,horizontal:24},border:{side:"horizontal",width:1,color:S.w.KeylineGray},flex:{justifyContent:"space-between",gap:8},children:[(0,N.jsxs)(k.pm,{children:["Upstream Assets",null!==t&&void 0!==t&&t.length?" (".concat(t.length,")"):""]}),(0,N.jsx)(T.rU,{to:"?view=lineage&lineageScope=upstream",children:(0,N.jsxs)(f.x,{flex:{gap:4,alignItems:"center"},children:["View upstream graph",(0,N.jsx)(V.JO,{name:"open_in_new",color:S.w.Link})]})})]}),(0,N.jsx)(ae,{items:t,liveDataByNode:i}),(0,N.jsxs)(f.x,{padding:{vertical:16,horizontal:24},border:{side:"horizontal",width:1,color:S.w.KeylineGray},flex:{justifyContent:"space-between",gap:8},children:[(0,N.jsxs)(k.pm,{children:["Downstream Assets",null!==r&&void 0!==r&&r.length?" (".concat(r.length,")"):""]}),(0,N.jsx)(T.rU,{to:"?view=lineage&lineageScope=downstream",children:(0,N.jsxs)(f.x,{flex:{gap:4,alignItems:"center"},children:["View downstream graph",(0,N.jsx)(V.JO,{name:"open_in_new",color:S.w.Link})]})})]}),(0,N.jsx)(ae,{items:r,liveDataByNode:i}),(0,N.jsx)("div",{style:{flex:1}})]}),c?(0,N.jsxs)(f.x,{border:{side:"vertical",width:1,color:S.w.KeylineGray},style:{flex:.5,minWidth:0},flex:{direction:"column"},children:[(0,N.jsx)(f.x,{padding:{vertical:16,horizontal:24},border:{side:"bottom",width:1,color:S.w.KeylineGray},children:(0,N.jsx)(k.pm,{children:"Config"})}),(0,N.jsx)(f.x,{padding:{vertical:16,horizontal:24},children:(0,N.jsx)(H.L,{type:c,typesInScope:c.recursiveConfigTypes})})]}):null,(0,N.jsxs)(f.x,{style:{flex:.5,minWidth:0},flex:{direction:"column"},children:[(0,N.jsx)(f.x,{padding:{vertical:16,horizontal:24},border:{side:"bottom",width:1,color:S.w.KeylineGray},children:(0,N.jsx)(k.pm,{children:"Type"})}),l?(0,N.jsx)(Y.Ot,{type:l}):(0,N.jsx)(f.x,{padding:{vertical:16,horizontal:24},children:(0,N.jsx)(ee.d,{description:"No type data provided."})}),a.length>0&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(f.x,{padding:{vertical:16,horizontal:24},border:{side:"horizontal",width:1,color:S.w.KeylineGray},flex:{justifyContent:"space-between",gap:8},children:(0,N.jsx)(k.pm,{children:"Metadata"})}),(0,N.jsx)(f.x,{style:{flex:1},children:(0,N.jsx)(oe.mQ,{assetMetadata:a})})]})]})]})]})},pe=function(e){var n=e.assetNode,t=e.repoAddress;return(0,N.jsxs)(f.x,{flex:{alignItems:"baseline",gap:16,wrap:"wrap"},style:{lineHeight:0},children:[n.jobNames.filter((function(e){return!(0,g.pv)(e)})).map((function(e){return(0,N.jsx)(k.fv,{children:(0,N.jsx)(ne.h,{isJob:!0,showIcon:!0,pipelineName:e,pipelineHrefContext:t})},e)})),(0,N.jsx)(he,{assetNode:n,repoAddress:t}),(0,g.mX)(n)&&(0,N.jsx)(k.YS,{style:{lineHeight:"16px",marginTop:2},children:"Source Asset"})]})},he=function(e){var n=e.assetNode,t=e.repoAddress,r=n.assetKey,i=n.graphName,o=n.opNames,s=n.jobNames,a=o.length;if(!a)return null;if(!i){var l=o[0];if((0,g.ll)(r)===l)return null;var c=(0,B.$U)(t,"/ops/".concat(l));return(0,N.jsxs)(f.x,{flex:{gap:4,alignItems:"center"},children:[(0,N.jsx)(V.JO,{name:"op",size:16}),(0,N.jsx)(k.fv,{children:(0,N.jsx)(T.rU,{to:c,children:l})})]})}return s.length?(0,N.jsxs)(f.x,{flex:{gap:4,alignItems:"center"},children:[(0,N.jsx)(V.JO,{name:"schema",size:16}),(0,N.jsxs)(k.fv,{children:[(0,N.jsx)(T.rU,{to:(0,B.$U)(t,"/graphs/".concat(s[0],"/").concat(i,"/")),children:i})," (".concat(1===a?"1 op":"".concat(a," ops"),")")]})]}):null},fe=(0,p.Ps)(i||(i=(0,u.Z)(["\n  fragment AssetNodeDefinitionFragment on AssetNode {\n    id\n    ...AssetNodeConfigFragment\n    description\n    graphName\n    opNames\n    jobNames\n    partitionDefinition\n    repository {\n      id\n      name\n      location {\n        id\n        name\n      }\n    }\n    ...AssetNodeFragment\n    ...AssetNodeOpMetadataFragment\n  }\n  ","\n  ","\n  ","\n"])),te.r,X.zU,oe.Ws),me=t(62816),ge=t.n(me),xe=t(86476),ve=t(9315),ye=t(86875),je=function(e){var n=e.assetNode,t=e.repoAddress,r=ge()(n.jobs,(function(e){return e.schedules})),i=ge()(n.jobs,(function(e){return e.sensors}));return(0,N.jsx)(xe.I,{repoAddress:t,schedules:r,sensors:i,showSwitch:!1})},we=(0,p.Ps)(o||(o=(0,u.Z)(["\n  fragment AssetNodeInstigatorsFragment on AssetNode {\n    id\n    jobs {\n      id\n      name\n      schedules {\n        id\n        __typename\n        ...ScheduleSwitchFragment\n      }\n      sensors {\n        id\n        __typename\n        ...SensorSwitchFragment\n      }\n    }\n  }\n  ","\n  ","\n"])),ve.J,ye.U),be=t(87011),Ce=t(50346),ke=t(75453),Se=t(96391),Te=t(66870),Ne=t(38376),Ie=t(35555),_e=t(76867),Ee=t(76314),Re="lineageGraphZoomLevel",Ze=function(e){var n=e.assetNode,t=e.assetGraphData,r=e.liveDataByNode,i=e.params,o=(0,g.Wu)(n.assetKey),s=l.useState(null),a=(0,Z.Z)(s,2),u=a[0],d=a[1],p=(0,_e.oJ)(t),h=p.layout,x=p.loading,v=l.useRef(),j=(0,c.k6)();return l.useEffect((function(){if(v.current&&h){var e=Number((0,Ee.n)(Re));v.current.autocenter(!1,e),v.current.focus()}}),[v,h,o]),!h||x?(0,N.jsx)(f.x,{style:{flex:1},flex:{alignItems:"center",justifyContent:"center"},children:(0,N.jsx)(m.$,{purpose:"page"})}):(0,N.jsx)(Ie.l,{ref:function(e){return v.current=e||void 0},interactor:Ie.l.Interactors.PanAndZoom,graphWidth:h.width,graphHeight:h.height,onDoubleClick:function(e){var n;null===(n=v.current)||void 0===n||n.autocenter(!0),e.stopPropagation()},maxZoom:1.2,maxAutocenterZoom:1.2,children:function(e){var n=e.scale;return(0,N.jsxs)(Pe,{width:h.width,height:h.height,children:[v.current&&(0,N.jsx)(Oe,{scale:n}),(0,N.jsx)(Se.B,{highlighted:u,edges:h.edges}),Object.values(h.nodes).map((function(e){var s=e.id,a=e.bounds,c=t.nodes[s],u=JSON.parse(s);return(0,l.createElement)("foreignObject",(0,y.Z)((0,y.Z)({},a),{},{key:s,style:{overflow:"visible"},onMouseEnter:function(){return d(s)},onMouseLeave:function(){return d(null)},onClick:function(){return e={path:u},void j.push((0,se.p)(e,(0,y.Z)((0,y.Z)({},i),{},{lineageScope:"neighbors"})));var e},onDoubleClick:function(e){var n;null===(n=v.current)||void 0===n||n.zoomToSVGBox(a,!0,1.2),e.stopPropagation()}}),c&&c.definition.opNames.length?n<Te.aq?(0,N.jsx)(X.t$,{definition:c.definition,selected:c.id===o}):(0,N.jsx)(X.p4,{definition:c.definition,liveData:r[c.id],selected:c.id===o}):(0,N.jsx)(Ne.e,{assetKey:{path:u}}))}))]})}})},Oe=function(e){var n=e.scale;return l.useEffect((function(){try{window.localStorage.setItem(Re,JSON.stringify(n))}catch(e){}}),[n]),(0,N.jsx)(N.Fragment,{})},Pe=w.ZP.svg.withConfig({displayName:"AssetNodeLineageGraph__SVGContainer",componentId:"q47dxd-0"})(["overflow:visible;border-radius:0;"]),Le=t(60445),Fe=function(e){var n=e.params,t=e.setParams,r=e.assetNode,i=e.liveDataByNode,o=e.assetGraphData;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(f.x,{flex:{justifyContent:"space-between",alignItems:"center",gap:12},padding:{left:24,right:12,vertical:12},border:{side:"bottom",color:S.w.KeylineGray,width:1},children:[(0,N.jsx)(be.h,{activeItems:new Set([n.lineageScope||"neighbors"]),buttons:[{id:"neighbors",label:"Nearest Neighbors",icon:"graph_neighbors"},{id:"upstream",label:"Upstream",icon:"graph_upstream"},{id:"downstream",label:"Downstream",icon:"graph_downstream"}],onClick:function(e){return t((0,y.Z)((0,y.Z)({},n),{},{lineageScope:e}))}}),(0,N.jsx)(Ce.X,{format:"switch",label:"Show secondary edges",checked:!!n.lineageShowSecondaryEdges,onChange:function(){return t((0,y.Z)((0,y.Z)({},n),{},{lineageShowSecondaryEdges:!n.lineageShowSecondaryEdges||void 0}))}}),(0,N.jsx)("div",{style:{flex:1}}),Object.values(o.nodes).length>1?(0,N.jsx)(Le.XE,{assetKeys:Object.values(o.nodes).map((function(e){return e.assetKey})),liveDataByNode:i,intent:"none",context:"all"}):(0,N.jsx)(ke.zx,{icon:(0,N.jsx)(V.JO,{name:"materialization"}),disabled:!0,children:"Materialize all"})]}),(0,N.jsx)(Ze,{assetNode:r,liveDataByNode:i,assetGraphData:o,params:n})]})},De=function(e){var n,t,r=e.assetKey,i=(0,G.q)({}),o=(0,Z.Z)(i,2),s=o[0],a=o[1],c=(0,d.useQuery)(Be,{variables:{assetKey:{path:r.path}},notifyOnNetworkStatusChange:!0}),u=(c.data||c.previousData||{}).assetOrError,p=u&&"Asset"===u.__typename?u:null,h=null===p||void 0===p||null===(n=p.assetMaterializations[0])||void 0===n?void 0:n.timestamp,x=!s.asOf||Number(h)<=Number(s.asOf),v=null===p||void 0===p?void 0:p.definition,j=v?(0,J.k)(v.repository.name,v.repository.location.name):null,w=(0,g.Je)(r),b=(0,z.u)("lineage"===s.view&&"upstream"===s.lineageScope?'*"'.concat(w,'"'):"lineage"===s.view&&"downstream"===s.lineageScope?'"'.concat(w,'"*'):'++"'.concat(w,'"++'),{hideEdgesToNodesOutsideQuery:!s.lineageShowSecondaryEdges}),C=b.assetGraphData,k=b.graphAssetKeys,I=function(e,n){var t=(0,g.Wu)(n);return l.useMemo((function(){return e?{upstream:Object.values(e.nodes).filter((function(n){var r;return null===(r=e.upstream[t])||void 0===r?void 0:r[(0,g.Wu)(n.assetKey)]})).map((function(e){return e.definition})),downstream:Object.values(e.nodes).filter((function(n){var r;return null===(r=e.downstream[t])||void 0===r?void 0:r[(0,g.Wu)(n.assetKey)]})).map((function(e){return e.definition}))}:{upstream:null,downstream:null}}),[e,t])}(C,r),E=I.upstream,R=I.downstream,F=(0,q.l)(k),D=F.liveResult,A=F.liveDataByNode,U=(0,K.V5)((0,K.C4)(c,K.dT),(0,K.C4)(D,K.dT));(0,$.Qs)(c.refetch),(0,$.Qs)(D.refetch);var V=void 0!==v,H=(null===(t=A[(0,g.Wu)(r)])||void 0===t?void 0:t.computeStatus)===W.tn.OUT_OF_DATE;return(0,N.jsxs)(f.x,{flex:{direction:"column"},style:{height:"100%",width:"100%",overflowY:"auto"},children:[(0,N.jsx)(_,{assetKey:r,tags:(0,N.jsxs)(N.Fragment,{children:[j?(0,N.jsxs)(O.V,{icon:"asset",children:["Asset in ",(0,N.jsx)(M.b,{repoAddress:j})]}):(0,N.jsx)(O.V,{icon:"asset_non_sda",children:"Asset"}),v&&j&&(0,N.jsx)(je,{assetNode:v,repoAddress:j}),v&&j&&v.groupName&&(0,N.jsx)(O.V,{icon:"asset_group",children:(0,N.jsx)(T.rU,{to:(0,B.$U)(j,"/asset-groups/".concat(v.groupName)),children:v.groupName})}),H?(0,N.jsx)(f.x,{onClick:function(){return a((0,y.Z)((0,y.Z)({},s),{},{view:"lineage",lineageScope:"upstream"}))},children:(0,N.jsx)(P.m,{fillColor:S.w.Yellow50,textColor:S.w.Yellow700,label:"Upstream changed",interactive:!0})}):void 0]}),tabs:(0,N.jsxs)(L.mQ,{size:"large",selectedTabId:s.view||"activity",children:[(0,N.jsx)(L.OK,{id:"activity",title:"Activity",onClick:function(){return a((0,y.Z)((0,y.Z)({},s),{},{view:"activity"}))}}),(0,N.jsx)(L.OK,{id:"definition",title:"Definition",onClick:function(){return a((0,y.Z)((0,y.Z)({},s),{},{view:"definition"}))},disabled:!v}),(0,N.jsx)(L.OK,{id:"lineage",title:"Lineage",onClick:function(){return a((0,y.Z)((0,y.Z)({},s),{},{view:"lineage"}))},disabled:!v})]}),right:(0,N.jsxs)(f.x,{style:{margin:"-4px 0"},flex:{gap:12,alignItems:"baseline"},children:[(0,N.jsx)(f.x,{margin:{top:4},children:(0,N.jsx)(K.xi,{refreshState:U})}),v&&v.jobNames.length>0&&j&&E&&(0,N.jsx)(Le.XE,{assetKeys:[v.assetKey],liveDataByNode:A})]})}),(0,N.jsx)("div",{children:c.loading&&!c.previousData?(0,N.jsx)(f.x,{style:{height:390},flex:{direction:"row",justifyContent:"center",alignItems:"center"},children:(0,N.jsx)(m.$,{purpose:"page"})}):x?null:(0,N.jsx)(f.x,{padding:{vertical:16,horizontal:24},border:{side:"bottom",width:1,color:S.w.KeylineGray},children:(0,N.jsx)(Qe,{asOf:s.asOf,onClick:function(){return a({asOf:void 0,time:s.asOf})},hasDefinition:!!v})})}),V&&("definition"===s.view?v?(0,N.jsx)(de,{assetNode:v,upstream:E,downstream:R,liveDataByNode:A}):(0,N.jsx)(Ae,{}):"lineage"===s.view?v?C?(0,N.jsx)(Fe,{params:s,setParams:a,assetNode:v,liveDataByNode:A,assetGraphData:C}):(0,N.jsx)(f.x,{style:{flex:1},flex:{alignItems:"center",justifyContent:"center"},children:(0,N.jsx)(m.$,{purpose:"page"})}):(0,N.jsx)(Ae,{}):(0,N.jsx)(Q.s,{assetKey:r,assetLastMaterializedAt:h,assetHasDefinedPartitions:!(null===v||void 0===v||!v.partitionDefinition),params:s,paramsTimeWindowOnly:!!s.asOf,setParams:a,liveData:v?A[(0,g.Wu)(v.assetKey)]:void 0}))]})},Ae=function(){return(0,N.jsx)(f.x,{padding:{vertical:32},children:(0,N.jsx)(F.t,{title:"No definition",description:"This asset doesn't have a software definition in any of your loaded repositories.",icon:"materialization"})})};var Ke,Ue,ze,qe,Ge,Me,$e,We,Je,Be=(0,p.Ps)(s||(s=(0,u.Z)(["\n  query AssetQuery($assetKey: AssetKeyInput!) {\n    assetOrError(assetKey: $assetKey) {\n      ... on Asset {\n        id\n        key {\n          path\n        }\n\n        assetMaterializations(limit: 1) {\n          timestamp\n        }\n\n        definition {\n          id\n          groupName\n          partitionDefinition\n          repository {\n            id\n            name\n            location {\n              id\n              name\n            }\n          }\n\n          ...AssetNodeInstigatorsFragment\n          ...AssetNodeDefinitionFragment\n        }\n      }\n    }\n  }\n  ","\n  ","\n"])),we,fe),Qe=function(e){var n=e.asOf,t=e.onClick,r=e.hasDefinition;return(0,N.jsx)(D.b,{intent:"info",title:(0,N.jsxs)("span",{children:["This is a historical view of materializations as of"," ",(0,N.jsx)("span",{style:{fontWeight:600},children:(0,N.jsx)(U.E,{timestamp:{ms:Number(n)},timeFormat:{showSeconds:!0,showTimezone:!0}})}),"."]}),description:(0,N.jsx)(A.Z,{onClick:t,underline:"always",children:r?"Show definition and latest materializations":"Show latest materializations"})})},Ve=t(25907),He=function(){var e,n=(0,c.UO)(),t=(0,c.k6)(),r=(n[0]||"").split("/").filter((function(e){return e})).map(decodeURIComponent),i=(0,d.useQuery)(Xe,{skip:0===r.length,variables:{assetKey:{path:r}}});return(0,x.j)(r&&r.length?"Assets: ".concat((0,g.ll)({path:r})):"Assets"),i.loading?(0,N.jsxs)(h.T,{children:[(0,N.jsx)(_,{assetKey:{path:r}}),(0,N.jsx)(f.x,{padding:64,children:(0,N.jsx)(m.$,{purpose:"page"})})]}):0===r.length||"AssetNotFoundError"===(null===(e=i.data)||void 0===e?void 0:e.assetOrError.__typename)?(0,N.jsxs)(h.T,{children:[(0,N.jsx)(_,{assetKey:{path:r},right:(0,N.jsx)(v.i,{label:"Reload definitions"})}),(0,N.jsx)(Ve.f,{prefixPath:r,setPrefixPath:function(e){return t.push((0,se.p)({path:e}))}})]}):(0,N.jsx)(De,{assetKey:{path:r}})},Xe=(0,p.Ps)(Ke||(Ke=(0,u.Z)(["\n  query AssetsCatalogRootQuery($assetKey: AssetKeyInput!) {\n    assetOrError(assetKey: $assetKey) {\n      __typename\n      ... on Asset {\n        id\n        key {\n          path\n        }\n      }\n    }\n  }\n"]))),Ye=t(8546),en=t(762),nn=t(75011),tn=t(68156),rn=t(76336),on=t(39956),sn=t(59019),an=t(17912),ln=t(14156),cn=t(25496),un=t(12436),dn=t(47072),pn=t(41302),hn=t(52848),fn=t(57994),mn=t(98907),gn=t(64428),xn=t(28463),vn=t(6466),yn=t(65502),jn=t.n(yn),wn=5242880,bn=function(e){(0,gn.Z)(t,e);var n=(0,xn.Z)(t);function t(){var e;(0,fn.Z)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).timeout=null,e.contentContainer=l.createRef(),e.state={showScrollToTop:!1},e.hideWarning=function(){e.setState({showScrollToTop:!1}),e.timeout&&(clearTimeout(e.timeout),e.timeout=0)},e.scheduleHideWarning=function(){e.timeout=window.setTimeout(e.hideWarning,3e3)},e.cancelHideWarning=function(){e.timeout&&(clearTimeout(e.timeout),e.timeout=0)},e.onScrollUp=function(n){e.cancelHideWarning(),n?(e.setState({showScrollToTop:!0}),e.scheduleHideWarning()):e.hideWarning()},e.onScrollDown=function(n){e.hideWarning()},e.scrollToTop=function(){e.contentContainer.current&&e.contentContainer.current.scrollToTop()},e}return(0,mn.Z)(t,[{key:"renderScrollToTop",value:function(){var e=this;return this.state.showScrollToTop?(0,N.jsx)(Fn,{children:(0,N.jsx)(Dn,{onClick:function(){return e.scrollToTop()},onMouseOver:this.cancelHideWarning,onMouseOut:this.scheduleHideWarning,children:(0,N.jsxs)(vn.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,N.jsx)(V.JO,{name:"arrow_upward",color:S.w.White}),"Scroll to top"]})})}):null}},{key:"render",value:function(){var e=this.props,n=e.logData,t=e.isLoading,r=e.isVisible,i=e.downloadUrl,o=null===n||void 0===n?void 0:n.data,s=function(e){return!!e&&(new TextEncoder).encode(e).length>=wn}(o);if(o&&s){var a=o.indexOf("\n")+1,l=a<o.length?o.slice(a):o;o="\x1b[33m...logs truncated...\x1b[39m\n"+l}var c=s?(0,N.jsx)(Ln,{children:(0,N.jsxs)(vn.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,N.jsx)(V.JO,{name:"warning",color:S.w.Yellow500}),(0,N.jsxs)("div",{children:["This log has exceeded the 5MB limit."," ",i?(0,N.jsx)("a",{href:i,download:!0,children:"Download the full log file"}):null,"."]})]})}):null;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(Tn,{isVisible:r,children:[this.renderScrollToTop(),(0,N.jsxs)(Zn,{children:[c,(0,N.jsx)(On,{children:(0,N.jsx)(Pn,{isSelected:!0,content:o,onScrollUp:this.onScrollUp,onScrollDown:this.onScrollDown,ref:this.contentContainer})})]}),t?(0,N.jsx)(An,{children:(0,N.jsx)(m.$,{purpose:"page"})}):null]}),(0,N.jsx)(Nn,{isVisible:r,children:null===n||void 0===n?void 0:n.path})]})}}]),t}(l.Component),Cn=(0,p.Ps)(Ue||(Ue=(0,u.Z)(["\n  fragment ComputeLogContentFileFragment on ComputeLogFile {\n    path\n    cursor\n    data\n    downloadUrl\n  }\n"]))),kn=function(e){(0,gn.Z)(t,e);var n=(0,xn.Z)(t);function t(){var e;(0,fn.Z)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).container=l.createRef(),e.lastScroll=0,e.onScroll=function(){if(e.container.current&&e.props.isSelected){var n=e.props,t=n.onScrollUp,r=n.onScrollDown,i=e.container.current,o=i.scrollHeight,s=i.scrollTop/(o-i.offsetHeight);e.container.current.scrollTop<e.lastScroll?t&&t(s):r&&r(s),e.lastScroll=e.container.current.scrollTop}},e}return(0,mn.Z)(t,[{key:"componentDidMount",value:function(){this.scrollToBottom(),this.container.current&&(this.container.current.focus(),this.container.current.addEventListener("scroll",this.onScroll))}},{key:"getSnapshotBeforeUpdate",value:function(){if(!this.container.current)return!1;var e=this.container.current,n=e.scrollHeight,t=e.scrollTop;return e.offsetHeight+t>=n}},{key:"componentDidUpdate",value:function(e,n,t){t&&this.scrollToBottom(),this.props.isSelected&&!e.isSelected&&this.container.current&&this.container.current.focus()}},{key:"focus",value:function(){var e=this.container.current;e&&e.focus()}},{key:"scrollToBottom",value:function(){var e=this.container.current;e&&(e.scrollTop=e.scrollHeight-e.offsetHeight)}},{key:"scrollToTop",value:function(){var e=this.container.current;e&&(e.scrollTop=0,e.focus())}},{key:"render",value:function(){var e=this.props,n=e.content,t=e.className;return n?(0,N.jsx)("div",{className:t,style:{outline:"none"},ref:this.container,tabIndex:0,children:(0,N.jsxs)(In,{children:[(0,N.jsx)(Sn,{content:n}),(0,N.jsxs)(_n,{children:[(0,N.jsx)(Rn,{}),(0,N.jsx)(jn(),{linkify:!1,useClasses:!0,children:n})]})]})}):(0,N.jsx)("div",{className:t,ref:this.container,children:(0,N.jsx)(In,{style:{justifyContent:"center",alignItems:"center"},children:null==n?"No log file available":"No output"})})}}]),t}(l.Component),Sn=function(e){var n=e.content;if(!n)return null;var t=n.match(/\n/g),r=t?t.length:0;return(0,N.jsx)(En,{children:Array.from(Array(r),(function(e,n){return(0,N.jsx)("div",{children:String(n+1)},n)}))})},Tn=w.ZP.div.withConfig({displayName:"ComputeLogContent__FileContainer",componentId:"sc-1bosmfe-0"})(["flex:1;height:100%;position:relative;&:first-child{border-right:0.5px solid #5c7080;}display:flex;flex-direction:column;",""],(function(e){return e.isVisible?null:"display: none;"})),Nn=w.ZP.div.withConfig({displayName:"ComputeLogContent__FileFooter",componentId:"sc-1bosmfe-1"})(["display:flex;flex-direction:row;align-items:center;height:30px;background-color:",";border-top:0.5px solid #5c7080;color:#aaaaaa;padding:2px 5px;font-size:0.85em;",""],S.w.Gray900,(function(e){return e.isVisible?null:"display: none;"})),In=w.ZP.div.withConfig({displayName:"ComputeLogContent__ContentContainer",componentId:"sc-1bosmfe-2"})(["display:flex;flex-direction:row;min-height:100%;background-color:",";"],S.w.Gray900),_n=w.ZP.div.withConfig({displayName:"ComputeLogContent__Content",componentId:"sc-1bosmfe-3"})(["padding:10px;background-color:",";"],S.w.Gray900),En=w.ZP.div.withConfig({displayName:"ComputeLogContent__LineNumberContainer",componentId:"sc-1bosmfe-4"})(["display:flex;flex-direction:column;align-items:flex-end;border-right:1px solid #5c7080;padding:10px 10px 10px 20px;margin-right:5px;background-color:",";opacity:0.8;color:#858585;min-height:100%;"],S.w.Gray900),Rn=(0,w.vJ)(ze||(ze=(0,u.Z)(["\n  .ansi-black {\n    color: #586e75;\n  }\n  .ansi-red {\n    color: #dc322f;\n  }\n  .ansi-green {\n    color: #859900;\n  }\n  .ansi-yellow {\n    color: #b58900;\n  }\n  .ansi-blue {\n    color: #268bd2;\n  }\n  .ansi-magenta {\n    color: #d33682;\n  }\n  .ansi-cyan {\n    color: #2aa198;\n  }\n  .ansi-white {\n    color: #eee8d5;\n  }\n"]))),Zn=w.ZP.div.withConfig({displayName:"ComputeLogContent__FileContent",componentId:"sc-1bosmfe-5"})(["flex:1;display:flex;flex-direction:column;"]),On=w.ZP.div.withConfig({displayName:"ComputeLogContent__RelativeContainer",componentId:"sc-1bosmfe-6"})(["flex:1;position:relative;"]),Pn=(0,w.ZP)(kn).withConfig({displayName:"ComputeLogContent__LogContent",componentId:"sc-1bosmfe-7"})(["color:#eeeeee;font-family:",";font-size:16px;white-space:pre;overflow:auto;position:absolute;top:0;bottom:0;left:0;right:0;"],Ye.b.monospace),Ln=w.ZP.div.withConfig({displayName:"ComputeLogContent__FileWarning",componentId:"sc-1bosmfe-8"})(["background-color:#fffae3;padding:10px 20px;margin:20px 70px;border-radius:5px;"]),Fn=w.ZP.div.withConfig({displayName:"ComputeLogContent__ScrollToast",componentId:"sc-1bosmfe-9"})(["position:absolute;height:30px;top:0;left:0;right:0;display:flex;flex-direction:row;justify-content:center;align-items:flex-start;z-index:1;"]),Dn=w.ZP.div.withConfig({displayName:"ComputeLogContent__ScrollToTop",componentId:"sc-1bosmfe-10"})(["background-color:black;padding:10px 20px;border-bottom-right-radius:5px;border-bottom-left-radius:5px;color:white;border-bottom:0.5px solid #5c7080;border-left:0.5px solid #5c7080;border-right:0.5px solid #5c7080;cursor:pointer;"]),An=w.ZP.div.withConfig({displayName:"ComputeLogContent__LoadingContainer",componentId:"sc-1bosmfe-11"})(["display:flex;justifycontent:center;alignitems:center;position:absolute;top:0;bottom:0;left:0;right:0;backgroundcolor:",";opacity:0.3;"],S.w.Gray800),Kn=function(e){return e.length<wn?e:e.slice(-5242880)},Un=function(e,n){if(!n)return e;var t=null===e||void 0===e?void 0:e.data;return null!==e&&void 0!==e&&e.data&&null!==n&&void 0!==n&&n.data?t=Kn(e.data+n.data):null!==n&&void 0!==n&&n.data&&(t=Kn(n.data)),{__typename:n.__typename,path:n.path,downloadUrl:n.downloadUrl,data:"string"===typeof t?t:null,cursor:n.cursor}},zn=function(e,n){switch(n.type){case"stdout":var t=n.stepKey===e.stepKey?Un(e.stdout,n.log):n.log;return(0,y.Z)((0,y.Z)({},e),{},{isLoading:!1,stdout:t});case"stderr":var r=n.stepKey===e.stepKey?Un(e.stderr,n.log):n.log;return(0,y.Z)((0,y.Z)({},e),{},{isLoading:!1,stderr:r});default:return e}},qn={stepKey:"",stdout:null,stderr:null,isLoading:!0},Gn=(0,p.Ps)(qe||(qe=(0,u.Z)(["\n  fragment ComputeLogsSubscriptionFragment on ComputeLogFile {\n    data\n    cursor\n    ...ComputeLogContentFileFragment\n  }\n  ","\n"])),Cn),Mn=(0,p.Ps)(Ge||(Ge=(0,u.Z)(["\n  subscription ComputeLogsSubscription(\n    $runId: ID!\n    $stepKey: String!\n    $ioType: ComputeIOType!\n    $cursor: String\n  ) {\n    computeLogs(runId: $runId, stepKey: $stepKey, ioType: $ioType, cursor: $cursor) {\n      ...ComputeLogsSubscriptionFragment\n    }\n  }\n  ","\n"])),Gn),$n=l.memo((function(e){var n=e.runId,t=e.stepKeys,r=e.computeLogKey,i=e.ioType,o=e.setComputeLogUrl,s=l.useContext(hn.I).rootServerURI,a=function(e,n){var t=l.useReducer(zn,qn),r=(0,Z.Z)(t,2),i=r[0],o=r[1];return(0,d.useSubscription)(Mn,{fetchPolicy:"no-cache",variables:{runId:e,stepKey:n,ioType:W.VJ.STDOUT,cursor:null},skip:!n,onSubscriptionData:function(e){var t,r=e.subscriptionData;n&&o({type:"stdout",stepKey:n,log:(null===(t=r.data)||void 0===t?void 0:t.computeLogs)||null})}}),(0,d.useSubscription)(Mn,{fetchPolicy:"no-cache",variables:{runId:e,stepKey:n,ioType:W.VJ.STDERR,cursor:null},skip:!n,onSubscriptionData:function(e){var t,r=e.subscriptionData;n&&o({type:"stderr",stepKey:n,log:(null===(t=r.data)||void 0===t?void 0:t.computeLogs)||null})}}),i}(n,r),c=a.isLoading,u=a.stdout,p=a.stderr;if(!t.length||!r)return(0,N.jsx)(f.x,{flex:{justifyContent:"center",alignItems:"center"},style:{flex:1,height:"100%"},children:(0,N.jsx)(m.$,{purpose:"section"})});var h=function(e,n){var t,r=null===n||void 0===n?void 0:n.downloadUrl;return r?(t=r)&&t.startsWith("/")?e+r:r:null}(s,"stdout"===i?u:p);return(0,N.jsxs)("div",{style:{flex:1,minHeight:0,display:"flex",flexDirection:"column"},children:[(0,N.jsx)(Wn,{logData:u,isLoading:c,isVisible:"stdout"===i,downloadUrl:h,setComputeLogUrl:o}),(0,N.jsx)(Wn,{logData:p,isLoading:c,isVisible:"stderr"===i,downloadUrl:h,setComputeLogUrl:o})]})})),Wn=function(e){var n=e.isLoading,t=e.isVisible,r=e.logData,i=e.downloadUrl,o=e.setComputeLogUrl;return l.useEffect((function(){o(i)}),[o,i]),(0,N.jsx)(bn,{logData:r,isLoading:n,isVisible:t,downloadUrl:i})},Jn=t(47427),Bn=t(72844),Qn=t.n(Bn),Vn=t(99738),Hn=t(92497),Xn=t(98834),Yn={DEBUG:0,INFO:0,WARNING:0,ERROR:0,CRITICAL:0,EVENT:0},et=function(e,n){switch(n.type){case"append":var t=n.queued.map((function(e,n){return(0,y.Z)((0,y.Z)({},e),{},{clientsideKey:"csk".concat(e.timestamp,"-").concat(n)})})),r=[].concat((0,sn.Z)(e.nodes),(0,sn.Z)(t)),i=(0,y.Z)({},e.counts);return t.forEach((function(e){var n=(0,Xn.m)(e);i[n]++})),{nodes:r,counts:i,loading:n.hasMore,cursor:n.cursor};case"set-cursor":return(0,y.Z)((0,y.Z)({},e),{},{cursor:n.cursor});case"reset":return{nodes:[],counts:Yn,cursor:null,loading:!0};default:return e}},nt={nodes:[],counts:Yn,cursor:null,loading:!0},tt=function(e){var n=(0,d.useApolloClient)(),t=l.useRef([]),r=l.useReducer(et,nt),i=(0,Z.Z)(r,2),o=i[0],s=i[1],a=l.useCallback((function(t){var r=n.readFragment({fragmentName:"PipelineRunLogsSubscriptionStatusFragment",fragment:at,id:"Run:".concat(e)});if(r){var i=(0,y.Z)((0,y.Z)({},r),{},{status:t});t!==W.VO.FAILURE&&t!==W.VO.SUCCESS&&t!==W.VO.STARTING&&t!==W.VO.CANCELING&&t!==W.VO.CANCELED||(i.canTerminate=!1),n.writeFragment({fragmentName:"PipelineRunLogsSubscriptionStatusFragment",fragment:at,id:"Run:".concat(e),data:i})}}),[n,e]);l.useEffect((function(){t.current=[],s({type:"reset"})}),[e]);var c=l.useMemo((function(){return Qn()((function(e,n){var r=(0,sn.Z)(t.current);t.current=[],s({type:"append",queued:r,hasMore:e,cursor:n})}),100)}),[]),u=o.nodes,p=o.counts,h=o.cursor,f=o.loading;return(0,d.useSubscription)(st,{fetchPolicy:"no-cache",variables:{runId:e,cursor:h},onSubscriptionData:function(e){var n,r=null===(n=e.subscriptionData.data)||void 0===n?void 0:n.pipelineRunLogs;if(r&&"PipelineRunLogsSubscriptionFailure"!==r.__typename){var i=r.messages,o=r.hasMorePastEvents,s=r.cursor,l=function(e){var n,t=(0,sn.Z)(e).reverse(),r=(0,Jn.Z)(t);try{for(r.s();!(n=r.n()).done;)switch(n.value.__typename){case"RunStartEvent":return W.VO.STARTED;case"RunEnqueuedEvent":return W.VO.QUEUED;case"RunStartingEvent":return W.VO.STARTING;case"RunCancelingEvent":return W.VO.CANCELING;case"RunCanceledEvent":return W.VO.CANCELED;case"RunSuccessEvent":return W.VO.SUCCESS;case"RunFailureEvent":return W.VO.FAILURE}}catch(i){r.e(i)}finally{r.f()}return null}(i);l&&!o&&a(l),t.current=[].concat((0,sn.Z)(t.current),(0,sn.Z)(i)),c(o,s)}}}),l.useMemo((function(){return null!==u?{allNodes:u,counts:p,loading:f}:{allNodes:[],counts:p,loading:f}}),[p,f,u])},rt=function(e){var n=tt(e.runId);return(0,N.jsx)(N.Fragment,{children:e.children(n)})},it=function(e){var n=e.children,t=e.runId,r=l.useReducer(et,nt),i=(0,Z.Z)(r,2),o=i[0],s=i[1],a=o.counts,c=o.cursor,u=o.nodes,p=(0,d.useQuery)(lt,{notifyOnNetworkStatusChange:!0,variables:{runId:t,cursor:c,limit:1e4},pollInterval:5e3,onCompleted:function(e){if(h(),"Run"===(null===e||void 0===e?void 0:e.pipelineRunOrError.__typename)&&"EventConnection"===(null===e||void 0===e?void 0:e.logsForRun.__typename)){var n=e.pipelineRunOrError,t=e.logsForRun.events,r=n.status,i=e.logsForRun.cursor,o=!!r&&r!==W.VO.FAILURE&&r!==W.VO.SUCCESS&&r!==W.VO.CANCELED;s({type:"append",queued:t,hasMore:o,cursor:i}),o&&f(5e3)}}}),h=p.stopPolling,f=p.startPolling;return(0,N.jsx)(N.Fragment,{children:n(null!==u&&u.length>0?{allNodes:u,counts:a,loading:!1}:{allNodes:[],counts:a,loading:!0})})},ot=function(e){var n=e.children,t=e.runId,r=l.useContext(Vn.DN),i=r.availability,o=r.disabled;return"unavailable"===i||o?(0,N.jsx)(it,{runId:t,children:n}):"attempting-to-connect"===i?(0,N.jsx)(N.Fragment,{children:n({allNodes:[],counts:Yn,loading:!0})}):(0,N.jsx)(rt,{runId:t,children:n})},st=(0,p.Ps)(Me||(Me=(0,u.Z)(["\n  subscription PipelineRunLogsSubscription($runId: ID!, $cursor: String) {\n    pipelineRunLogs(runId: $runId, cursor: $cursor) {\n      __typename\n      ... on PipelineRunLogsSubscriptionSuccess {\n        messages {\n          ... on MessageEvent {\n            runId\n          }\n          ...RunDagsterRunEventFragment\n        }\n        hasMorePastEvents\n        cursor\n      }\n      ... on PipelineRunLogsSubscriptionFailure {\n        missingRunId\n        message\n      }\n    }\n  }\n\n  ","\n"])),Hn.O.RunDagsterRunEventFragment),at=(0,p.Ps)($e||($e=(0,u.Z)(["\n  fragment PipelineRunLogsSubscriptionStatusFragment on Run {\n    id\n    runId\n    status\n    canTerminate\n  }\n"]))),lt=(0,p.Ps)(We||(We=(0,u.Z)(["\n  query RunLogsQuery($runId: ID!, $cursor: String, $limit: Int) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        runId\n        status\n        canTerminate\n      }\n    }\n    logsForRun(runId: $runId, afterCursor: $cursor, limit: $limit) {\n      ... on EventConnection {\n        events {\n          __typename\n          ... on MessageEvent {\n            runId\n          }\n          ...RunDagsterRunEventFragment\n        }\n        cursor\n      }\n      ... on PythonError {\n        message\n        stack\n      }\n    }\n  }\n  ","\n"])),Hn.O.RunDagsterRunEventFragment),ct=t(12244),ut=t(16798),dt=t(42849),pt=t(8412),ht=t(11831),ft=t(9429),mt=t(36172),gt=t(13816),xt=t.n(gt)()((function(){return new Intl.NumberFormat(navigator.language,{compactDisplay:"short",notation:"compact"})})),vt=t(40355),yt=w.ZP.div.withConfig({displayName:"ExecutionStateDot",componentId:"sc-1e4maq3-0"})(["display:inline-block;width:11px;height:11px;border-radius:5.5px;transition:background 200ms linear;background:",";&:hover{background:",";}"],(function(e){var n,t=e.state;return(n={},(0,ut.Z)(n,vt.TN.RUNNING,S.w.Gray400),(0,ut.Z)(n,vt.TN.SUCCEEDED,S.w.Green700),(0,ut.Z)(n,vt.TN.SKIPPED,S.w.Yellow500),(0,ut.Z)(n,vt.TN.FAILED,S.w.Red500),(0,ut.Z)(n,vt.TN.PREPARING,S.w.Red500),(0,ut.Z)(n,vt.TN.RETRY_REQUESTED,S.w.Red500),(0,ut.Z)(n,vt.TN.UNKNOWN,S.w.Red500),n)[t]}),(function(e){var n,t=e.state;return(n={},(0,ut.Z)(n,vt.TN.RUNNING,S.w.Gray400),(0,ut.Z)(n,vt.TN.SUCCEEDED,S.w.Green700),(0,ut.Z)(n,vt.TN.SKIPPED,S.w.Yellow500),(0,ut.Z)(n,vt.TN.FAILED,S.w.Red200),(0,ut.Z)(n,vt.TN.PREPARING,S.w.Red500),(0,ut.Z)(n,vt.TN.RETRY_REQUESTED,S.w.Red500),(0,ut.Z)(n,vt.TN.UNKNOWN,S.w.Red500),n)[t]})),jt=t(6527),wt=t(88863),bt=t(40158),Ct=t(74386),kt=function(e,n){switch(n.type){case"show-popover":return(0,y.Z)((0,y.Z)({},e),{},{shown:!0});case"hide-popover":return(0,y.Z)((0,y.Z)({},e),{},{shown:!1});case"highlight":return(0,y.Z)((0,y.Z)({},e),{},{highlight:n.highlight});case"change-query":return(0,y.Z)((0,y.Z)({},e),{},{shown:!0,highlight:0});case"select-suggestion":return(0,y.Z)((0,y.Z)({},e),{},{highlight:0});default:return e}},St={shown:!1,highlight:0},Tt={threshold:.3},Nt=function(e){var n=e.value,t=e.onChange,r=e.suggestionProviders,i=l.useReducer(kt,St),o=(0,Z.Z)(i,2),s=o[0],a=o[1],c=s.shown,u=s.highlight,d=l.useRef(null),p=l.useMemo((function(){var e=r.reduce((function(e,n){var t=n.values();return n.token?(0,y.Z)((0,y.Z)({},e),{},(0,ut.Z)({},n.token,{fuse:new bt.Z(t,Tt),all:t})):e}),{}),n=r.map((function(e){return e.token})).filter((function(e){return e}));return{empty:new bt.Z(n,Tt),perProvider:e}}),[r]),h=p.empty,f=p.perProvider,m=l.useCallback((function(e){if(!e)return Object.keys(f);var n=e.split(":"),t=(0,Z.Z)(n,2),r=t[0],i=t[1];if(r in f){var o=f[r],s=o.fuse,a=o.all,l=i?s.search(i).map((function(e){return"".concat(r,":").concat(e.item)})):a.map((function(e){return"".concat(r,":").concat(e)}));return l.map((function(e){return e.toLowerCase()})).includes(e)?[]:l}return h.search(e).map((function(e){return e.item}))}),[h,f]),g=function(e,n){var t=n.toLocaleLowerCase().trim().split(/\s+/),r=t[t.length-1]||"",i=l.useMemo((function(){return e(r)}),[e,r]),o=l.useCallback((function(e){var t=n.toLocaleLowerCase().lastIndexOf(r);if(-1!==t){var i=n.slice(0,t);return"".concat(i).concat(e)}return n}),[r,n]);return l.useMemo((function(){return{suggestions:i,onSelectSuggestion:o}}),[o,i])}(m,n),x=g.suggestions,v=g.onSelectSuggestion,j=x.length,w=x[u]||null,b=l.useCallback((function(e){a({type:"change-query"}),t(e.target.value)}),[t]),C=l.useCallback((function(e){a({type:"select-suggestion"}),t(v(e))}),[t,v]),k=l.useCallback((function(){var e;a({type:"change-query"}),t(""),null===(e=d.current)||void 0===e||e.focus()}),[t]);return(0,N.jsx)(en.J,{isOpen:c&&x.length>0,position:"bottom-left",content:(0,N.jsx)(Et,{children:x.map((function(e,n){return(0,N.jsx)(It,{suggestion:e,isHighlight:u===n,onSelect:C},e)}))}),children:(0,N.jsx)(_t,{placeholder:"Filter\u2026",spellCheck:!1,autoCorrect:"off",value:n,ref:d,onChange:b,onFocus:function(){return a({type:"show-popover"})},onBlur:function(){return a({type:"hide-popover"})},onKeyDown:function(e){var n=e.key;if("Escape"!==n){if(j){var t=j-1;switch(n){case"ArrowUp":e.preventDefault(),a({type:"highlight",highlight:0===u?t:u-1});break;case"ArrowDown":e.preventDefault(),a({type:"highlight",highlight:u===t?0:u+1});break;case"Enter":e.preventDefault(),w&&C(w)}}}else a({type:"hide-popover"})},rightElement:(0,N.jsx)(Ct.C,{onClick:k,children:(0,N.jsx)(V.JO,{name:"cancel"})})})})},It=function(e){var n=e.suggestion,t=e.isHighlight,r=e.onSelect,i=l.useRef(null);return l.useEffect((function(){i.current&&t&&i.current.scrollIntoView({block:"nearest"})}),[t]),(0,N.jsx)(Rt,{ref:i,isHighlight:t,onMouseDown:function(e){e.preventDefault(),r(n)},children:n})},_t=(0,w.ZP)(wt.oi).withConfig({displayName:"LogsFilterInput__FilterInput",componentId:"sc-3dxor8-0"})(["width:300px;"]),Et=w.ZP.ul.withConfig({displayName:"LogsFilterInput__Results",componentId:"sc-3dxor8-1"})(["list-style:none;margin:0;max-height:200px;max-width:800px;min-width:300px;overflow-y:auto;padding:4px 0;"]),Rt=w.ZP.li.withConfig({displayName:"LogsFilterInput__Item",componentId:"sc-3dxor8-2"})(["align-items:center;background-color:",";color:",";cursor:pointer;display:flex;flex-direction:row;font-size:12px;list-style:none;margin:0;padding:4px 8px;white-space:nowrap;text-overflow:ellipsis;&:hover{background-color:",";}"],(function(e){return e.isHighlight?S.w.Blue500:S.w.White}),(function(e){return e.isHighlight?S.w.White:"default"}),(function(e){return e.isHighlight?S.w.Blue500:S.w.Gray100})),Zt=t(1557);!function(e){e.structured="structured",e.stdout="stdout",e.stderr="stderr"}(Je||(Je={}));var Ot=function(e){var n=e.steps,t=e.metadata,r=e.counts,i=e.filter,o=e.onSetFilter,s=e.logType,a=e.onSetLogType,c=e.computeLogKey,u=e.onSetComputeLogKey,d=e.computeLogUrl,p=l.useMemo((function(){return new Set([s===Je.structured?s:Je.stdout])}),[s]);return(0,N.jsxs)(mt.qn,{children:[(0,N.jsx)(be.h,{activeItems:p,buttons:[{id:Je.structured,icon:"list",tooltip:"Structured event logs"},{id:Je.stdout,icon:"wysiwyg",tooltip:"Raw compute logs"}],onClick:function(e){return a(e)}}),(0,N.jsx)(mt.KC,{}),"structured"===s?(0,N.jsx)(Dt,{counts:r,filter:i,onSetFilter:o,steps:n}):(0,N.jsx)(Lt,{steps:n,metadata:t,logType:s,onSetLogType:a,computeLogKey:c,onSetComputeLogKey:u,computeLogUrl:d})]})},Pt=function(e,n){return n.stepKeys.some((function(n){return e.steps[n].state===vt.TN.RUNNING}))?vt.TN.RUNNING:n.stepKeys.some((function(n){return e.steps[n].state===vt.TN.SKIPPED}))?vt.TN.SKIPPED:n.stepKeys.every((function(n){return e.steps[n].state===vt.TN.SUCCEEDED}))?vt.TN.SUCCEEDED:vt.TN.FAILED},Lt=function(e){var n,t,r=e.steps,i=e.metadata,o=e.computeLogKey,s=e.onSetComputeLogKey,a=e.logType,l=e.onSetLogType,c=e.computeLogUrl,u=i.logCaptureSteps||(0,vt.co)(Object.keys(i.steps)),d=o&&u[o],p=function(e){if(!e||!u[e])return null;var n=u[e];return 1===n.stepKeys.length&&e===n.stepKeys[0]?e:n.pid?"pid: ".concat(n.pid," (").concat(n.stepKeys.length," steps)"):"".concat(e," (").concat(n.stepKeys.length," steps)")};return(0,N.jsxs)(f.x,{flex:{justifyContent:"space-between",alignItems:"center",direction:"row"},style:{flex:1},children:[(0,N.jsxs)(vn.Z,{direction:"row",spacing:24,alignItems:"center",children:[(0,N.jsx)(dt.P,{disabled:!r.length,items:Object.keys(u),itemRenderer:function(e,n){return(0,N.jsx)(pt.sN,{onClick:n.handleClick,text:p(e),active:n.modifiers.active},e)},activeItem:o,filterable:!1,onItemSelect:function(e){s(e)},children:(0,N.jsx)(ke.zx,{disabled:!r.length,rightIcon:(0,N.jsx)(V.JO,{name:"expand_more"}),children:p(o)||"Select a step..."})}),d?(0,N.jsxs)(L.mQ,{selectedTabId:a,onChange:l,size:"small",children:[(0,N.jsx)(L.OK,{id:Je.stdout,title:"stdout"}),(0,N.jsx)(L.OK,{id:Je.stderr,title:"stderr"})]}):null]}),d?(0,N.jsxs)(f.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[o&&u[o]?Pt(i,u[o])===vt.TN.RUNNING?(0,N.jsx)(m.$,{purpose:"body-text"}):(0,N.jsx)(yt,{state:Pt(i,u[o])}):null,c?(0,N.jsx)(ht.u,{placement:"top-end",content:o&&1===(null===(n=u[o])||void 0===n?void 0:n.stepKeys.length)?"Download ".concat(null===(t=u[o])||void 0===t?void 0:t.stepKeys[0]," compute logs"):"Download compute logs",children:(0,N.jsx)(Ft,{"aria-label":"Download link",href:c,download:!0,children:(0,N.jsx)(V.JO,{name:"download_for_offline",color:S.w.Gray600})})}):null]}):null]})},Ft=w.ZP.a.withConfig({displayName:"LogsToolbar__DownloadLink",componentId:"d9cqde-0"})(["border-radius:4px;display:block;text-decoration:none;","{transition:background-color 100ms linear;}:hover ","{background-color:",";}:active ",",:focus ","{background-color:",";}:focus{outline:none;}"],V.a1,V.a1,S.w.Gray800,V.a1,V.a1,S.w.Dark),Dt=function(e){var n,t=e.filter,r=e.counts,i=e.onSetFilter,o=e.steps,s=l.useState("assignment"),a=(0,Z.Z)(s,2),c=a[0],u=a[1],d=t.logQuery.map((function(e){var n=e.token,t=e.value;return n?"".concat(n,":").concat(t):t})).join(" "),p=l.useState((function(){return d})),h=(0,Z.Z)(p,2),m=h[0],g=h[1],x=(0,ft.m)(),v=(null===(n=t.logQuery.find((function(e){return"step"===e.token})))||void 0===n?void 0:n.value)||null,j=t.logQuery.reduce((function(e,n){return e+n.value}),"");l.useEffect((function(){g(d)}),[d]);return l.useEffect((function(){var e;return"assignment_turned_in"===c&&(e=setTimeout((function(){u("assignment")}),2e3)),function(){e&&clearTimeout(e)}}),[c]),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(Nt,{value:m,suggestionProviders:(0,Zt.m)(o),onChange:function(e){var n=e.split(/\s+/).map((function(e){var n=e.split(":");return n.length>1?{token:n[0],value:n[1]}:{value:n[0]}}));i((0,y.Z)((0,y.Z)({},t),{},{logQuery:n})),g(e)}}),j?(0,N.jsx)(At,{checked:t.hideNonMatches,onChange:function(e){return i((0,y.Z)((0,y.Z)({},t),{},{hideNonMatches:e.currentTarget.checked}))},label:"Hide non-matches"}):null,(0,N.jsx)(mt.KC,{}),(0,N.jsx)(f.x,{flex:{direction:"row",alignItems:"center",gap:8},children:Object.keys(jt.i).map((function(e){var n,o=t.levels[e];return(0,N.jsxs)(Kt,{$enabled:o,children:[(0,N.jsx)(Ce.X,{format:"switch",size:"small",checked:!!o,fillColor:o?S.w.Blue500:S.w.Gray200,onChange:function(){return i((0,y.Z)((0,y.Z)({},t),{},{levels:(0,y.Z)((0,y.Z)({},t.levels),{},(0,ut.Z)({},e,!o))}))}}),(0,N.jsx)(Ut,{$enabled:o,children:e.toLowerCase()}),(0,N.jsx)(zt,{$enabled:o,children:(n=r[e],xt().format(n))})]},e)}))}),v&&(0,N.jsx)(mt.KC,{}),(0,N.jsx)("div",{style:{minWidth:15,flex:1}}),(0,N.jsx)(ke.zx,{icon:(0,N.jsx)(V.JO,{name:c}),onClick:function(){x(window.location.href),u("assignment_turned_in")},children:"Copy URL"})]})},At=(0,w.ZP)(Ce.X).withConfig({displayName:"LogsToolbar__NonMatchCheckbox",componentId:"d9cqde-1"})(["&&&{margin:0 4px 0 12px;}white-space:nowrap;"]),Kt=w.ZP.label.withConfig({displayName:"LogsToolbar__FilterLabel",componentId:"d9cqde-2"})(["background-color:",";border:none;border-radius:8px;margin:0;padding:4px 6px;overflow:hidden;cursor:pointer;display:inline-flex;flex-direction:row;align-items:center;font-size:12px;font-weight:500;gap:6px;box-shadow:transparent inset 0px 0px 0px 1px;transition:background 50ms linear;:focus{box-shadow:rgba(58,151,212,0.6) 0 0 0 3px;outline:none;}:focus:not(:focus-visible){box-shadow:transparent inset 0px 0px 0px 1px,rgba(0,0,0,0.12) 0px 2px 12px 0px;}"],(function(e){return e.$enabled?S.w.Blue50:S.w.Gray100})),Ut=w.ZP.span.withConfig({displayName:"LogsToolbar__LogLabel",componentId:"d9cqde-3"})(["color:",";line-height:16px;transition:background 50ms linear;"],(function(e){return e.$enabled?S.w.Blue500:S.w.Gray700})),zt=w.ZP.span.withConfig({displayName:"LogsToolbar__LogCount",componentId:"d9cqde-4"})(["background-color:",";border-radius:6px;color:",";font-weight:600;font-family:",";line-height:16px;padding:1px 4px;transition:background 50ms linear;"],(function(e){return e.$enabled?S.w.Blue100:S.w.Gray200}),(function(e){return e.$enabled?S.w.Blue500:S.w.Gray700}),Ye.b.monospace),qt=t(3148),Gt=t(3660),Mt=t(85358),$t=t(95550),Wt=t.n($t),Jt=t(25429),Bt=function(e){var n=(0,c.k6)(),t=(0,d.useMutation)($.kO),r=(0,Z.Z)(t,1)[0],i=(0,on._)(e);return l.useCallback(function(){var t=(0,Mt.Z)(Wt().mark((function t(o){var s,a;return Wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&e.pipelineSnapshotId&&i){t.next=2;break}return t.abrupt("return");case 2:return s=(0,$.kz)({run:e,style:o,repositoryLocationName:i.match.repositoryLocation.name,repositoryName:i.match.repository.name}),t.prev=3,t.next=6,r({variables:s});case 6:a=t.sent,(0,$.lF)(e.pipelineName,a,n,{preserveQuerystring:!0,behavior:"open"}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),(0,Jt.t)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}(),[n,r,i,e])},Qt=t(57615),Vt="|";function Ht(e){return e.sort().map((function(e){return e.toLowerCase()})).join(Vt)}var Xt={steps:"*",logs:"",levels:Ht(jt.w),hideNonMatches:"true",focusedTime:""},Yt=function(e){var n=e.logs.split(Vt),t=e.focusedTime&&!e.logs?Number(e.focusedTime):null,r="true"===e.hideNonMatches,i=(0,Zt.m)();return{sinceTime:0,focusedTime:t,hideNonMatches:r,logQuery:n.map((function(e){return(0,Qt.WD)(e,i)})),levels:e.levels.split(Vt).map((function(e){return e.toUpperCase()})).filter((function(e){return jt.i.hasOwnProperty(e)})).reduce((function(e,n){return(0,y.Z)((0,y.Z)({},e),{},(0,ut.Z)({},n,!0))}),{})}};function er(e){var n=e.logQuery.map((function(e){return e.token?"".concat(e.token,":").concat(e.value):e.value}));return{hideNonMatches:e.hideNonMatches?"true":"false",focusedTime:e.focusedTime||"",logs:n.join(Vt),levels:Ht(Object.keys(e.levels).filter((function(n){return!!e.levels[n]})))}}var nr,tr,rr,ir,or,sr,ar,lr,cr,ur,dr,pr,hr,fr,mr,gr,xr,vr,yr,jr,wr=function(e){var n,t=e.run,r=e.runId,i=(0,G.q)({encode:er,decode:Yt,defaults:Xt}),o=(0,Z.Z)(i,2),s=o[0],a=o[1],c=(0,G.q)({queryKey:"selection",defaults:{selection:""}}),u=(0,Z.Z)(c,2),d=u[0],p=u[1];n=t?function(e){switch(e){case W.VO.CANCELED:case W.VO.CANCELING:case W.VO.FAILURE:return"/favicon-run-failed.svg";case W.VO.SUCCESS:return"/favicon-run-success.svg";default:return"/favicon-run-pending.svg"}}(t.status):"/favicon.svg",l.useEffect((function(){var e=document.querySelector('link[rel="icon"][type="image/svg+xml"]');if(e){var t=e.getAttribute("href");return e.setAttribute("href",n),function(){t&&e.setAttribute("href",t)}}}),[n]),(0,x.j)(t?"".concat((0,g.pv)(t.pipelineName)?"":t.pipelineName," ").concat(r.slice(0,8)," [").concat(t.status,"]"):"Run: ".concat(r));var h=function(e,n){var t=n.find((function(n){return"ExecutionStepFailureEvent"===n.__typename&&n.stepKey===e}));t&&(0,ln._)({body:(0,N.jsx)(un.T9,{error:t})})},f=function(e){p(e),a((0,y.Z)((0,y.Z)({},s),{},{logQuery:"*"!==e?[{token:"query",value:e}]:[]}))};return(0,N.jsx)(Gt.A.Provider,{value:t,children:(0,N.jsx)(ot,{runId:r,children:function(e){return(0,N.jsx)(vt.jp,{logs:e,children:function(n){return(0,N.jsx)(br,{run:t,runId:r,logs:e,logsFilter:s,metadata:n,selectionQuery:d,onSetLogsFilter:a,onSetSelectionQuery:f,onShowStateDetails:h})}})}},r)})},br=function(e){var n=e.run,t=e.runId,r=e.logs,i=e.logsFilter,o=e.metadata,s=e.selectionQuery,a=e.onSetLogsFilter,c=e.onSetSelectionQuery,u=Bt(n),d=l.createRef(),p=(0,G.q)({queryKey:"logType",defaults:{logType:"structured"}}),h=(0,Z.Z)(p,2),m=h[0],g=h[1],x=(0,G.q)({queryKey:"logKey"}),v=(0,Z.Z)(x,2),y=v[0],j=v[1],w=function(e){switch(e){case"stdout":return Je.stdout;case"stderr":return Je.stderr;default:return Je.structured}}(m),b=l.useState(null),C=(0,Z.Z)(b,2),k=C[0],S=C[1],T=JSON.stringify(Object.keys(o.steps).sort()),I=l.useMemo((function(){return JSON.parse(T)}),[T]),_=(null===n||void 0===n?void 0:n.executionPlan)&&(0,pn.J)(null===n||void 0===n?void 0:n.executionPlan,o.steps),E=l.useMemo((function(){return _&&s&&"*"!==s?(0,cn.V)(_,s).all.map((function(e){return e.name})):[]}),[_,s]);l.useEffect((function(){if(null!==I&&void 0!==I&&I.length&&!y)if(o.logCaptureSteps){var e=Object.keys(o.logCaptureSteps),n=e.find((function(e){return E.every((function(n){return o.logCaptureSteps&&o.logCaptureSteps[e].stepKeys.includes(n)}))}));j(n||e[0])}else I.includes(y)?1===E.length&&y!==E[0]&&j(E[0]):j(1===E.length?E[0]:I[0])}),[I,y,E,o.logCaptureSteps,j]);var R=_?i.logQuery.filter((function(e){return e.token&&"query"===e.token})).reduce((function(e,n){return[].concat((0,sn.Z)(e),(0,sn.Z)((0,cn.V)(_,n.value).all.map((function(e){return e.name}))))}),[]):[],O=function(e,n){var t,r=E.indexOf(e),i='"'.concat(e,'"');n.shiftKey?(t=(0,sn.Z)(E.map((function(e){return s.includes('"'.concat(e,'"'))?'"'.concat(e,'"'):e}))),-1!==r?t.splice(r,1):t.push(i)):1===E.length&&-1!==r?t=[]:(t=[i],j(e)),c(t.join(", ")||"*")};return(0,N.jsx)(N.Fragment,{children:(0,N.jsx)(an.OS,{ref:d,axis:"vertical",identifier:"run-gantt",firstInitialPercent:35,firstMinSize:56,first:function(e){return n?"QUEUED"===n.status?(0,N.jsx)(dn.Fu,{run:n}):n.executionPlan&&_?(0,N.jsx)(dn.hj,{options:{mode:dn.hS.WATERFALL_TIMED},toolbarActions:(0,N.jsxs)(f.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,N.jsx)(an.jo,{axis:"vertical",container:d}),(0,N.jsx)(qt.NX,{run:n,onLaunch:u,graph:_,metadata:e,selection:{query:s,keys:E}})]}),runId:t,graph:_,metadata:e,selection:{query:s,keys:E},onClickStep:O,onSetSelection:c,focusedTime:i.focusedTime}):(0,N.jsx)(F.t,{icon:"error",title:"Unable to build execution plan"}):(0,N.jsx)(dn.ZW,{runId:t})}(o),second:(0,N.jsxs)(Cr,{children:[(0,N.jsx)(Ot,{logType:w,onSetLogType:function(e){return g(Je[e])},filter:i,onSetFilter:a,steps:I,metadata:o,computeLogKey:y,onSetComputeLogKey:function(e){j(e)},computeLogUrl:k,counts:r.counts}),w!==Je.structured?(0,N.jsx)($n,{runId:t,stepKeys:I,computeLogKey:y,ioType:Je[w],setComputeLogUrl:S}):(0,N.jsx)(ct.S,{logs:r,filter:i,filterStepKeys:R,filterKey:"".concat(JSON.stringify(i)),metadata:o})]})})})},Cr=w.ZP.div.withConfig({displayName:"Run__LogsContainer",componentId:"sc-1l2e0ac-0"})(["display:flex;flex-direction:column;height:100%;"]),kr=t(27457),Sr=t(57876),Tr=t(37751),Nr=function(){var e=(0,c.UO)().runId,n=(0,d.useQuery)(_r,{fetchPolicy:"cache-and-network",partialRefetch:!0,variables:{runId:e}}),t=n.data,r=n.loading,i="Run"===(null===t||void 0===t?void 0:t.pipelineRunOrError.__typename)?t.pipelineRunOrError:null,o=null===i||void 0===i?void 0:i.pipelineSnapshotId,s=(0,on._)(i),a=null!==s&&void 0!==s&&s.match?(0,J.k)(s.match.repository.name,s.match.repositoryLocation.name):null,u=l.useMemo((function(){return!!(i&&s&&(0,rn.E8)(s.match,i.pipelineName))}),[i,s]);return(0,N.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0,width:"100%",height:"100%",overflow:"hidden"},children:[(0,N.jsx)(f.x,{flex:{direction:"row",alignItems:"flex-start"},style:{position:"relative",zIndex:1},children:(0,N.jsx)(C.m,{title:(0,N.jsx)(k.X6,{style:{fontFamily:Ye.b.monospace,fontSize:"20px"},children:e.slice(0,8)}),tags:i?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(Tr.K,{status:i.status}),(0,g.pv)(i.pipelineName)?(0,N.jsx)(kr.k,{assetKeys:(0,$.Bo)(i),clickableTags:!0}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(O.V,{icon:"run",children:["Run of"," ",(0,N.jsx)(ne.h,{pipelineName:null===i||void 0===i?void 0:i.pipelineName,pipelineHrefContext:a||"repo-unknown",snapshotId:o,size:"small",isJob:u})]}),(0,N.jsx)(kr.k,{assetKeys:i.assets.map((function(e){return e.key})),clickableTags:!0})]}),(0,N.jsxs)(f.x,{flex:{direction:"row",alignItems:"flex-start",gap:12,wrap:"wrap"},children:[null!==i&&void 0!==i&&i.startTime?(0,N.jsx)(en.J,{interactionKind:"hover",placement:"bottom",content:(0,N.jsx)(f.x,{padding:16,children:(0,N.jsx)(Sr.lc,{run:i,loading:r})}),children:(0,N.jsx)(O.V,{icon:"schedule",children:(0,N.jsx)(tn.v,{timestamp:i.startTime,timeFormat:{showSeconds:!0,showTimezone:!1}})})}):i.updateTime?(0,N.jsx)(O.V,{icon:"schedule",children:(0,N.jsx)(tn.v,{timestamp:i.updateTime,timeFormat:{showSeconds:!0,showTimezone:!1}})}):void 0,null!==i&&void 0!==i&&i.startTime&&null!==i&&void 0!==i&&i.endTime?(0,N.jsx)(en.J,{interactionKind:"hover",placement:"bottom",content:(0,N.jsx)(f.x,{padding:16,children:(0,N.jsx)(Sr.lc,{run:i,loading:r})}),children:(0,N.jsx)(O.V,{icon:"timer",children:(0,N.jsx)("span",{style:{fontVariantNumeric:"tabular-nums"},children:null!==i&&void 0!==i&&i.startTime?(0,nn.fv)((1e3*(null===i||void 0===i?void 0:i.endTime)||Date.now())-1e3*(null===i||void 0===i?void 0:i.startTime)):"\u2013"})})}):null]})]}):null,right:i?(0,N.jsx)(Sr.Up,{run:i,isJob:u}):null})}),(0,N.jsx)(Ir,{data:t,runId:e})]})},Ir=function(e){var n=e.data,t=e.runId;return n&&n.pipelineRunOrError?"Run"!==n.pipelineRunOrError.__typename?(0,N.jsx)(f.x,{padding:{vertical:64},children:(0,N.jsx)(F.t,{icon:"error",title:"No run found",description:"The run with this ID does not exist or has been cleaned up."})}):(0,N.jsx)(wr,{run:n.pipelineRunOrError,runId:t}):(0,N.jsx)(wr,{run:void 0,runId:t})},_r=(0,p.Ps)(nr||(nr=(0,u.Z)(["\n  query RunRootQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      __typename\n      ... on Run {\n        id\n        ...RunFragment\n      }\n    }\n  }\n\n  ","\n"])),Hn.O.RunFragment),Er=t(47387),Rr=t(90428),Zr=t.n(Rr),Or=function(){var e=(0,d.useQuery)(Pr).data;return!(null===e||void 0===e||!e.instance.hasInfo)},Pr=(0,p.Ps)(tr||(tr=(0,u.Z)(["\n  query InstanceConfigHasInfo {\n    instance {\n      hasInfo\n    }\n  }\n"]))),Lr=t(50741),Fr=t(62278),Dr=t(78042),Ar=t(81403),Kr=t(89324),Ur=t(24375),zr=function(){var e=(0,d.useQuery)(qr,{fetchPolicy:"cache-and-network",partialRefetch:!0,notifyOnNetworkStatusChange:!0});return(0,K.C4)(e,K.dT),(0,N.jsx)(Lr.g,{queryResult:e,children:function(e){var n=e.repositoriesOrError,t=e.instance;if("PythonError"===n.__typename){var r=n.message;return(0,N.jsx)(D.b,{intent:"warning",title:(0,N.jsxs)(vn.Z,{direction:"row",spacing:4,children:[(0,N.jsx)("div",{children:"Could not load scheduled ticks."}),(0,N.jsx)(A.Z,{color:S.w.Link,underline:"always",onClick:function(){(0,ln._)({title:"Python error",body:r})},children:"View error"})]})})}return(0,N.jsxs)("div",{children:[(0,N.jsx)(f.x,{padding:{horizontal:24,vertical:16},border:{side:"bottom",width:1,color:S.w.KeylineGray},children:(0,N.jsx)(Kr.K,{daemonHealth:t.daemonHealth})}),(0,N.jsx)(Ur.n,{repos:n.nodes})]})}})},qr=(0,p.Ps)(rr||(rr=(0,u.Z)(["\n  query SchedulerInfoQuery {\n    instance {\n      ...InstanceHealthFragment\n    }\n    repositoriesOrError {\n      ... on RepositoryConnection {\n        nodes {\n          __typename\n          id\n          ... on Repository {\n            ...RepositorySchedulesFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n  ","\n  ","\n  ","\n"])),Dr.O,Ar.dM,un.Bq),Gr=t(34653),Mr=t(80608),$r=t(45302),Wr=t(77892),Jr=function(){var e,n,t,r,i,o;(0,x.j)("Runs");var s=(0,$r.oD)(),a=(0,Z.Z)(s,2),c=a[0],u=a[1],d=(0,$r.VH)(c),p=l.useState(!1),m=(0,Z.Z)(p,2),g=m[0],v=m[1],j=Or(),w=(0,Wr.l)({nextCursorForResult:function(e){var n;if("Runs"===e.pipelineRunsOrError.__typename)return null===(n=e.pipelineRunsOrError.results[24])||void 0===n?void 0:n.runId},getResultArray:function(e){return e&&"Runs"===e.pipelineRunsOrError.__typename?e.pipelineRunsOrError.results:[]},variables:{filter:d,queuedFilter:(0,y.Z)((0,y.Z)({},d),{},{statuses:Array.from(Gr.sy)}),inProgressFilter:(0,y.Z)((0,y.Z)({},d),{},{statuses:Array.from(Gr.Ys)})},query:Qr,pageSize:25}),b=w.queryResult,I=w.paginationProps,_=(0,K.C4)(b,K.dT),E=g?"scheduled":function(e){var n=new Set(e.filter((function(e){return"status"===e.token})).map((function(e){return e.value})));return Zr()(Gr.sy,n)?"queued":Zr()(Gr.Ys,n)?"in-progress":Zr()(Gr.cv,n)?"done":"all"}(c),R="all"!==E,P=function(e){var n=c.filter((function(e){return"status"!==e.token})),t=e.map((function(e){return{token:"status",value:e}}));u([].concat((0,sn.Z)(t),(0,sn.Z)(n))),v(!1)},A=l.useCallback((function(e){if(R){var n=c.filter((function(e){return"status"===e.token}));u([].concat((0,sn.Z)(n),(0,sn.Z)(e)))}else u(e)}),[c,u,R]),U=l.useCallback((function(e){var n=(0,Qt.HY)(e);c.some((function(e){return(0,Qt.HY)(e)===n}))||A([].concat((0,sn.Z)(c),[e]))}),[c,A]),z=l.useMemo((function(){var e=["tag","snapshotId","id","job","pipeline"];return R||e.push("status"),e}),[R]),q=l.useMemo((function(){return R?c.filter((function(e){return"status"!==e.token})):c}),[c,R]);return(0,N.jsxs)(h.T,{children:[(0,N.jsx)(C.m,{title:(0,N.jsx)(k.X6,{children:"Runs"}),tabs:(0,N.jsxs)(f.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,N.jsxs)(L.mQ,{selectedTabId:E,id:"run-tabs",children:[(0,N.jsx)(L.OK,{title:"All runs",onClick:function(){return P([])},id:"all"}),(0,N.jsx)(L.OK,{title:"Queued",count:"Runs"===(null===(e=b.data)||void 0===e||null===(n=e.queuedCount)||void 0===n?void 0:n.__typename)?null===(t=b.data)||void 0===t?void 0:t.queuedCount.count:"indeterminate",onClick:function(){return P(Array.from(Gr.sy))},id:"queued"}),(0,N.jsx)(L.OK,{title:"In progress",count:"Runs"===(null===(r=b.data)||void 0===r||null===(i=r.inProgressCount)||void 0===i?void 0:i.__typename)?null===(o=b.data)||void 0===o?void 0:o.inProgressCount.count:"indeterminate",onClick:function(){return P(Array.from(Gr.Ys))},id:"in-progress"}),(0,N.jsx)(L.OK,{title:"Done",onClick:function(){return P(Array.from(Gr.cv))},id:"done"}),(0,N.jsx)(L.OK,{title:"Scheduled",onClick:function(){return v(!0)},id:"scheduled"})]}),(0,N.jsx)(f.x,{padding:{bottom:8},children:(0,N.jsx)(K.xi,{refreshState:_})})]})}),"queued"===E&&j?(0,N.jsxs)(f.x,{flex:{direction:"column",gap:8},padding:{horizontal:24,vertical:16},border:{side:"bottom",width:1,color:S.w.KeylineGray},children:[(0,N.jsx)(D.b,{intent:"info",title:(0,N.jsx)(T.rU,{to:"/instance/config#run_coordinator",children:"View queue configuration"})}),(0,N.jsx)(Vr,{})]}):null,(0,N.jsx)($.Lw.Provider,{value:{refetch:b.refetch},children:(0,N.jsx)(Lr.g,{queryResult:b,allowStaleData:!0,renderError:function(e){var n=!(null===e||void 0===e||!e.networkError||!("statusCode"in e.networkError)||400!==e.networkError.statusCode);return(0,N.jsxs)(f.x,{flex:{direction:"column",gap:32},padding:{vertical:8,left:24,right:12},children:[(0,N.jsx)($r.nr,{tokens:q,onChange:A,loading:b.loading,enabledFilters:z}),(0,N.jsx)(F.t,{icon:"warning",title:n?"Invalid run filters":"Unexpected error",description:n?"The specified run filters are not valid. Please check the filters and try again.":"An unexpected error occurred. Check the console for details."})]})},children:function(e){var n=e.pipelineRunsOrError;return"Runs"!==n.__typename?(0,N.jsx)(f.x,{padding:{vertical:64},children:(0,N.jsx)(F.t,{icon:"error",title:"Query Error",description:n.message})}):g?(0,N.jsx)(zr,{}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(Fr.Y,{$top:0,children:(0,N.jsx)(Mr.A,{runs:n.results.slice(0,25),onAddTag:U,filter:d,actionBarComponents:g?null:(0,N.jsxs)(f.x,{flex:{direction:"column",gap:8},children:["all"!==E?(0,N.jsx)(f.x,{flex:{direction:"row",gap:8},children:c.filter((function(e){return"status"===e.token})).map((function(e){var n=e.token,t=e.value;return(0,N.jsx)(O.V,{children:"".concat(n,":").concat(t)},n)}))}):null,(0,N.jsx)($r.nr,{tokens:q,onChange:A,loading:b.loading,enabledFilters:z})]})})}),n.results.length>0?(0,N.jsx)("div",{style:{marginTop:"16px"},children:(0,N.jsx)(Er.pI,(0,y.Z)({},I))}):null]})}})})]})},Br=(0,p.Ps)(ir||(ir=(0,u.Z)(["\n  fragment CountFragment on Runs {\n    count\n  }\n"]))),Qr=(0,p.Ps)(or||(or=(0,u.Z)(["\n  query RunsRootQuery(\n    $limit: Int\n    $cursor: String\n    $filter: RunsFilter!\n    $queuedFilter: RunsFilter!\n    $inProgressFilter: RunsFilter!\n  ) {\n    pipelineRunsOrError(limit: $limit, cursor: $cursor, filter: $filter) {\n      ... on Runs {\n        results {\n          id\n          ...RunTableRunFragment\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n    queuedCount: pipelineRunsOrError(filter: $queuedFilter) {\n      ...CountFragment\n    }\n    inProgressCount: pipelineRunsOrError(filter: $inProgressFilter) {\n      ...CountFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n"])),Mr.Z,Br,un.Bq),Vr=function(){var e=(0,d.useQuery)(Hr).data,n=null===e||void 0===e?void 0:e.instance.daemonHealth.daemonStatus;return null===n||void 0===n||!n.required||null!==n&&void 0!==n&&n.healthy?null:(0,N.jsx)(D.b,{intent:"warning",title:"The queued run coordinator is not healthy.",description:(0,N.jsxs)("div",{children:["View ",(0,N.jsx)(T.rU,{to:"/instance/health",children:"Instance status"})," for details."]})})},Hr=(0,p.Ps)(sr||(sr=(0,u.Z)(['\n  query QueueDaemonStatusQuery {\n    instance {\n      daemonHealth {\n        id\n        daemonStatus(daemonType: "QUEUED_RUN_COORDINATOR") {\n          id\n          daemonType\n          healthy\n          required\n        }\n      }\n    }\n  }\n']))),Xr=t(87535),Yr=t(96294),ei=t(33247),ni=t(37286),ti=(0,p.Ps)(ar||(ar=(0,u.Z)(["\n  query SnapshotQuery($snapshotId: String!) {\n    pipelineSnapshotOrError(snapshotId: $snapshotId) {\n      ... on PipelineSnapshot {\n        id\n        parentSnapshotId\n      }\n    }\n  }\n"]))),ri=function(e){var n,t=e.activeTab,r=void 0===t?"":t,i=e.explorerPath,o=i.pipelineName,s=i.snapshotId,a=void 0===s?"":s,l=(0,Yr.gY)((0,y.Z)((0,y.Z)({},i),{},{opNames:[]})),c=(0,rn.Nc)(o),u=!(null===c||void 0===c||!c.isJob),p=null===c||void 0===c?void 0:c.pipelineSnapshotId,h=(0,d.useQuery)(ti,{variables:{snapshotId:a}}),f=h.data,m=h.loading,g=[{text:"Definition",pathComponent:"",href:"/instance/snapshots/".concat(l)},{text:"Runs",pathComponent:"runs",href:"/instance/snapshots/".concat(l,"runs")}];return(0,N.jsx)(C.m,{title:(0,N.jsx)(k.X6,{style:{fontFamily:Ye.b.monospace,fontSize:"20px"},children:null===(n=i.snapshotId)||void 0===n?void 0:n.slice(0,8)}),tags:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(O.V,{icon:"schema",children:["Snapshot of"," ",(0,N.jsx)(T.rU,{to:(0,B.r4)(i.pipelineName,u),children:i.pipelineName})]}),function(){var e;return m?(0,N.jsx)(O.V,{intent:"none",minimal:!0,children:"..."}):!p||p!==a&&"PipelineSnapshot"===(null===f||void 0===f?void 0:f.pipelineSnapshotOrError.__typename)&&(null===f||void 0===f||null===(e=f.pipelineSnapshotOrError)||void 0===e?void 0:e.parentSnapshotId)!==p?(0,N.jsx)(O.V,{intent:"warning",minimal:!0,children:"Snapshot"}):(0,N.jsx)(O.V,{intent:"success",minimal:!0,children:"Current"})}()]}),tabs:(0,N.jsx)(L.mQ,{selectedTabId:r,children:g.map((function(e){var n=e.href,t=e.text,r=e.pathComponent;return(0,N.jsx)(ni.f,{id:r,title:t,to:n},t)}))})})},ii=function(){var e=(0,c.UO)(),n=e.pipelinePath,t=e.tab,r=(0,Yr.p3)(n);return(0,N.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0,width:"100%",height:"100%"},children:[(0,N.jsx)(ri,{activeTab:t,explorerPath:r}),(0,N.jsxs)(c.rs,{children:[(0,N.jsx)(c.AW,{path:"/instance/snapshots/:pipelinePath/runs",children:(0,N.jsx)(ei.G,{})}),(0,N.jsx)(c.AW,{path:"/instance/snapshots/(/?.*)",children:(0,N.jsx)(Xr.CY,{})})]})]})},oi=t(2789),si=l.createContext({healthTitle:"Daemons"}),ai=function(e){var n=l.useContext(si).healthTitle,t=e.refreshState,r=e.tab,i=Or();return(0,N.jsxs)(f.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,N.jsxs)(L.mQ,{selectedTabId:r,children:[(0,N.jsx)(ni.f,{id:"overview",title:"Overview",to:"/instance/overview"}),(0,N.jsx)(ni.f,{id:"health",title:n,to:"/instance/health"}),(0,N.jsx)(ni.f,{id:"schedules",title:"Schedules",to:"/instance/schedules"}),(0,N.jsx)(ni.f,{id:"sensors",title:"Sensors",to:"/instance/sensors"}),(0,N.jsx)(ni.f,{id:"backfills",title:"Backfills",to:"/instance/backfills"}),i?(0,N.jsx)(ni.f,{id:"config",title:"Configuration",to:"/instance/config"}):null]}),t?(0,N.jsx)(f.x,{padding:{bottom:8},children:(0,N.jsx)(K.xi,{refreshState:t})}):null]})},li=function(){var e=(0,d.useQuery)(ci),n=(0,Wr.l)({query:ui,variables:{},pageSize:25,nextCursorForResult:function(e){var n;return"PartitionBackfills"===e.partitionBackfillsOrError.__typename?null===(n=e.partitionBackfillsOrError.results[24])||void 0===n?void 0:n.backfillId:void 0},getResultArray:function(e){return"PartitionBackfills"===(null===e||void 0===e?void 0:e.partitionBackfillsOrError.__typename)?e.partitionBackfillsOrError.results:[]}}),t=n.queryResult,r=n.paginationProps,i=(0,K.C4)(t,K.dT);return(0,x.j)("Backfills"),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(C.m,{title:(0,N.jsx)(k.X6,{children:"Instance status"}),tabs:(0,N.jsx)(ai,{tab:"backfills",refreshState:i})}),(0,N.jsx)(Lr.g,{queryResult:t,allowStaleData:!0,children:function(n){var i,o=n.partitionBackfillsOrError;if("PythonError"===o.__typename)return(0,N.jsx)(un.T9,{error:o});if(!o.results.length)return(0,N.jsx)(f.x,{padding:{vertical:64},children:(0,N.jsx)(F.t,{icon:"no-results",title:"No backfills found",description:(0,N.jsx)("p",{children:"This instance does not have any backfill jobs."})})});var s=((null===(i=e.data)||void 0===i?void 0:i.instance.daemonHealth.allDaemonStatuses)||[]).filter((function(e){return"BACKFILL"===e.daemonType})).map((function(e){return e.required&&e.healthy})),a=s.length&&s.every((function(e){return e}));return(0,N.jsxs)("div",{children:[a?null:(0,N.jsx)(f.x,{padding:{horizontal:24,vertical:16},children:(0,N.jsx)(D.b,{intent:"warning",title:"The backfill daemon is not running.",description:(0,N.jsxs)("div",{children:["See the"," ",(0,N.jsx)("a",{href:"https://docs.dagster.io/deployment/dagster-daemon",target:"_blank",rel:"noreferrer",children:"dagster-daemon documentation"})," ","for more information on how to deploy the dagster-daemon process."]})})}),(0,N.jsx)(oi.G,{backfills:o.results.slice(0,25),refetch:t.refetch}),o.results.length>0?(0,N.jsx)("div",{style:{marginTop:"16px"},children:(0,N.jsx)(Er.b$,(0,y.Z)({},r))}):null]})}})]})},ci=(0,p.Ps)(lr||(lr=(0,u.Z)(["\n  query InstanceHealthForBackfillsQuery {\n    instance {\n      ...InstanceHealthFragment\n    }\n  }\n\n  ","\n"])),Dr.O),ui=(0,p.Ps)(cr||(cr=(0,u.Z)(["\n  query InstanceBackfillsQuery($cursor: String, $limit: Int) {\n    partitionBackfillsOrError(cursor: $cursor, limit: $limit) {\n      ... on PartitionBackfills {\n        results {\n          backfillId\n          status\n          backfillStatus\n          numRequested\n          partitionNames\n          numPartitions\n          partitionRunStats {\n            numQueued\n            numInProgress\n            numSucceeded\n            numFailed\n            numPartitionsWithRuns\n            numTotalRuns\n          }\n          unfinishedRuns {\n            id\n            canTerminate\n          }\n          timestamp\n          partitionSetName\n          partitionSet {\n            id\n            name\n            mode\n            pipelineName\n            repositoryOrigin {\n              id\n              repositoryName\n              repositoryLocationName\n            }\n          }\n          error {\n            ...PythonErrorFragment\n          }\n\n          ...BackfillTableFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"])),un.Bq,oi.b),di=(t(81452),t(24818)),pi=(0,w.vJ)(ur||(ur=(0,u.Z)(["\n  .react-codemirror2 .CodeMirror.cm-s-instance-config {\n    box-shadow: 0 1px 0 ",";\n    height: 100%;\n  }\n\n  .react-codemirror2 .CodeMirror.cm-s-instance-config {\n    .config-highlight {\n      background-color: ",";\n    }\n"])),S.w.KeylineGray,S.w.Yellow200),hi=l.memo((function(){var e=(0,d.useQuery)(fi,{fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0}),n=(0,K.C4)(e,K.dT),t=e.data,r=null===t||void 0===t?void 0:t.instance.info;return t?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(pi,{}),(0,N.jsx)(C.m,{title:(0,N.jsx)(k.X6,{children:"Instance status"}),tabs:(0,N.jsx)(ai,{tab:"config",refreshState:n})}),(0,N.jsx)(f.x,{padding:{vertical:16,horizontal:24},border:{side:"bottom",width:1,color:S.w.KeylineGray},children:(0,N.jsxs)(k.pm,{children:["Dagster version: ",(0,N.jsx)(k.EK,{style:{fontSize:"16px"},children:t.version})]})}),(0,N.jsx)(di.NU,{editorDidMount:function(e){var n=document.location.hash;if(n){var t=new RegExp("^".concat(n.slice(1),":")),r=e.getSearchCursor(t);r.findNext()&&(e.markText(r.from(),r.to(),{className:"config-highlight"}),e.scrollIntoView(r.from()))}},value:r||"",options:{lineNumbers:!0,mode:"yaml"},theme:["instance-config"]})]}):(0,N.jsx)(f.x,{padding:{vertical:64},children:(0,N.jsx)(m.$,{purpose:"section"})})})),fi=(0,p.Ps)(dr||(dr=(0,u.Z)(["\n  query InstanceConfigQuery {\n    version\n    instance {\n      info\n    }\n  }\n"]))),mi=t(9405),gi=function(){var e=(0,d.useQuery)(xi,{fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0}),n=(0,K.C4)(e,K.dT),t=e.loading,r=e.data;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(C.m,{title:(0,N.jsx)(k.X6,{children:"Instance status"}),tabs:(0,N.jsx)(ai,{tab:"health",refreshState:n})}),(0,N.jsx)(f.x,{padding:{vertical:16,horizontal:24},children:(0,N.jsx)(k.pm,{children:"Daemon statuses"})}),!t||null!==r&&void 0!==r&&r.instance?null!==r&&void 0!==r&&r.instance?(0,N.jsx)(mi.W,{daemonStatuses:r.instance.daemonHealth.allDaemonStatuses}):null:(0,N.jsx)(f.x,{padding:{horizontal:24},style:{color:S.w.Gray400},children:"Loading\u2026"})]})},xi=(0,p.Ps)(pr||(pr=(0,u.Z)(["\n  query InstanceHealthQuery {\n    instance {\n      ...InstanceHealthFragment\n    }\n  }\n\n  ","\n"])),Dr.O),vi=t(55113),yi=t(26533),ji=t(53857),wi=t(59549),bi={QUEUED:S.w.Blue500,NOT_STARTED:S.w.Blue500,STARTING:S.w.Blue500,MANAGED:S.w.Blue500,STARTED:S.w.Blue500,SUCCESS:S.w.Green500,FAILURE:S.w.Red500,CANCELING:S.w.Red500,CANCELED:S.w.Red500},Ci=function(e){var n=e.status,t=e.opacity,r=void 0===t?1:t,i=bi[n];return(0,N.jsx)(Ei,{$color:i,$opacity:r})},ki=function(e){var n=e.fade,t=e.runs,r=t.length,i=.8/Math.max(3,r);return(0,N.jsx)(f.x,{flex:{direction:"row",alignItems:"center",gap:2},children:t.map((function(t,o){return(0,N.jsx)(en.J,{position:"bottom",interactionKind:"hover",content:(0,N.jsx)("div",{children:(0,N.jsx)(Si,{run:t,repoAddr:e.repoAddress})}),hoverOpenDelay:100,children:(0,N.jsx)(Ci,{runId:t.runId,status:t.status,opacity:n?1-(r-o-1)*i:1},t.runId)},t.runId)}))})},Si=function(e){return(0,N.jsxs)(Ti,{children:[(0,N.jsx)(Ii,{children:e.repoAddr}),(0,N.jsxs)(_i,{children:[(0,N.jsx)(wi.K9,{status:e.run.status}),(0,N.jsx)(T.rU,{to:"/instance/runs/".concat(e.run.runId),children:(0,N.jsx)(k.fv,{children:(0,$.EI)(e.run)})}),(0,N.jsx)(Ni,{}),(0,N.jsxs)(f.x,{flex:{direction:"column"},children:[(0,N.jsx)($.Zr,{run:e.run}),(0,N.jsx)($.Tw,{run:e.run})]})]})]})},Ti=w.ZP.div.withConfig({displayName:"RunStatusPez__OverlayContainer",componentId:"sc-1eclpuq-0"})(["padding:4px;font-size:12px;width:280px;"]),Ni=w.ZP.div.withConfig({displayName:"RunStatusPez__HorizontalSpace",componentId:"sc-1eclpuq-1"})(["flex:1;"]),Ii=(0,w.ZP)(ji.M$).withConfig({displayName:"RunStatusPez__OverlayTitle",componentId:"sc-1eclpuq-2"})(["padding:8px;box-shadow:inset 0 -1px ",";max-width:100%;text-overflow:ellipsis;overflow:hidden;min-width:0px;"],S.w.KeylineGray),_i=w.ZP.div.withConfig({displayName:"RunStatusPez__RunRow",componentId:"sc-1eclpuq-3"})(["align-items:baseline;padding:8px;font-family:",";font-size:14px;line-height:20px;display:flex;gap:8px;"],Ye.b.monospace),Ei=w.ZP.div.withConfig({displayName:"RunStatusPez__Pez",componentId:"sc-1eclpuq-4"})(["background-color:",";border-radius:2px;height:16px;opacity:",";width:8px;"],(function(e){return e.$color}),(function(e){return e.$opacity})),Ri=t(37971),Zi=t(7489),Oi={showTimezone:!0,showSeconds:!0},Pi=function(e){var n=e.schedules,t=l.useMemo((function(){return n.map((function(e){var n=e.executionTimezone,t=e.futureTicks;return e.scheduleState.status===W.yn.RUNNING?{executionTimezone:n,earliest:Math.min.apply(Math,(0,sn.Z)(t.results.map((function(e){return e.timestamp}))))}:null})).reduce((function(e,n){return!e||null!==n&&void 0!==n&&n.earliest&&n.earliest<(null===e||void 0===e?void 0:e.earliest)?n:e}),null)}),[n]);return t?(0,N.jsxs)(k.aU,{color:S.w.Gray500,children:["Next tick:"," ",(0,N.jsx)(tn.v,{timestamp:t.earliest,timezone:t.executionTimezone,timeFormat:Oi})]}):null},Li=(0,p.Ps)(hr||(hr=(0,u.Z)(["\n  fragment ScheduleFutureTicksFragment on Schedule {\n    id\n    executionTimezone\n    scheduleState {\n      id\n      status\n    }\n    futureTicks(limit: 10) {\n      results {\n        timestamp\n      }\n    }\n  }\n"]))),Fi=t(33902),Di=t(32460),Ai=function(e,n){return!(e.end<n.start||n.end<e.start)},Ki=function(e,n){return"".concat(n,"-").concat((0,Fi.l)(e))},Ui=function(e){var n=e.range,t=e.jobs,r=e.hourWindow,i=(0,Z.Z)(n,2),o=i[0],s=i[1],a=l.useState([]),c=(0,Z.Z)(a,2),u=c[0],p=c[1],h=l.useState(),f=(0,Z.Z)(h,2),m=f[0],g=f[1],x=(0,d.useQuery)(oo,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{inProgressFilter:{statuses:[W.VO.CANCELING,W.VO.STARTED],createdBefore:s/1e3},terminatedFilter:{statuses:Array.from(Gr.cv),createdBefore:s/1e3,updatedAfter:o/1e3}}}),v=x.data,j=x.loading,w=l.useMemo((function(){return t.reduce((function(e,n){return(0,y.Z)((0,y.Z)({},e),{},(0,ut.Z)({},n.key,n))}),{})}),[t]);return l.useEffect((function(){if(!j){var e=v||{},n=e.unterminated,t=e.terminated,i=e.workspaceOrError,a={},l=Date.now();[].concat((0,sn.Z)("Runs"===(null===n||void 0===n?void 0:n.__typename)?n.results:[]),(0,sn.Z)("Runs"===(null===t||void 0===t?void 0:t.__typename)?t.results:[])).forEach((function(e){e.startTime&&Ai({start:o,end:s},{start:1e3*e.startTime,end:e.endTime?1e3*e.endTime:l})&&(a[e.pipelineName]=[].concat((0,sn.Z)(a[e.pipelineName]||[]),[{id:e.id,status:e.status,startTime:1e3*e.startTime,endTime:e.endTime?1e3*e.endTime:l}]))}));var c=[];if(i&&"Workspace"===i.__typename){var u,d=(0,Jn.Z)(i.locationEntries);try{for(d.s();!(u=d.n()).done;){var h,f=u.value;if("WorkspaceLocationEntry"===f.__typename&&"RepositoryLocation"===(null===(h=f.locationOrLoadError)||void 0===h?void 0:h.__typename)){var m,x=(0,Jn.Z)(f.locationOrLoadError.repositories);try{for(x.s();!(m=x.n()).done;){var b,C=m.value,k=(0,J.k)(C.name,f.locationOrLoadError.name),S=(0,Jn.Z)(C.pipelines);try{var T=function(){var e=b.value,n=Ki(k,e.name);if(!(n in w))return"continue";var t,r=(C.schedules||[]).filter((function(n){return n.pipelineName===e.name})),i=[],l=(0,Jn.Z)(r);try{var u=function(){var e=t.value;e.scheduleState.status===W.yn.RUNNING&&e.futureTicks.results.forEach((function(n){var t=n.timestamp,r=1e3*t;Ai({start:o,end:s},{start:r,end:r})&&i.push({id:"".concat(e.pipelineName,"-future-run-").concat(t),status:"SCHEDULED",startTime:r,endTime:r+1e4})}))};for(l.s();!(t=l.n()).done;)u()}catch(p){l.e(p)}finally{l.f()}var d=a[e.name]||[];(i.length||d.length)&&c.push({key:n,jobName:e.name,path:(0,B.jT)({repoName:k.name,repoLocation:k.location,pipelineName:e.name,isJob:e.isJob}),runs:[].concat((0,sn.Z)(d),i)})};for(S.s();!(b=S.n()).done;)T()}catch(I){S.e(I)}finally{S.f()}}}catch(I){x.e(I)}finally{x.f()}}}}catch(I){d.e(I)}finally{d.f()}}var N=c.reduce((function(e,n){var t=n.runs.map((function(e){return e.startTime}));return(0,y.Z)((0,y.Z)({},e),{},(0,ut.Z)({},n.key,Math.min.apply(Math,(0,sn.Z)(t))))}),{});p(c.sort((function(e,n){return N[e.key]-N[n.key]}))),g(r)}}),[v,o,s,j,w,r]),j&&r!==m?(0,N.jsx)(Lr.T,{purpose:"section"}):(0,N.jsx)(zi,{range:[o,s],jobs:u})},zi=function(e){var n=e.jobs,t=e.range,r=l.useState(null),i=(0,Z.Z)(r,2),o=i[0],s=i[1],a=l.useRef(null),c=l.useCallback((function(e){var n;e?(a.current=new ResizeObserver((function(e){var n=e[0];s(n.contentRect.width)})),a.current.observe(e)):null===(n=a.current)||void 0===n||n.disconnect()}),[]),u=24*(n.length||1);return(0,N.jsx)(Hi,{$height:36+u,ref:c,children:o?n.length?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(qi,{interval:36e5,range:t,height:u}),(0,N.jsx)("div",{children:n.map((function(e,n){return(0,N.jsx)(Qi,{job:e,top:24*n+36,range:t,width:o},e.key)}))})]}):(0,N.jsx)(Vi,{}):null})},qi=function(e){var n=e.interval,t=e.range,r=e.height,i=(0,Z.Z)(t,2),o=i[0],s=i[1],a=navigator.language,c=l.useContext(Ri.j),u=(0,Z.Z)(c,1)[0],d=l.useMemo((function(){var e=s-o,t=o-o%n,r=Math.ceil(e/n)+1;return(0,sn.Z)(new Array(r)).map((function(r,i){var s=t+i*n,l=new Date(s);return{label:l.toLocaleString(a,{hour:"2-digit",timeZone:"Automatic"===u?(0,Zi.cw)():u}),key:l.toString(),left:(s-o)/e*100}})).filter((function(e){return e.left>0}))}),[s,o,n,a,u]),p=Date.now(),h="".concat(((p-o)/(s-o)*100).toPrecision(3),"%");return(0,N.jsxs)(Gi,{style:{height:"".concat(r,"px")},children:[(0,N.jsx)(Mi,{children:d.map((function(e){return(0,N.jsx)($i,{style:{left:"".concat(e.left.toPrecision(3),"%")},children:e.label},e.key)}))}),(0,N.jsxs)(Wi,{children:[d.map((function(e){return(0,N.jsx)(Ji,{style:{left:"".concat(e.left.toPrecision(3),"%")}},e.key)})),p>=o&&p<=s?(0,N.jsx)(Ji,{style:{left:h,backgroundColor:S.w.Blue500,zIndex:1}}):null]})]})},Gi=w.ZP.div.withConfig({displayName:"RunTimeline__DividerContainer",componentId:"sc-1k6kbha-0"})(["position:absolute;top:0;left:","px;right:0;font-family:",";color:",";"],232,Ye.b.monospace,S.w.Gray400),Mi=w.ZP.div.withConfig({displayName:"RunTimeline__DividerLabels",componentId:"sc-1k6kbha-1"})(["display:flex;align-items:center;height:","px;position:relative;user-select:none;width:100%;"],36),$i=w.ZP.div.withConfig({displayName:"RunTimeline__DividerLabel",componentId:"sc-1k6kbha-2"})(["position:absolute;transform:translateX(-50%);white-space:nowrap;"]),Wi=w.ZP.div.withConfig({displayName:"RunTimeline__DividerLines",componentId:"sc-1k6kbha-3"})(["height:100%;position:relative;width:100%;box-shadow:inset 1px 0 0 ",",inset -1px 0 0 ",";"],S.w.KeylineGray,S.w.KeylineGray),Ji=w.ZP.div.withConfig({displayName:"RunTimeline__DividerLine",componentId:"sc-1k6kbha-4"})(["background-color:",";height:100%;position:absolute;top:0;width:1px;"],S.w.KeylineGray),Bi=function(e){var n=!1,t=!1,r=!1,i=!1,o=!1;return e.forEach((function(e){var s=e.status;"SCHEDULED"===s?o=!0:Gr.sy.has(s)?t=!0:Gr.Ys.has(s)?n=!0:Gr.hd.has(s)?r=!0:Gr._m.has(s)&&(i=!0)})),t?S.w.Blue200:n?S.w.Blue500:r?S.w.Red500:i?S.w.Green500:o?S.w.Blue200:S.w.Gray500},Qi=function(e){var n=e.job,t=e.top,r=e.range,i=e.width,o=(0,Z.Z)(r,2),s=o[0],a=o[1],c=i-232,u=n.runs,d=l.useMemo((function(){var e=function(e){for(var n=e.runs,t=e.start,r=e.end,i=e.width,o=e.minChunkWidth,s=e.minMultipleWidth,a=r-t,l=n.map((function(e){var n=e.startTime,r=e.endTime||Date.now();return{runs:[e],startTime:n,endTime:r,left:Math.max(0,Math.floor((n-t)/a*i)),width:Math.max(o,Math.min(Math.ceil((r-n)/a*i),Math.ceil((r-t)/a*i)))}})).sort((function(e,n){return n.left-e.left})),c=[];l.length;){var u=l.shift(),d=l[0];if(u)if(d&&Ai({start:u.left,end:u.left+Math.max(u.width,s)},{start:d.left,end:d.left+Math.max(d.width,s)})){l.shift(),u.runs=[].concat((0,sn.Z)(u.runs),(0,sn.Z)(d.runs)),u.startTime=Math.min(u.startTime,d.startTime),u.endTime=Math.max(u.endTime,d.endTime);var p=Math.max(u.left+s,u.left+u.width,d.left+d.width),h=Math.min(u.left,d.left);u.width=p-h,u.left=h,l.unshift(u)}else c.push(u)}return c}({runs:u,start:s,end:a,width:c,minChunkWidth:2,minMultipleWidth:16});return e}),[u,s,a,c]);return n.runs.length?(0,N.jsxs)(Xi,{$top:t,children:[(0,N.jsx)(Yi,{children:(0,N.jsx)(T.rU,{to:n.path,children:n.jobName})}),(0,N.jsx)(eo,{children:d.map((function(e){var t=e.left,r=e.width,i=e.runs.length;return(0,N.jsx)(no,{$color:Bi(e.runs),$multiple:i>1,style:{left:"".concat(t,"px"),width:"".concat(r,"px")},children:(0,N.jsx)(en.J,{content:(0,N.jsx)(ro,{jobKey:n.key,batch:e}),position:"top",interactionKind:"hover",className:"chunk-popover-target",children:(0,N.jsx)(f.x,{flex:{direction:"row",justifyContent:"center",alignItems:"center"},style:{height:"100%"},children:i>1?(0,N.jsx)(to,{children:e.runs.length}):null})})},e.runs[0].id)}))})]}):null},Vi=function(){return(0,N.jsx)(f.x,{flex:{justifyContent:"center",alignItems:"center"},padding:24,children:"No runs or upcoming runs found for this time window."})},Hi=w.ZP.div.withConfig({displayName:"RunTimeline__Timeline",componentId:"sc-1k6kbha-5"})([""," position:relative;"],(function(e){var n=e.$height;return"height: ".concat(n,"px;")})),Xi=w.ZP.div.withConfig({displayName:"RunTimeline__Row",componentId:"sc-1k6kbha-6"})(["align-items:center;box-shadow:inset 0 -1px 0 ",";display:flex;flex-direction:row;width:100%;height:","px;padding:1px 0;position:absolute;left:0;top:0;",":first-child,:hover{box-shadow:inset 0 1px 0 ",",inset 0 -1px 0 ",";}:hover{background-color:",";}"],S.w.KeylineGray,25,(function(e){var n=e.$top;return"transform: translateY(".concat(n,"px);")}),S.w.KeylineGray,S.w.KeylineGray,S.w.Gray10),Yi=w.ZP.div.withConfig({displayName:"RunTimeline__JobName",componentId:"sc-1k6kbha-7"})(["font-family:",";font-size:14px;line-height:16px;overflow:hidden;padding:0 12px 0 24px;text-overflow:ellipsis;white-space:nowrap;width:","px;"],Ye.b.monospace,232),eo=w.ZP.div.withConfig({displayName:"RunTimeline__RunChunks",componentId:"sc-1k6kbha-8"})(["flex:1;position:relative;height:","px;"],24),no=w.ZP.div.withConfig({displayName:"RunTimeline__RunChunk",componentId:"sc-1k6kbha-9"})(["align-items:center;background-color:",";border-radius:2px;height:","px;position:absolute;top:2px;",";transition:background-color 300ms linear,width 300ms ease-in-out;.chunk-popover-target{display:block;height:100%;width:100%;}"],(function(e){return e.$color}),20,(function(e){return e.$multiple?"min-width: ".concat(16,"px"):null})),to=w.ZP.div.withConfig({displayName:"RunTimeline__BatchCount",componentId:"sc-1k6kbha-10"})(["color:",";cursor:default;font-size:12px;user-select:none;"],S.w.White),ro=function(e){var n=e.jobKey,t=e.batch;return(0,N.jsxs)(f.x,{style:{width:"260px"},children:[(0,N.jsx)(f.x,{padding:12,border:{side:"bottom",width:1,color:S.w.KeylineGray},children:(0,N.jsx)(io,{children:n})}),(0,N.jsx)("div",{style:{maxHeight:"240px",overflowY:"auto"},children:t.runs.map((function(e,n){return(0,N.jsxs)(f.x,{border:n>0?{side:"top",width:1,color:S.w.KeylineGray}:null,flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},padding:{vertical:8,horizontal:12},children:[(0,N.jsxs)(f.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,N.jsx)(wi.O_,{status:e.status,size:8}),"SCHEDULED"===e.status?"Scheduled":(0,N.jsx)(T.rU,{to:"/instance/runs/".concat(e.id),children:(0,N.jsx)(k.fv,{children:e.id.slice(0,8)})})]}),(0,N.jsx)(k.fv,{children:"SCHEDULED"===e.status?(0,N.jsx)(tn.v,{timestamp:e.startTime/1e3}):(0,N.jsx)(Di.Q,{startUnix:e.startTime/1e3,endUnix:e.endTime/1e3})})]},e.id)}))})]})},io=w.ZP.strong.withConfig({displayName:"RunTimeline__HoverContentJobName",componentId:"sc-1k6kbha-11"})(["display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%;"]),oo=(0,p.Ps)(fr||(fr=(0,u.Z)(["\n  query RunTimelineQuery($inProgressFilter: RunsFilter!, $terminatedFilter: RunsFilter!) {\n    unterminated: runsOrError(filter: $inProgressFilter) {\n      ... on Runs {\n        results {\n          id\n          pipelineName\n          ...RunTimeFragment\n        }\n      }\n    }\n    terminated: runsOrError(filter: $terminatedFilter) {\n      ... on Runs {\n        results {\n          id\n          pipelineName\n          ...RunTimeFragment\n        }\n      }\n    }\n    workspaceOrError {\n      ... on Workspace {\n        locationEntries {\n          id\n          name\n          loadStatus\n          displayMetadata {\n            key\n            value\n          }\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                }\n                schedules {\n                  id\n                  name\n                  pipelineName\n                  scheduleState {\n                    id\n                    status\n                  }\n                  ...ScheduleFutureTicksFragment\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"])),$.$X,Li),so=t(2097),ao=t(63579),lo=t(90933),co=function(e){var n=e.job,t=e.repoAddress,r=n.runs[0],i=(0,ao.TE)().canLaunchPipelineReexecution,o=(0,d.useLazyQuery)(uo),s=(0,Z.Z)(o,2),a=s[0],c=s[1].data,u="Run"===(null===c||void 0===c?void 0:c.pipelineRunOrError.__typename)?null===c||void 0===c?void 0:c.pipelineRunOrError:null,p=l.useCallback((function(){r.id&&a({variables:{runId:r.id}})}),[r,a]),h=Bt(u),f=(0,N.jsx)(pt.sN,{icon:"replay",text:"Re-execute latest run",onClick:function(){return h({type:"all"})},disabled:!i||!u||!(0,qt.EP)(u)}),m=(0,N.jsx)(pt.sN,{icon:"sync_problem",text:"Re-execute latest run from failure",onClick:function(){return h({type:"from-failure"})},disabled:!i||!u||!(0,qt.VM)(u)});return(0,N.jsx)(en.J,{onOpened:function(){return p()},content:(0,N.jsxs)(pt.v2,{children:[(0,N.jsx)(lo.U,{to:(0,B.jT)({repoName:t.name,repoLocation:t.location,pipelineName:n.name,isJob:n.isJob}),icon:"job",text:"View job"}),(0,N.jsx)(lo.U,{to:(0,B.jT)({repoName:t.name,repoLocation:t.location,pipelineName:n.name,isJob:n.isJob,path:"/runs"}),icon:"checklist",text:"View all recent runs"}),i?f:(0,N.jsx)(ht.u,{content:ao.c2,display:"block",children:f}),i?m:(0,N.jsx)(ht.u,{content:ao.c2,display:"block",children:m})]}),position:"bottom-right",children:(0,N.jsx)(ke.zx,{icon:(0,N.jsx)(V.JO,{name:"expand_more"})})})},uo=(0,p.Ps)(mr||(mr=(0,u.Z)(["\n  query RunReExecutionQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        ...RunFragment\n      }\n    }\n  }\n\n  ","\n"])),Hn.O.RunFragment),po=t(63744),ho=t(8358),fo=t(93141),mo=function(){var e=l.useContext(rn.C5),n=e.allRepos,t=e.visibleRepos,r=e.toggleVisible,i=l.useState(!1),o=(0,Z.Z)(i,2),s=o[0],a=o[1];return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(ho.Vq,{canOutsideClickClose:!0,canEscapeKeyClose:!0,isOpen:s,style:{width:"auto"},onClose:function(){return a(!1)},children:[(0,N.jsx)(ho.fK,{icon:"repo",label:"Repositories"}),(0,N.jsx)(fo.e,{options:n,onBrowse:function(){return a(!1)},onToggle:r,selected:t}),(0,N.jsx)(ho.cN,{children:(0,N.jsx)(f.x,{padding:{top:8},children:(0,N.jsx)(ke.zx,{intent:"none",onClick:function(){return a(!1)},children:"Done"})})})]}),(0,N.jsx)(ke.zx,{icon:(0,N.jsx)(V.JO,{name:"folder"}),rightIcon:(0,N.jsx)(V.JO,{name:"expand_more"}),onClick:function(){return a(!0)},children:"".concat(t.length," of ").concat(n.length," Repositories")})]})},go=function(e,n){return"search"===n.type?(0,y.Z)((0,y.Z)({},e),{},{searchValue:n.value}):e},xo={searchValue:""},vo=function(){var e=l.useReducer(go,xo),n=(0,Z.Z)(e,2),t=n[0],r=n[1],i=l.useContext(rn.C5),o=i.allRepos,s=i.visibleRepos,a=t.searchValue,c=(0,d.useQuery)(Co,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),u=c.data,p=c.loading,h=(0,d.useQuery)(ko,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),x=h.data,v=(0,K.V5)((0,K.C4)(h,K.dT),(0,K.C4)(c,K.dT)),j=l.useMemo((function(){var e=[],n=[],t=[],r=[],i=[],o=function(e,n){var t=e.job.runs[0]||null,r=n.job.runs[0]||null;return t.startTime?r.startTime?r.startTime-t.startTime:-1:r.startTime?-1:e.job.name.toLocaleLowerCase().localeCompare(n.job.name.toLocaleLowerCase())};if(u&&Object.keys(u).length&&"Workspace"===(null===u||void 0===u?void 0:u.workspaceOrError.__typename)){var s,a=(0,Jn.Z)(u.workspaceOrError.locationEntries);try{for(a.s();!(s=a.n()).done;){var l,c=s.value;if("WorkspaceLocationEntry"===c.__typename&&"RepositoryLocation"===(null===(l=c.locationOrLoadError)||void 0===l?void 0:l.__typename)){var d,p=(0,Jn.Z)(c.locationOrLoadError.repositories);try{for(p.s();!(d=p.n()).done;){var h,f=d.value,m=(0,Jn.Z)(f.pipelines);try{var g=function(){var o=h.value,s=o.runs,a=(f.schedules||[]).filter((function(e){return e.pipelineName===o.name})),l=(f.sensors||[]).filter((function(e){var n;return null===(n=e.targets)||void 0===n?void 0:n.map((function(e){return e.pipelineName})).includes(o.name)})),u=(0,J.k)(f.name,c.locationOrLoadError.name);if(s.length){var d=s[0].status,p={job:o,schedules:a,sensors:l,repoAddress:u};Gr.hd.has(d)?e.push(p):Gr.Ys.has(d)?n.push(p):Gr._m.has(d)?t.push(p):Gr.sy.has(d)?r.push(p):i.push(p)}};for(m.s();!(h=m.n()).done;)g()}catch(x){m.e(x)}finally{m.f()}}}catch(x){p.e(x)}finally{p.f()}}}}catch(x){a.e(x)}finally{a.f()}}return e.sort(o),n.sort(o),r.sort(o),t.sort(o),i.sort(o),{failed:e,inProgress:n,queued:r,succeeded:t,neverRan:i}}),[u]),w=l.useMemo((function(){var e=a.toLocaleLowerCase(),n=function(n){var t=n.job,r=n.repoAddress;return s.some((function(e){return e.repository.name===r.name&&e.repositoryLocation.name===r.location}))&&t.name.toLocaleLowerCase().includes(e)&&!(0,g.pv)(t.name)},t=j.failed,r=j.inProgress,i=j.queued,o=j.succeeded,l=j.neverRan;return{failed:t.filter(n),inProgress:r.filter(n),queued:i.filter(n),succeeded:o.filter(n),neverRan:l.filter(n)}}),[j,s,a]),b=l.useMemo((function(){if(!x||0===Object.keys(x).length)return null;var e={};if("Workspace"===x.workspaceOrError.__typename){var n,t=(0,Jn.Z)(x.workspaceOrError.locationEntries);try{for(t.s();!(n=t.n()).done;){var r,i=n.value;if("WorkspaceLocationEntry"===i.__typename&&"RepositoryLocation"===(null===(r=i.locationOrLoadError)||void 0===r?void 0:r.__typename)){var o,s=(0,Jn.Z)(i.locationOrLoadError.repositories);try{for(s.s();!(o=s.n()).done;){var a,l=o.value,c=(0,Jn.Z)(l.pipelines);try{for(c.s();!(a=c.n()).done;){var u=a.value;e[Ki((0,J.k)(l.name,i.locationOrLoadError.name),u.name)]=u.runs}}catch(d){c.e(d)}finally{c.f()}}}catch(d){s.e(d)}finally{s.f()}}}}catch(d){t.e(d)}finally{t.f()}}return e}),[x]),T=l.useMemo((function(){return Object.values(w).reduce((function(e,n){return[].concat((0,sn.Z)(e),(0,sn.Z)(n))}),[])}),[w]),I=l.useMemo((function(){var e=function(e){var n=e.job,t=e.repoAddress,r=Ki(t,n.name),i=b&&b[r]||[];return(0,y.Z)((0,y.Z)({},e),{},{runs:(0,sn.Z)(i).reverse()})},n=w.failed,t=w.inProgress,r=w.queued,i=w.succeeded,o=w.neverRan;return{failed:n.map(e),inProgress:t.map(e),queued:r.map(e),succeeded:i.map(e),neverRan:o.map(e)}}),[b,w]);if(!u||0===Object.keys(u).length)return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(C.m,{title:(0,N.jsx)(k.X6,{children:"Instance status"}),tabs:(0,N.jsx)(ai,{tab:"overview",refreshState:v})}),(0,N.jsx)(f.x,{padding:64,children:(0,N.jsx)(m.$,{purpose:"section"})})]});var _=I.failed,E=I.inProgress,R=I.queued,O=I.succeeded,P=I.neverRan;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(C.m,{title:(0,N.jsx)(k.X6,{children:"Instance status"}),tabs:(0,N.jsx)(ai,{tab:"overview",refreshState:v})}),(0,N.jsxs)(f.x,{padding:{horizontal:24,top:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[o.length>1&&(0,N.jsx)(mo,{}),(0,N.jsx)(wt.oi,{icon:"search",value:a,onChange:function(e){return r({type:"search",value:e.target.value})},placeholder:"Filter by job name\u2026",style:{width:"340px"}})]}),(0,N.jsx)(jo,{jobs:T,loading:p}),E.length?(0,N.jsx)(wo,{icon:(0,N.jsx)(V.JO,{name:"hourglass_bottom",color:S.w.Blue500,size:24}),heading:1===E.length?"1 job in progress":"".concat(E.length," jobs in progress"),jobs:E}):null,_.length?(0,N.jsx)(wo,{icon:(0,N.jsx)(V.JO,{name:"error_outline",color:S.w.Red500,size:24}),heading:1===_.length?"1 job failed":"".concat(_.length," jobs failed"),jobs:_}):null,R.length?(0,N.jsx)(wo,{icon:(0,N.jsx)(V.JO,{name:"checklist",color:S.w.Gray500,size:24}),heading:1===R.length?"1 job queued":"".concat(R.length," jobs queued"),jobs:R}):null,O.length?(0,N.jsx)(wo,{icon:(0,N.jsx)(V.JO,{name:"check_circle",color:S.w.Green500,size:24}),heading:1===O.length?"1 job succeeded":"".concat(O.length," jobs succeeded"),jobs:O}):null,P.length?(0,N.jsx)(wo,{icon:(0,N.jsx)(V.JO,{name:"history_toggle_off",color:S.w.Gray900,size:24}),heading:1===P.length?"1 job never ran":"".concat(P.length," jobs never ran"),jobs:P}):null]})},yo=36e5,jo=function(e){var n=e.jobs,t=e.loading,r=l.useState(!0),i=(0,Z.Z)(r,2),o=i[0],s=i[1],a=l.useState("6"),c=(0,Z.Z)(a,2),u=c[0],d=c[1],p=l.useRef(Date.now());l.useEffect((function(){t||(p.current=Date.now())}),[t]);var h=Math.floor(p.current/1e3),m=l.useMemo((function(){return[1e3*h-Number(u)*yo,1e3*h+36e5]}),[u,h]),g=l.useMemo((function(){var e=(0,Z.Z)(m,2),n=e[0],t=e[1];return t<n?[t,n]:[n,t]}),[m]),x=(0,Z.Z)(g,2),v=x[0],y=x[1],j=n.map((function(e){return{key:Ki(e.repoAddress,e.job.name),jobName:e.job.name,path:(0,B.jT)({repoName:e.repoAddress.name,repoLocation:e.repoAddress.location,pipelineName:e.job.name,isJob:e.job.isJob}),runs:[]}}));return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(f.x,{flex:{direction:"row",alignItems:"center",justifyContent:"space-between"},margin:{top:16},padding:{bottom:16,horizontal:24},border:{side:"bottom",width:1,color:S.w.KeylineGray},children:[(0,N.jsxs)(f.x,{flex:{alignItems:"center",gap:8},children:[(0,N.jsx)(V.JO,{name:"waterfall_chart",color:S.w.Gray900,size:20}),(0,N.jsx)(k.X6,{children:"Timeline"})]}),(0,N.jsxs)(f.x,{flex:{alignItems:"center",gap:8},children:[o?(0,N.jsx)(be.h,{activeItems:new Set([u]),buttons:[{id:"1",label:"1hr"},{id:"6",label:"6hr"},{id:"12",label:"12hr"},{id:"24",label:"24hr"}],onClick:function(e){return d(e)}}):null,(0,N.jsx)(ke.zx,{icon:(0,N.jsx)(V.JO,{name:o?"unfold_less":"unfold_more"}),onClick:function(){return s((function(e){return!e}))},children:o?"Hide":"Show"})]})]}),o?(0,N.jsx)(Ui,{range:[v,y],jobs:j,hourWindow:u}):null]})},wo=function(e){var n=e.icon,t=e.heading,r=e.jobs;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(f.x,{flex:{direction:"row",gap:8,alignItems:"center"},margin:{top:16},padding:{vertical:16,horizontal:24},children:[n,(0,N.jsx)(k.X6,{children:t})]}),(0,N.jsxs)(vi.i,{children:[(0,N.jsx)("thead",{children:(0,N.jsxs)("tr",{children:[(0,N.jsx)("th",{style:{width:"40%"},children:"Job"}),(0,N.jsx)("th",{style:{width:"25%"},children:"Trigger"}),(0,N.jsx)("th",{style:{width:"35%"},children:"Latest run"}),(0,N.jsx)("th",{})]})}),(0,N.jsx)("tbody",{children:r.map((function(e){var n=e.job,t=e.repoAddress,r=e.runs,i=e.schedules,o=e.sensors,s=Ki(t,n.name),a=(0,Fi.l)(t);return(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{children:(0,N.jsxs)(f.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,N.jsxs)(f.x,{flex:{direction:"column",gap:4},children:[(0,N.jsxs)(f.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,N.jsx)(ne.h,{pipelineName:n.name,isJob:n.isJob,pipelineHrefContext:t}),n.isJob?null:(0,N.jsx)(yi.l,{})]}),(0,N.jsx)(k.uT,{color:S.w.Gray400,style:{fontFamily:Ye.b.monospace},children:a})]}),r?(0,N.jsx)(f.x,{margin:{top:4},children:(0,N.jsx)(ki,{fade:!0,runs:r,repoAddress:a})}):null]})}),(0,N.jsx)("td",{children:i.length||o.length?(0,N.jsxs)(f.x,{flex:{direction:"column",alignItems:"flex-start",gap:8},children:[(0,N.jsx)(xe.I,{schedules:i,sensors:o,repoAddress:t}),i.length?(0,N.jsx)(Pi,{schedules:i}):null]}):(0,N.jsx)("div",{style:{color:S.w.Gray500},children:"None"})}),(0,N.jsx)("td",{children:(0,N.jsx)(po.Z,{run:n.runs[0]})}),(0,N.jsx)("td",{children:(0,N.jsx)(co,{job:n,repoAddress:t})})]},s)}))})]})]})},bo=(0,p.Ps)(gr||(gr=(0,u.Z)(["\n  fragment OverviewJobFragment on Pipeline {\n    id\n    name\n    isJob\n    runs(limit: 1) {\n      id\n      mode\n      runId\n      status\n      ...RunTimeFragment\n    }\n    modes {\n      id\n      name\n    }\n  }\n\n  ","\n"])),$.$X),Co=(0,p.Ps)(xr||(xr=(0,u.Z)(["\n  query InstanceOverviewInitialQuery {\n    workspaceOrError {\n      ... on Workspace {\n        locationEntries {\n          id\n          name\n          loadStatus\n          displayMetadata {\n            key\n            value\n          }\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  ...OverviewJobFragment\n                }\n                ...RepositoryInfoFragment\n                schedules {\n                  id\n                  name\n                  pipelineName\n                  scheduleState {\n                    id\n                    status\n                  }\n                  ...ScheduleFutureTicksFragment\n                  ...ScheduleSwitchFragment\n                }\n                sensors {\n                  id\n                  name\n                  targets {\n                    pipelineName\n                  }\n                  sensorState {\n                    id\n                    status\n                  }\n                  ...SensorSwitchFragment\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),bo,so.x,Li,ve.J,ye.U,un.Bq),ko=(0,p.Ps)(vr||(vr=(0,u.Z)(["\n  query LastTenRunsPerJobQuery {\n    workspaceOrError {\n      ... on Workspace {\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                  runs(limit: 10) {\n                    id\n                    ...RunTimeFragment\n                  }\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"])),un.Bq,$.$X),So=t(45352),To=t(56313),No=t(98191),Io=l.memo((function(){var e=(0,d.useQuery)(Eo,{fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0}),n=(0,K.C4)(e,K.dT);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(C.m,{title:(0,N.jsx)(k.X6,{children:"Instance status"}),tabs:(0,N.jsx)(ai,{tab:"schedules",refreshState:n})}),(0,N.jsx)(Lr.g,{queryResult:e,allowStaleData:!0,children:function(e){return(0,N.jsx)(_o,{data:e})}})]})})),_o=function(e){var n=e.data,t=n.instance,r=n.repositoriesOrError,i=n.unloadableInstigationStatesOrError;if("PythonError"===r.__typename)return(0,N.jsx)(un.T9,{error:r});if("PythonError"===i.__typename)return(0,N.jsx)(un.T9,{error:i});var o=i.results,s=r.nodes.filter((function(e){return e.schedules.length})),a=s.length?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(f.x,{padding:{vertical:16,horizontal:24},children:(0,N.jsx)(Kr.K,{daemonHealth:t.daemonHealth})}),s.map((function(e){return(0,N.jsxs)(l.Fragment,{children:[(0,N.jsx)(f.x,{padding:{vertical:16,horizontal:24},border:{side:"top",width:1,color:S.w.KeylineGray},children:(0,N.jsx)(k.pm,{children:"".concat((0,J.i)(e.name,e.location.name))})}),(0,N.jsx)(f.x,{padding:{bottom:16},children:(0,N.jsx)(No.P,{repoAddress:(0,J.k)(e.name,e.location.name),schedules:e.schedules})})]},e.name)}))]}):null,c=o.filter((function(e){return e.instigationType===W._5.SCHEDULE})),u=c.length?(0,N.jsx)(To.Y,{scheduleStates:c}):null;return a||u?(0,N.jsxs)(vn.Z,{direction:"column",spacing:32,children:[a,u]}):(0,N.jsx)(f.x,{margin:{top:32},children:(0,N.jsx)(F.t,{icon:"schedule",title:"No schedules found",description:(0,N.jsxs)("div",{children:["This instance does not have any schedules defined. Visit the"," ",(0,N.jsx)("a",{href:"https://docs.dagster.io/concepts/partitions-schedules-sensors/schedules",target:"_blank",rel:"noreferrer",children:"scheduler documentation"})," ","for more information about scheduling runs in Dagster."]})})})},Eo=(0,p.Ps)(yr||(yr=(0,u.Z)(["\n  query InstanceSchedulesQuery {\n    instance {\n      ...InstanceHealthFragment\n    }\n    repositoriesOrError {\n      __typename\n      ... on RepositoryConnection {\n        nodes {\n          id\n          name\n          ...RepositoryInfoFragment\n          schedules {\n            id\n            ...ScheduleFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n    unloadableInstigationStatesOrError {\n      ... on InstigationStates {\n        results {\n          id\n          ...InstigationStateFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),Dr.O,so.x,Ar.GA,un.Bq,So.ai),Ro=t(20925),Zo=t(57466),Oo=t(87669),Po=l.memo((function(){var e=(0,d.useQuery)(Fo,{fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0}),n=(0,K.C4)(e,K.dT);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(C.m,{title:(0,N.jsx)(k.X6,{children:"Instance status"}),tabs:(0,N.jsx)(ai,{tab:"sensors",refreshState:n})}),(0,N.jsx)(Lr.g,{queryResult:e,allowStaleData:!0,children:function(e){return(0,N.jsx)(Lo,{data:e})}})]})})),Lo=function(e){var n=e.data,t=n.instance,r=n.repositoriesOrError,i=n.unloadableInstigationStatesOrError;if("PythonError"===r.__typename)return(0,N.jsx)(un.T9,{error:r});if("PythonError"===i.__typename)return(0,N.jsx)(un.T9,{error:i});var o=i.results,s=r.nodes.filter((function(e){return e.sensors.length})),a=s.length?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(f.x,{padding:{horizontal:24,vertical:16},children:(0,N.jsx)(Zo.F,{daemonHealth:t.daemonHealth})}),s.map((function(e){return e.sensors.length?(0,N.jsxs)(l.Fragment,{children:[(0,N.jsx)(f.x,{padding:{horizontal:24,vertical:16},border:{side:"top",width:1,color:S.w.KeylineGray},children:(0,N.jsx)(k.pm,{children:"".concat((0,J.i)(e.name,e.location.name))})}),(0,N.jsx)(f.x,{padding:{bottom:16},children:(0,N.jsx)(Oo.J,{repoAddress:(0,J.k)(e.name,e.location.name),sensors:e.sensors})})]},e.name):null}))]}):null,c=o.filter((function(e){return e.instigationType===W._5.SENSOR})),u=c.length?(0,N.jsx)(To.e,{sensorStates:c}):null;return a||u?(0,N.jsxs)(N.Fragment,{children:[a,u]}):(0,N.jsx)(f.x,{padding:{vertical:64},border:{side:"top",width:1,color:S.w.KeylineGray},children:(0,N.jsx)(F.t,{icon:"sensors",title:"No sensors found",description:(0,N.jsxs)("p",{children:["This instance does not have any sensors defined. Visit the"," ",(0,N.jsx)("a",{href:"https://docs.dagster.io/concepts/partitions-schedules-sensors/schedules",target:"_blank",rel:"noreferrer",children:"sensor documentation"})," ","for more information about setting up sensors in Dagster."]})})})},Fo=(0,p.Ps)(jr||(jr=(0,u.Z)(["\n  query InstanceSensorsQuery {\n    instance {\n      ...InstanceHealthFragment\n    }\n    repositoriesOrError {\n      __typename\n      ... on RepositoryConnection {\n        nodes {\n          id\n          name\n          ...RepositoryInfoFragment\n          sensors {\n            id\n            ...SensorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n    unloadableInstigationStatesOrError {\n      ... on InstigationStates {\n        results {\n          id\n          ...InstigationStateFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),Dr.O,so.x,un.Bq,Ro.l,So.ai),Do=function(){return(0,N.jsx)(h.T,{children:(0,N.jsxs)(c.rs,{children:[(0,N.jsx)(c.AW,{path:"/instance/overview",children:(0,N.jsx)(vo,{})}),(0,N.jsx)(c.AW,{path:"/instance/health",children:(0,N.jsx)(gi,{})}),(0,N.jsx)(c.AW,{path:"/instance/schedules",children:(0,N.jsx)(Io,{})}),(0,N.jsx)(c.AW,{path:"/instance/sensors",children:(0,N.jsx)(Po,{})}),(0,N.jsx)(c.AW,{path:"/instance/backfills",children:(0,N.jsx)(li,{})}),(0,N.jsx)(c.AW,{path:"/instance/config",children:(0,N.jsx)(hi,{})}),(0,N.jsx)(c.AW,{path:"*",render:function(){return(0,N.jsx)(c.l_,{to:"/instance"})}})]})})},Ao=function(){var e=(0,c.TH)().pathname,n=l.useRef(null);return l.useEffect((function(){var e;null===(e=n.current)||void 0===e||e.scrollTo({top:0})}),[e]),(0,N.jsx)(a.M,{ref:n,children:(0,N.jsxs)(c.rs,{children:[(0,N.jsx)(c.AW,{path:"/instance/assets(/?.*)",children:(0,N.jsx)(He,{})}),(0,N.jsx)(c.AW,{path:"/instance/runs",exact:!0,children:(0,N.jsx)(Jr,{})}),(0,N.jsx)(c.AW,{path:"/instance/runs/:runId",exact:!0,children:(0,N.jsx)(Nr,{})}),(0,N.jsx)(c.AW,{path:"/instance/snapshots/:pipelinePath/:tab?",children:(0,N.jsx)(ii,{})}),(0,N.jsx)(c.AW,{path:"/instance/:tab",children:(0,N.jsx)(Do,{})}),(0,N.jsx)(c.AW,{path:"*",render:function(){return(0,N.jsx)(c.l_,{to:"/instance/overview"})}})]})})},Ko=Ao},60453:function(e){"use strict";var n=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();var t=[[{color:"0, 0, 0",class:"ansi-black"},{color:"187, 0, 0",class:"ansi-red"},{color:"0, 187, 0",class:"ansi-green"},{color:"187, 187, 0",class:"ansi-yellow"},{color:"0, 0, 187",class:"ansi-blue"},{color:"187, 0, 187",class:"ansi-magenta"},{color:"0, 187, 187",class:"ansi-cyan"},{color:"255,255,255",class:"ansi-white"}],[{color:"85, 85, 85",class:"ansi-bright-black"},{color:"255, 85, 85",class:"ansi-bright-red"},{color:"0, 255, 0",class:"ansi-bright-green"},{color:"255, 255, 85",class:"ansi-bright-yellow"},{color:"85, 85, 255",class:"ansi-bright-blue"},{color:"255, 85, 255",class:"ansi-bright-magenta"},{color:"85, 255, 255",class:"ansi-bright-cyan"},{color:"255, 255, 255",class:"ansi-bright-white"}]],r=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.fg=this.bg=this.fg_truecolor=this.bg_truecolor=null,this.bright=0}return n(e,null,[{key:"escapeForHtml",value:function(n){return(new e).escapeForHtml(n)}},{key:"linkify",value:function(n){return(new e).linkify(n)}},{key:"ansiToHtml",value:function(n,t){return(new e).ansiToHtml(n,t)}},{key:"ansiToJson",value:function(n,t){return(new e).ansiToJson(n,t)}},{key:"ansiToText",value:function(n){return(new e).ansiToText(n)}}]),n(e,[{key:"setupPalette",value:function(){this.PALETTE_COLORS=[];for(var e=0;e<2;++e)for(var n=0;n<8;++n)this.PALETTE_COLORS.push(t[e][n].color);for(var r=[0,95,135,175,215,255],i=function(e,n,t){return r[e]+", "+r[n]+", "+r[t]},o=0;o<6;++o)for(var s=0;s<6;++s)for(var a=0;a<6;++a)this.PALETTE_COLORS.push(i(o,s,a));for(var l=8,c=0;c<24;++c,l+=10)this.PALETTE_COLORS.push(i(l,l,l))}},{key:"escapeForHtml",value:function(e){return e.replace(/[&<>]/gm,(function(e){return"&"==e?"&amp;":"<"==e?"&lt;":">"==e?"&gt;":""}))}},{key:"linkify",value:function(e){return e.replace(/(https?:\/\/[^\s]+)/gm,(function(e){return'<a href="'+e+'">'+e+"</a>"}))}},{key:"ansiToHtml",value:function(e,n){return this.process(e,n,!0)}},{key:"ansiToJson",value:function(e,n){return(n=n||{}).json=!0,n.clearLine=!1,this.process(e,n,!0)}},{key:"ansiToText",value:function(e){return this.process(e,{},!1)}},{key:"process",value:function(e,n,t){var r=this,i=e.split(/\033\[/),o=i.shift();void 0!==n&&null!==n||(n={}),n.clearLine=/\r/.test(e);var s=i.map((function(e){return r.processChunk(e,n,t)}));if(n&&n.json){var a=this.processChunkJson("");return a.content=o,a.clearLine=n.clearLine,s.unshift(a),n.remove_empty&&(s=s.filter((function(e){return!e.isEmpty()}))),s}return s.unshift(o),s.join("")}},{key:"processChunkJson",value:function(e,n,r){var i=(n="undefined"==typeof n?{}:n).use_classes="undefined"!=typeof n.use_classes&&n.use_classes,o=n.key=i?"class":"color",s={content:e,fg:null,bg:null,fg_truecolor:null,bg_truecolor:null,clearLine:n.clearLine,decoration:null,was_processed:!1,isEmpty:function(){return!s.content}},a=e.match(/^([!\x3c-\x3f]*)([\d;]*)([\x20-\x2c]*[\x40-\x7e])([\s\S]*)/m);if(!a)return s;s.content=a[4];var l=a[2].split(";");if(""!==a[1]||"m"!==a[3])return s;if(!r)return s;var c=this;for(c.decoration=null;l.length>0;){var u=l.shift(),d=parseInt(u);if(isNaN(d)||0===d)c.fg=c.bg=c.decoration=null;else if(1===d)c.decoration="bold";else if(2===d)c.decoration="dim";else if(3==d)c.decoration="italic";else if(4==d)c.decoration="underline";else if(5==d)c.decoration="blink";else if(7===d)c.decoration="reverse";else if(8===d)c.decoration="hidden";else if(9===d)c.decoration="strikethrough";else if(39==d)c.fg=null;else if(49==d)c.bg=null;else if(d>=30&&d<38)c.fg=t[0][d%10][o];else if(d>=90&&d<98)c.fg=t[1][d%10][o];else if(d>=40&&d<48)c.bg=t[0][d%10][o];else if(d>=100&&d<108)c.bg=t[1][d%10][o];else if(38===d||48===d){var p=38===d;if(l.length>=1){var h=l.shift();if("5"===h&&l.length>=1){var f=parseInt(l.shift());if(f>=0&&f<=255)if(i){var m=f>=16?"ansi-palette-"+f:t[f>7?1:0][f%8].class;p?c.fg=m:c.bg=m}else this.PALETTE_COLORS||c.setupPalette(),p?c.fg=this.PALETTE_COLORS[f]:c.bg=this.PALETTE_COLORS[f]}else if("2"===h&&l.length>=3){var g=parseInt(l.shift()),x=parseInt(l.shift()),v=parseInt(l.shift());if(g>=0&&g<=255&&x>=0&&x<=255&&v>=0&&v<=255){var y=g+", "+x+", "+v;i?p?(c.fg="ansi-truecolor",c.fg_truecolor=y):(c.bg="ansi-truecolor",c.bg_truecolor=y):p?c.fg=y:c.bg=y}}}}}if(null===c.fg&&null===c.bg&&null===c.decoration)return s;return s.fg=c.fg,s.bg=c.bg,s.fg_truecolor=c.fg_truecolor,s.bg_truecolor=c.bg_truecolor,s.decoration=c.decoration,s.was_processed=!0,s}},{key:"processChunk",value:function(e,n,t){var r=this;n=n||{};var i=this.processChunkJson(e,n,t);if(n.json)return i;if(i.isEmpty())return"";if(!i.was_processed)return i.content;var o=n.use_classes,s=[],a=[],l={},c=function(e){var n=[],t=void 0;for(t in e)e.hasOwnProperty(t)&&n.push("data-"+t+'="'+r.escapeForHtml(e[t])+'"');return n.length>0?" "+n.join(" "):""};return i.fg&&(o?(a.push(i.fg+"-fg"),null!==i.fg_truecolor&&(l["ansi-truecolor-fg"]=i.fg_truecolor,i.fg_truecolor=null)):s.push("color:rgb("+i.fg+")")),i.bg&&(o?(a.push(i.bg+"-bg"),null!==i.bg_truecolor&&(l["ansi-truecolor-bg"]=i.bg_truecolor,i.bg_truecolor=null)):s.push("background-color:rgb("+i.bg+")")),i.decoration&&(o?a.push("ansi-"+i.decoration):"bold"===i.decoration?s.push("font-weight:bold"):"dim"===i.decoration?s.push("opacity:0.5"):"italic"===i.decoration?s.push("font-style:italic"):"reverse"===i.decoration?s.push("filter:invert(100%)"):"hidden"===i.decoration?s.push("visibility:hidden"):"strikethrough"===i.decoration?s.push("text-decoration:line-through"):s.push("text-decoration:"+i.decoration)),o?'<span class="'+a.join(" ")+'"'+c(l)+">"+i.content+"</span>":'<span style="'+s.join(";")+'"'+c(l)+">"+i.content+"</span>"}}]),e}();e.exports=r},65502:function(e,n,t){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n};Object.defineProperty(n,"__esModule",{value:!0});var o=r(t(60453)),s=t(76267),a=i(t(325)),l=/(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/;function c(e,n,t,r){var i=n?null:function(e){var n={};return e.bg&&(n.backgroundColor="rgb(".concat(e.bg,")")),e.fg&&(n.color="rgb(".concat(e.fg,")")),n}(t),o=n?function(e){var n="";return e.bg||e.fg?(e.bg&&(n+=e.bg+" "),e.fg&&(n+=e.fg+" "),n=n.substring(0,n.length-1)):null}(t):null;if(!e)return a.createElement("span",{style:i,key:r,className:o},t.content);var s=t.content.split(/(\s+)/).reduce((function(e,n,t){return t%2===1?(e.push(n),e):l.test(n)?(e.push(a.createElement("a",{key:t,href:n,target:"_blank"},"".concat(n))),e):(e.push(n),e)}),[]);return a.createElement("span",{style:i,key:r,className:o},s)}n.default=function(e){var n=e.className,t=e.useClasses,r=e.children,i=e.linkify;return a.createElement("code",{className:n},function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e=s.escapeCarriageReturn(e),o.default.ansiToJson(e,{json:!0,remove_empty:!0,use_classes:n})}(r,!!t).map(c.bind(null,i,!!t)))}},76267:function(e){function n(e){if(!e)return"";if(!/\r/.test(e))return e;for(e=e.replace(/\r+\n/gm,"\n");/\r[^$]/.test(e);){var n=/^(.*)\r+/m.exec(e)[1],t=/\r+(.*)$/m.exec(e)[1];t+=n.slice(t.length,n.length),e=e.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,t)}return e}function t(e){for(var n=0,t=0;t<e.length;t++)e[n].length<=e[t].length&&(n=t);return n}function r(e){if(!/\r/.test(e))return e;for(var n=e.split("\r"),r=[];n.length>0;){var i=t(n);r.push(n[i]),n=n.slice(i+1)}return r.join("\r")}e.exports=n,e.exports.escapeCarriageReturn=n,e.exports.escapeCarriageReturnSafe=function(e){if(!e)return"";if(!/\r/.test(e))return e;if(!/\n/.test(e))return r(e);var t=(e=e.replace(/\r+\n/gm,"\n")).lastIndexOf("\n");return n(e.slice(0,t))+"\n"+r(e.slice(t+1))}},72844:function(e,n,t){var r=t(43615),i=t(78408);e.exports=function(e,n,t){var o=!0,s=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return i(t)&&(o="leading"in t?!!t.leading:o,s="trailing"in t?!!t.trailing:s),r(e,n,{leading:o,maxWait:n,trailing:s})}}}]);
//# sourceMappingURL=825.4d22d579.chunk.js.map