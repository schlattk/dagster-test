{"version":3,"file":"static/js/825.4d22d579.chunk.js","mappings":"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","sources":["../../core/src/assets/AssetPageHeader.tsx","../../core/src/assets/AssetDefinedInMultipleReposNotice.tsx","../../core/src/assets/AssetNodeList.tsx","../../core/src/assets/AssetNodeDefinition.tsx","../../core/src/assets/AssetNodeInstigatorTag.tsx","../../core/src/assets/AssetNodeLineageGraph.tsx","../../core/src/assets/AssetNodeLineage.tsx","../../core/src/assets/AssetView.tsx","../../core/src/runs/LogsToolbar.tsx","../../core/src/assets/AssetsCatalogRoot.tsx","../../core/src/runs/ComputeLogContent.tsx","../../core/src/runs/useComputeLogs.tsx","../../core/src/runs/ComputeLogPanel.tsx","../../core/src/runs/LogsProvider.tsx","../../core/src/ui/formatters.tsx","../../core/src/runs/ExecutionStateDot.tsx","../../core/src/runs/LogsFilterInput.tsx","../../ui/src/components/useSuggestionsForString.tsx","../../core/src/runs/useJobReExecution.tsx","../../core/src/runs/useQueryPersistedLogFilter.ts","../../core/src/runs/Run.tsx","../../core/src/hooks/useFavicon.tsx","../../core/src/runs/RunRoot.tsx","../../core/src/instance/useCanSeeConfig.tsx","../../core/src/runs/AllScheduledTicks.tsx","../../core/src/runs/RunsRoot.tsx","../../core/src/snapshots/SnapshotNav.tsx","../../core/src/snapshots/SnapshotRoot.tsx","../../core/src/instance/InstanceTabs.tsx","../../core/src/instance/InstanceBackfills.tsx","../../core/src/instance/InstanceConfig.tsx","../../core/src/instance/InstanceHealthPage.tsx","../../core/src/runs/RunStatusPez.tsx","../../core/src/instance/NextTick.tsx","../../core/src/runs/batchRunsForTimeline.tsx","../../core/src/runs/RunTimeline.tsx","../../core/src/instance/JobMenu.tsx","../../core/src/instance/RepoFilterButton.tsx","../../core/src/instance/InstanceOverviewPage.tsx","../../core/src/instance/InstanceSchedules.tsx","../../core/src/instance/InstanceSensors.tsx","../../core/src/instance/InstanceStatusRoot.tsx","../../core/src/instance/InstanceRoot.tsx","../../../node_modules/anser/lib/index.js","../../../node_modules/ansi-to-react/lib/index.js","../../../node_modules/escape-carriage/index.js","../../../node_modules/lodash/throttle.js"],"sourcesContent":["// eslint-disable-next-line no-restricted-imports\nimport {BreadcrumbProps, Breadcrumbs} from '@blueprintjs/core';\nimport {Box, Colors, PageHeader, Heading} from '@dagster-io/ui';\nimport React from 'react';\nimport {Link} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\ntype Props = {assetKey: {path: string[]}} & Partial<React.ComponentProps<typeof PageHeader>>;\n\nexport const AssetPageHeader: React.FC<Props> = ({assetKey, ...extra}) => {\n  const breadcrumbs = React.useMemo(() => {\n    const list: BreadcrumbProps[] = [{text: 'Assets', href: '/instance/assets'}];\n\n    assetKey.path.reduce((accum: string, elem: string) => {\n      const href = `${accum}/${encodeURIComponent(elem)}`;\n      list.push({text: elem, href});\n      return href;\n    }, '/instance/assets');\n\n    return list;\n  }, [assetKey.path]);\n\n  return (\n    <PageHeader\n      title={\n        <Box\n          flex={{alignItems: 'center', gap: 4}}\n          style={{maxWidth: '600px', overflow: 'hidden', marginBottom: 4}}\n        >\n          <BreadcrumbsWithSlashes\n            items={breadcrumbs}\n            currentBreadcrumbRenderer={({text}) => <Heading>{text}</Heading>}\n            breadcrumbRenderer={({text, href}) => (\n              <Heading>\n                <BreadcrumbLink to={href || '#'}>{text}</BreadcrumbLink>\n              </Heading>\n            )}\n          />\n        </Box>\n      }\n      {...extra}\n    />\n  );\n};\n\nconst BreadcrumbsWithSlashes = styled(Breadcrumbs)`\n  & li:not(:first-child)::after {\n    background: none;\n    font-size: 20px;\n    font-weight: bold;\n    color: #5c7080;\n    content: '/';\n    width: 8px;\n    line-height: 16px;\n  }\n`;\nconst BreadcrumbLink = styled(Link)`\n  color: ${Colors.Gray800};\n\n  :hover,\n  :active {\n    color: ${Colors.Gray800};\n  }\n`;\n","import {gql, useQuery} from '@apollo/client';\nimport {Alert, Box, Colors} from '@dagster-io/ui';\nimport React from 'react';\n\nimport {buildRepoPath} from '../workspace/buildRepoAddress';\nimport {RepoAddress} from '../workspace/types';\n\nimport {AssetIdScanQuery} from './types/AssetIdScanQuery';\n\nexport const AssetDefinedInMultipleReposNotice: React.FC<{\n  assetId: string;\n  loadedFromRepo: RepoAddress;\n}> = ({assetId, loadedFromRepo}) => {\n  const {data} = useQuery<AssetIdScanQuery>(ASSET_ID_SCAN_QUERY);\n  const otherRepos =\n    data?.repositoriesOrError.__typename === 'RepositoryConnection'\n      ? data.repositoriesOrError.nodes.filter(\n          (r) => r.name !== loadedFromRepo.name || r.location.name !== loadedFromRepo.location,\n        )\n      : [];\n\n  const otherReposWithAsset = otherRepos.filter((r) =>\n    r.assetNodes.some((a) => a.id === assetId && a.opNames.length),\n  );\n\n  if (otherReposWithAsset.length === 0) {\n    return <span />;\n  }\n\n  return (\n    <Box\n      padding={{vertical: 16, left: 24, right: 12}}\n      border={{side: 'bottom', width: 1, color: Colors.KeylineGray}}\n    >\n      <Alert\n        intent=\"info\"\n        title={`Multiple repositories in your workspace include assets with this name. Showing the definition from ${buildRepoPath(\n          loadedFromRepo.name,\n          loadedFromRepo.location,\n        )} below. (Also found in ${otherReposWithAsset\n          .map((o) => buildRepoPath(o.name, o.location.name))\n          .join(', ')}). You may want to consider renaming to avoid collisions.`}\n      />\n    </Box>\n  );\n};\n\nconst ASSET_ID_SCAN_QUERY = gql`\n  query AssetIdScanQuery {\n    repositoriesOrError {\n      __typename\n      ... on RepositoryConnection {\n        nodes {\n          id\n          name\n          location {\n            id\n            name\n          }\n          assetNodes {\n            id\n            opNames\n          }\n        }\n      }\n    }\n  }\n`;\n","import {Box, Spinner} from '@dagster-io/ui';\nimport React from 'react';\nimport {useHistory} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport {AssetNode} from '../asset-graph/AssetNode';\nimport {LiveData, toGraphId} from '../asset-graph/Utils';\nimport {AssetGraphQuery_assetNodes} from '../asset-graph/types/AssetGraphQuery';\n\nimport {assetDetailsPathForKey} from './assetDetailsPathForKey';\n\nexport const AssetNodeList: React.FC<{\n  items: AssetGraphQuery_assetNodes[] | null;\n  liveDataByNode: LiveData;\n}> = ({items, liveDataByNode}) => {\n  const history = useHistory();\n\n  if (items === null) {\n    return (\n      <Container flex={{alignItems: 'center', justifyContent: 'center'}}>\n        <Spinner purpose=\"section\" />\n      </Container>\n    );\n  }\n\n  return (\n    <Container flex={{gap: 4}} padding={{horizontal: 12}}>\n      {items.map((asset) => (\n        <AssetNodeWrapper\n          key={asset.id}\n          onClick={(e) => {\n            e.stopPropagation();\n            history.push(assetDetailsPathForKey(asset.assetKey, {view: 'definition'}));\n          }}\n        >\n          <AssetNode\n            definition={asset}\n            inAssetCatalog\n            selected={false}\n            liveData={liveDataByNode[toGraphId(asset.assetKey)]}\n          />\n        </AssetNodeWrapper>\n      ))}\n    </Container>\n  );\n};\n\nconst Container = styled(Box)`\n  height: 144px;\n  overflow-x: auto;\n  width: 100%;\n  white-space: nowrap;\n`;\n\nconst AssetNodeWrapper = styled.div`\n  cursor: pointer;\n  width: 240px;\n  flex-shrink: 0;\n`;\n","import {gql} from '@apollo/client';\nimport {Box, Colors, Icon, Caption, Subheading, Mono, ConfigTypeSchema} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\n\nimport {ASSET_NODE_FRAGMENT} from '../asset-graph/AssetNode';\nimport {\n  displayNameForAssetKey,\n  isSourceAsset,\n  LiveData,\n  isHiddenAssetGroupJob,\n  __ASSET_JOB_PREFIX,\n} from '../asset-graph/Utils';\nimport {AssetGraphQuery_assetNodes} from '../asset-graph/types/AssetGraphQuery';\nimport {DagsterTypeSummary} from '../dagstertype/DagsterType';\nimport {Description} from '../pipelines/Description';\nimport {PipelineReference} from '../pipelines/PipelineReference';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\nimport {RepoAddress} from '../workspace/types';\nimport {workspacePathFromAddress} from '../workspace/workspacePath';\n\nimport {ASSET_NODE_CONFIG_FRAGMENT, configSchemaForAssetNode} from './AssetConfig';\nimport {AssetDefinedInMultipleReposNotice} from './AssetDefinedInMultipleReposNotice';\nimport {\n  AssetMetadataTable,\n  ASSET_NODE_OP_METADATA_FRAGMENT,\n  metadataForAssetNode,\n} from './AssetMetadata';\nimport {AssetNodeList} from './AssetNodeList';\nimport {PartitionHealthSummary, usePartitionHealthData} from './PartitionHealthSummary';\nimport {AssetNodeDefinitionFragment} from './types/AssetNodeDefinitionFragment';\n\nexport const AssetNodeDefinition: React.FC<{\n  assetNode: AssetNodeDefinitionFragment;\n  upstream: AssetGraphQuery_assetNodes[] | null;\n  downstream: AssetGraphQuery_assetNodes[] | null;\n  liveDataByNode: LiveData;\n}> = ({assetNode, upstream, downstream, liveDataByNode}) => {\n  const partitionHealthData = usePartitionHealthData([assetNode.assetKey]);\n  const {assetMetadata, assetType} = metadataForAssetNode(assetNode);\n\n  const assetConfigSchema = configSchemaForAssetNode(assetNode);\n  const repoAddress = buildRepoAddress(\n    assetNode.repository.name,\n    assetNode.repository.location.name,\n  );\n\n  return (\n    <>\n      <AssetDefinedInMultipleReposNotice assetId={assetNode.id} loadedFromRepo={repoAddress} />\n      <Box flex={{direction: 'row'}} style={{flex: 1}}>\n        <Box\n          style={{flex: 1, minWidth: 0}}\n          flex={{direction: 'column'}}\n          border={{side: 'right', width: 1, color: Colors.KeylineGray}}\n        >\n          <Box\n            padding={{vertical: 16, horizontal: 24}}\n            border={{side: 'bottom', width: 1, color: Colors.KeylineGray}}\n            flex={{justifyContent: 'space-between', gap: 8}}\n          >\n            <Subheading>Description</Subheading>\n            <DefinitionLocation assetNode={assetNode} repoAddress={repoAddress} />\n          </Box>\n          <Box\n            padding={{vertical: 16, horizontal: 24}}\n            style={{flex: 1, flexBasis: 'content', flexGrow: 0, minHeight: 120}}\n          >\n            <Description\n              description={assetNode.description || 'No description provided.'}\n              maxHeight={260}\n            />\n          </Box>\n          {assetNode.partitionDefinition && (\n            <>\n              <Box\n                padding={{vertical: 16, horizontal: 24}}\n                border={{side: 'horizontal', width: 1, color: Colors.KeylineGray}}\n                flex={{justifyContent: 'space-between', gap: 8}}\n              >\n                <Subheading>Partitions</Subheading>\n              </Box>\n              <Box\n                padding={{top: 16, horizontal: 24, bottom: 24}}\n                flex={{direction: 'column', gap: 16}}\n              >\n                <p>{assetNode.partitionDefinition}</p>\n                <PartitionHealthSummary assetKey={assetNode.assetKey} data={partitionHealthData} />\n              </Box>\n            </>\n          )}\n\n          <Box\n            padding={{vertical: 16, horizontal: 24}}\n            border={{side: 'horizontal', width: 1, color: Colors.KeylineGray}}\n            flex={{justifyContent: 'space-between', gap: 8}}\n          >\n            <Subheading>\n              Upstream Assets{upstream?.length ? ` (${upstream.length})` : ''}\n            </Subheading>\n            <Link to=\"?view=lineage&lineageScope=upstream\">\n              <Box flex={{gap: 4, alignItems: 'center'}}>\n                View upstream graph\n                <Icon name=\"open_in_new\" color={Colors.Link} />\n              </Box>\n            </Link>\n          </Box>\n          <AssetNodeList items={upstream} liveDataByNode={liveDataByNode} />\n          <Box\n            padding={{vertical: 16, horizontal: 24}}\n            border={{side: 'horizontal', width: 1, color: Colors.KeylineGray}}\n            flex={{justifyContent: 'space-between', gap: 8}}\n          >\n            <Subheading>\n              Downstream Assets{downstream?.length ? ` (${downstream.length})` : ''}\n            </Subheading>\n            <Link to=\"?view=lineage&lineageScope=downstream\">\n              <Box flex={{gap: 4, alignItems: 'center'}}>\n                View downstream graph\n                <Icon name=\"open_in_new\" color={Colors.Link} />\n              </Box>\n            </Link>\n          </Box>\n          <AssetNodeList items={downstream} liveDataByNode={liveDataByNode} />\n          {/** Ensures the line between the left and right columns goes to the bottom of the page */}\n          <div style={{flex: 1}} />\n        </Box>\n        {assetConfigSchema ? (\n          <Box\n            border={{side: 'vertical', width: 1, color: Colors.KeylineGray}}\n            style={{flex: 0.5, minWidth: 0}}\n            flex={{direction: 'column'}}\n          >\n            <Box\n              padding={{vertical: 16, horizontal: 24}}\n              border={{side: 'bottom', width: 1, color: Colors.KeylineGray}}\n            >\n              <Subheading>Config</Subheading>\n            </Box>\n            <Box padding={{vertical: 16, horizontal: 24}}>\n              <ConfigTypeSchema\n                type={assetConfigSchema}\n                typesInScope={assetConfigSchema.recursiveConfigTypes}\n              />\n            </Box>\n          </Box>\n        ) : null}\n\n        <Box style={{flex: 0.5, minWidth: 0}} flex={{direction: 'column'}}>\n          <Box\n            padding={{vertical: 16, horizontal: 24}}\n            border={{side: 'bottom', width: 1, color: Colors.KeylineGray}}\n          >\n            <Subheading>Type</Subheading>\n          </Box>\n          {assetType ? (\n            <DagsterTypeSummary type={assetType} />\n          ) : (\n            <Box padding={{vertical: 16, horizontal: 24}}>\n              <Description description=\"No type data provided.\" />\n            </Box>\n          )}\n          {assetMetadata.length > 0 && (\n            <>\n              <Box\n                padding={{vertical: 16, horizontal: 24}}\n                border={{side: 'horizontal', width: 1, color: Colors.KeylineGray}}\n                flex={{justifyContent: 'space-between', gap: 8}}\n              >\n                <Subheading>Metadata</Subheading>\n              </Box>\n              <Box style={{flex: 1}}>\n                <AssetMetadataTable assetMetadata={assetMetadata} />\n              </Box>\n            </>\n          )}\n        </Box>\n      </Box>\n    </>\n  );\n};\n\nconst DefinitionLocation: React.FC<{\n  assetNode: AssetNodeDefinitionFragment;\n  repoAddress: RepoAddress;\n}> = ({assetNode, repoAddress}) => (\n  <Box flex={{alignItems: 'baseline', gap: 16, wrap: 'wrap'}} style={{lineHeight: 0}}>\n    {assetNode.jobNames\n      .filter((jobName) => !isHiddenAssetGroupJob(jobName))\n      .map((jobName) => (\n        <Mono key={jobName}>\n          <PipelineReference\n            isJob\n            showIcon\n            pipelineName={jobName}\n            pipelineHrefContext={repoAddress}\n          />\n        </Mono>\n      ))}\n    <OpNamesDisplay assetNode={assetNode} repoAddress={repoAddress} />\n    {isSourceAsset(assetNode) && (\n      <Caption style={{lineHeight: '16px', marginTop: 2}}>Source Asset</Caption>\n    )}\n  </Box>\n);\n\nconst OpNamesDisplay = (props: {\n  assetNode: AssetNodeDefinitionFragment;\n  repoAddress: RepoAddress;\n}) => {\n  const {assetNode, repoAddress} = props;\n  const {assetKey, graphName, opNames, jobNames} = assetNode;\n  const opCount = opNames.length;\n\n  if (!opCount) {\n    return null;\n  }\n\n  if (!graphName) {\n    const firstOp = opNames[0];\n    if (displayNameForAssetKey(assetKey) === firstOp) {\n      return null;\n    }\n    const opPath = workspacePathFromAddress(repoAddress, `/ops/${firstOp}`);\n    return (\n      <Box flex={{gap: 4, alignItems: 'center'}}>\n        <Icon name=\"op\" size={16} />\n        <Mono>\n          <Link to={opPath}>{firstOp}</Link>\n        </Mono>\n      </Box>\n    );\n  }\n\n  if (!jobNames.length) {\n    return null;\n  }\n\n  return (\n    <Box flex={{gap: 4, alignItems: 'center'}}>\n      <Icon name=\"schema\" size={16} />\n      <Mono>\n        <Link to={workspacePathFromAddress(repoAddress, `/graphs/${jobNames[0]}/${graphName}/`)}>\n          {graphName}\n        </Link>\n        {` (${opCount === 1 ? '1 op' : `${opCount} ops`})`}\n      </Mono>\n    </Box>\n  );\n};\n\nexport const ASSET_NODE_DEFINITION_FRAGMENT = gql`\n  fragment AssetNodeDefinitionFragment on AssetNode {\n    id\n    ...AssetNodeConfigFragment\n    description\n    graphName\n    opNames\n    jobNames\n    partitionDefinition\n    repository {\n      id\n      name\n      location {\n        id\n        name\n      }\n    }\n    ...AssetNodeFragment\n    ...AssetNodeOpMetadataFragment\n  }\n  ${ASSET_NODE_CONFIG_FRAGMENT}\n  ${ASSET_NODE_FRAGMENT}\n  ${ASSET_NODE_OP_METADATA_FRAGMENT}\n`;\n","import {gql} from '@apollo/client';\nimport flatMap from 'lodash/flatMap';\nimport React from 'react';\n\nimport {ScheduleOrSensorTag} from '../nav/ScheduleOrSensorTag';\nimport {SCHEDULE_SWITCH_FRAGMENT} from '../schedules/ScheduleSwitch';\nimport {SENSOR_SWITCH_FRAGMENT} from '../sensors/SensorSwitch';\nimport {RepoAddress} from '../workspace/types';\n\nimport {AssetNodeInstigatorsFragment} from './types/AssetNodeInstigatorsFragment';\n\nexport const AssetNodeInstigatorTag: React.FC<{\n  assetNode: AssetNodeInstigatorsFragment;\n  repoAddress: RepoAddress;\n}> = ({assetNode, repoAddress}) => {\n  const schedules = flatMap(assetNode.jobs, (j) => j.schedules);\n  const sensors = flatMap(assetNode.jobs, (j) => j.sensors);\n\n  return (\n    <ScheduleOrSensorTag\n      repoAddress={repoAddress}\n      schedules={schedules}\n      sensors={sensors}\n      showSwitch={false}\n    />\n  );\n};\n\nexport const ASSET_NODE_INSTIGATORS_FRAGMENT = gql`\n  fragment AssetNodeInstigatorsFragment on AssetNode {\n    id\n    jobs {\n      id\n      name\n      schedules {\n        id\n        __typename\n        ...ScheduleSwitchFragment\n      }\n      sensors {\n        id\n        __typename\n        ...SensorSwitchFragment\n      }\n    }\n  }\n  ${SCHEDULE_SWITCH_FRAGMENT}\n  ${SENSOR_SWITCH_FRAGMENT}\n`;\n","import {Box, Spinner} from '@dagster-io/ui';\nimport React from 'react';\nimport {useHistory} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport {AssetConnectedEdges} from '../asset-graph/AssetEdges';\nimport {EXPERIMENTAL_MINI_SCALE} from '../asset-graph/AssetGraphExplorer';\nimport {AssetNodeMinimal, AssetNode} from '../asset-graph/AssetNode';\nimport {ForeignNode} from '../asset-graph/ForeignNode';\nimport {GraphData, LiveData, toGraphId} from '../asset-graph/Utils';\nimport {SVGViewport} from '../graph/SVGViewport';\nimport {useAssetLayout} from '../graph/asyncGraphLayout';\nimport {getJSONForKey} from '../hooks/useStateWithStorage';\n\nimport {AssetViewParams} from './AssetView';\nimport {assetDetailsPathForKey} from './assetDetailsPathForKey';\nimport {AssetKey} from './types';\nimport {AssetNodeDefinitionFragment} from './types/AssetNodeDefinitionFragment';\n\nconst LINEAGE_GRAPH_ZOOM_LEVEL = 'lineageGraphZoomLevel';\n\nexport type AssetLineageScope = 'neighbors' | 'upstream' | 'downstream';\n\nexport const AssetNodeLineageGraph: React.FC<{\n  assetNode: AssetNodeDefinitionFragment;\n  assetGraphData: GraphData;\n  liveDataByNode: LiveData;\n  params: AssetViewParams;\n}> = ({assetNode, assetGraphData, liveDataByNode, params}) => {\n  const assetGraphId = toGraphId(assetNode.assetKey);\n\n  const [highlighted, setHighlighted] = React.useState<string | null>(null);\n\n  const {layout, loading} = useAssetLayout(assetGraphData);\n  const viewportEl = React.useRef<SVGViewport>();\n  const history = useHistory();\n\n  const onClickAsset = (key: AssetKey) => {\n    history.push(assetDetailsPathForKey(key, {...params, lineageScope: 'neighbors'}));\n  };\n\n  React.useEffect(() => {\n    if (viewportEl.current && layout) {\n      const lastZoomLevel = Number(getJSONForKey(LINEAGE_GRAPH_ZOOM_LEVEL));\n      viewportEl.current.autocenter(false, lastZoomLevel);\n      viewportEl.current.focus();\n    }\n  }, [viewportEl, layout, assetGraphId]);\n\n  if (!layout || loading) {\n    return (\n      <Box style={{flex: 1}} flex={{alignItems: 'center', justifyContent: 'center'}}>\n        <Spinner purpose=\"page\" />\n      </Box>\n    );\n  }\n\n  return (\n    <SVGViewport\n      ref={(r) => (viewportEl.current = r || undefined)}\n      interactor={SVGViewport.Interactors.PanAndZoom}\n      graphWidth={layout.width}\n      graphHeight={layout.height}\n      onDoubleClick={(e) => {\n        viewportEl.current?.autocenter(true);\n        e.stopPropagation();\n      }}\n      maxZoom={1.2}\n      maxAutocenterZoom={1.2}\n    >\n      {({scale}) => (\n        <SVGContainer width={layout.width} height={layout.height}>\n          {viewportEl.current && <SVGSaveZoomLevel scale={scale} />}\n          <AssetConnectedEdges highlighted={highlighted} edges={layout.edges} />\n\n          {Object.values(layout.nodes).map(({id, bounds}) => {\n            const graphNode = assetGraphData.nodes[id];\n            const path = JSON.parse(id);\n\n            return (\n              <foreignObject\n                {...bounds}\n                key={id}\n                style={{overflow: 'visible'}}\n                onMouseEnter={() => setHighlighted(id)}\n                onMouseLeave={() => setHighlighted(null)}\n                onClick={() => onClickAsset({path})}\n                onDoubleClick={(e) => {\n                  viewportEl.current?.zoomToSVGBox(bounds, true, 1.2);\n                  e.stopPropagation();\n                }}\n              >\n                {!graphNode || !graphNode.definition.opNames.length ? (\n                  <ForeignNode assetKey={{path}} />\n                ) : scale < EXPERIMENTAL_MINI_SCALE ? (\n                  <AssetNodeMinimal\n                    definition={graphNode.definition}\n                    selected={graphNode.id === assetGraphId}\n                  />\n                ) : (\n                  <AssetNode\n                    definition={graphNode.definition}\n                    liveData={liveDataByNode[graphNode.id]}\n                    selected={graphNode.id === assetGraphId}\n                  />\n                )}\n              </foreignObject>\n            );\n          })}\n        </SVGContainer>\n      )}\n    </SVGViewport>\n  );\n};\n\nconst SVGSaveZoomLevel = ({scale}: {scale: number}) => {\n  React.useEffect(() => {\n    try {\n      window.localStorage.setItem(LINEAGE_GRAPH_ZOOM_LEVEL, JSON.stringify(scale));\n    } catch (err) {\n      // no-op\n    }\n  }, [scale]);\n  return <></>;\n};\n\nconst SVGContainer = styled.svg`\n  overflow: visible;\n  border-radius: 0;\n`;\n","import {Box, Button, ButtonGroup, Checkbox, Colors, Icon} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {GraphData, LiveData} from '../asset-graph/Utils';\n\nimport {AssetLineageScope, AssetNodeLineageGraph} from './AssetNodeLineageGraph';\nimport {AssetViewParams} from './AssetView';\nimport {LaunchAssetExecutionButton} from './LaunchAssetExecutionButton';\nimport {AssetNodeDefinitionFragment} from './types/AssetNodeDefinitionFragment';\n\nexport const AssetNodeLineage: React.FC<{\n  params: AssetViewParams;\n  setParams: (params: AssetViewParams) => void;\n  assetNode: AssetNodeDefinitionFragment;\n  assetGraphData: GraphData;\n  liveDataByNode: LiveData;\n}> = ({params, setParams, assetNode, liveDataByNode, assetGraphData}) => {\n  return (\n    <>\n      <Box\n        flex={{justifyContent: 'space-between', alignItems: 'center', gap: 12}}\n        padding={{left: 24, right: 12, vertical: 12}}\n        border={{side: 'bottom', color: Colors.KeylineGray, width: 1}}\n      >\n        <ButtonGroup<AssetLineageScope>\n          activeItems={new Set([params.lineageScope || 'neighbors'])}\n          buttons={[\n            {id: 'neighbors', label: 'Nearest Neighbors', icon: 'graph_neighbors'},\n            {id: 'upstream', label: 'Upstream', icon: 'graph_upstream'},\n            {id: 'downstream', label: 'Downstream', icon: 'graph_downstream'},\n          ]}\n          onClick={(lineageScope) => setParams({...params, lineageScope})}\n        />\n        <Checkbox\n          format=\"switch\"\n          label=\"Show secondary edges\"\n          checked={!!params.lineageShowSecondaryEdges}\n          onChange={() =>\n            setParams({\n              ...params,\n              lineageShowSecondaryEdges: params.lineageShowSecondaryEdges ? undefined : true,\n            })\n          }\n        />\n        <div style={{flex: 1}} />\n        {Object.values(assetGraphData.nodes).length > 1 ? (\n          <LaunchAssetExecutionButton\n            assetKeys={Object.values(assetGraphData.nodes).map((n) => n.assetKey)}\n            liveDataByNode={liveDataByNode}\n            intent=\"none\"\n            context=\"all\"\n          />\n        ) : (\n          <Button icon={<Icon name=\"materialization\" />} disabled>\n            Materialize all\n          </Button>\n        )}\n      </Box>\n      <AssetNodeLineageGraph\n        assetNode={assetNode}\n        liveDataByNode={liveDataByNode}\n        assetGraphData={assetGraphData}\n        params={params}\n      />\n    </>\n  );\n};\n","import {gql, useQuery} from '@apollo/client';\nimport {\n  Alert,\n  BaseTag,\n  Box,\n  ButtonLink,\n  Colors,\n  NonIdealState,\n  Spinner,\n  Tab,\n  Tabs,\n  Tag,\n} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\n\nimport {\n  FIFTEEN_SECONDS,\n  QueryRefreshCountdown,\n  useMergedRefresh,\n  useQueryRefreshAtInterval,\n} from '../app/QueryRefresh';\nimport {Timestamp} from '../app/time/Timestamp';\nimport {GraphData, toGraphId, tokenForAssetKey} from '../asset-graph/Utils';\nimport {useAssetGraphData} from '../asset-graph/useAssetGraphData';\nimport {useLiveDataForAssetKeys} from '../asset-graph/useLiveDataForAssetKeys';\nimport {useQueryPersistedState} from '../hooks/useQueryPersistedState';\nimport {RepositoryLink} from '../nav/RepositoryLink';\nimport {useDidLaunchEvent} from '../runs/RunUtils';\nimport {AssetComputeStatus} from '../types/globalTypes';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\nimport {workspacePathFromAddress} from '../workspace/workspacePath';\n\nimport {AssetEvents} from './AssetEvents';\nimport {AssetNodeDefinition, ASSET_NODE_DEFINITION_FRAGMENT} from './AssetNodeDefinition';\nimport {AssetNodeInstigatorTag, ASSET_NODE_INSTIGATORS_FRAGMENT} from './AssetNodeInstigatorTag';\nimport {AssetNodeLineage} from './AssetNodeLineage';\nimport {AssetLineageScope} from './AssetNodeLineageGraph';\nimport {AssetPageHeader} from './AssetPageHeader';\nimport {LaunchAssetExecutionButton} from './LaunchAssetExecutionButton';\nimport {AssetKey} from './types';\nimport {AssetQuery, AssetQueryVariables} from './types/AssetQuery';\n\ninterface Props {\n  assetKey: AssetKey;\n}\n\nexport interface AssetViewParams {\n  view?: 'activity' | 'definition' | 'lineage';\n  lineageScope?: AssetLineageScope;\n  lineageShowSecondaryEdges?: boolean;\n  partition?: string;\n  time?: string;\n  asOf?: string;\n}\n\nexport const AssetView: React.FC<Props> = ({assetKey}) => {\n  const [params, setParams] = useQueryPersistedState<AssetViewParams>({});\n\n  const queryResult = useQuery<AssetQuery, AssetQueryVariables>(ASSET_QUERY, {\n    variables: {assetKey: {path: assetKey.path}},\n    notifyOnNetworkStatusChange: true,\n  });\n\n  const {assetOrError} = queryResult.data || queryResult.previousData || {};\n  const asset = assetOrError && assetOrError.__typename === 'Asset' ? assetOrError : null;\n  const lastMaterializedAt = asset?.assetMaterializations[0]?.timestamp;\n  const viewingMostRecent = !params.asOf || Number(lastMaterializedAt) <= Number(params.asOf);\n\n  const definition = asset?.definition;\n  const repoAddress = definition\n    ? buildRepoAddress(definition.repository.name, definition.repository.location.name)\n    : null;\n\n  const token = tokenForAssetKey(assetKey);\n  const {assetGraphData, graphAssetKeys} = useAssetGraphData(\n    params.view === 'lineage' && params.lineageScope === 'upstream'\n      ? `*\"${token}\"`\n      : params.view === 'lineage' && params.lineageScope === 'downstream'\n      ? `\"${token}\"*`\n      : `++\"${token}\"++`,\n    {hideEdgesToNodesOutsideQuery: !params.lineageShowSecondaryEdges},\n  );\n\n  const {upstream, downstream} = useNeighborsFromGraph(assetGraphData, assetKey);\n  const {liveResult, liveDataByNode} = useLiveDataForAssetKeys(graphAssetKeys);\n\n  const refreshState = useMergedRefresh(\n    useQueryRefreshAtInterval(queryResult, FIFTEEN_SECONDS),\n    useQueryRefreshAtInterval(liveResult, FIFTEEN_SECONDS),\n  );\n\n  // Refresh immediately when a run is launched from this page\n  useDidLaunchEvent(queryResult.refetch);\n  useDidLaunchEvent(liveResult.refetch);\n\n  // Avoid thrashing the materializations UI (which chooses a different default query based on whether\n  // data is partitioned) by waiting for the definition to be loaded. (null OR a valid definition)\n  const isDefinitionLoaded = definition !== undefined;\n  const isUpstreamChanged =\n    liveDataByNode[toGraphId(assetKey)]?.computeStatus === AssetComputeStatus.OUT_OF_DATE;\n\n  return (\n    <Box flex={{direction: 'column'}} style={{height: '100%', width: '100%', overflowY: 'auto'}}>\n      <AssetPageHeader\n        assetKey={assetKey}\n        tags={\n          <>\n            {repoAddress ? (\n              <Tag icon=\"asset\">\n                Asset in <RepositoryLink repoAddress={repoAddress} />\n              </Tag>\n            ) : (\n              <Tag icon=\"asset_non_sda\">Asset</Tag>\n            )}\n            {definition && repoAddress && (\n              <AssetNodeInstigatorTag assetNode={definition} repoAddress={repoAddress} />\n            )}\n            {definition && repoAddress && definition.groupName && (\n              <Tag icon=\"asset_group\">\n                <Link\n                  to={workspacePathFromAddress(\n                    repoAddress,\n                    `/asset-groups/${definition.groupName}`,\n                  )}\n                >\n                  {definition.groupName}\n                </Link>\n              </Tag>\n            )}\n            {isUpstreamChanged ? (\n              <Box\n                onClick={() => setParams({...params, view: 'lineage', lineageScope: 'upstream'})}\n              >\n                <BaseTag\n                  fillColor={Colors.Yellow50}\n                  textColor={Colors.Yellow700}\n                  label=\"Upstream changed\"\n                  interactive\n                />\n              </Box>\n            ) : undefined}\n          </>\n        }\n        tabs={\n          <Tabs size=\"large\" selectedTabId={params.view || 'activity'}>\n            <Tab\n              id=\"activity\"\n              title=\"Activity\"\n              onClick={() => setParams({...params, view: 'activity'})}\n            />\n            <Tab\n              id=\"definition\"\n              title=\"Definition\"\n              onClick={() => setParams({...params, view: 'definition'})}\n              disabled={!definition}\n            />\n            <Tab\n              id=\"lineage\"\n              title=\"Lineage\"\n              onClick={() => setParams({...params, view: 'lineage'})}\n              disabled={!definition}\n            />\n          </Tabs>\n        }\n        right={\n          <Box style={{margin: '-4px 0'}} flex={{gap: 12, alignItems: 'baseline'}}>\n            <Box margin={{top: 4}}>\n              <QueryRefreshCountdown refreshState={refreshState} />\n            </Box>\n            {definition && definition.jobNames.length > 0 && repoAddress && upstream && (\n              <LaunchAssetExecutionButton\n                assetKeys={[definition.assetKey]}\n                liveDataByNode={liveDataByNode}\n              />\n            )}\n          </Box>\n        }\n      />\n\n      <div>\n        {queryResult.loading && !queryResult.previousData ? (\n          <Box\n            style={{height: 390}}\n            flex={{direction: 'row', justifyContent: 'center', alignItems: 'center'}}\n          >\n            <Spinner purpose=\"page\" />\n          </Box>\n        ) : viewingMostRecent ? null : (\n          <Box\n            padding={{vertical: 16, horizontal: 24}}\n            border={{side: 'bottom', width: 1, color: Colors.KeylineGray}}\n          >\n            <HistoricalViewAlert\n              asOf={params.asOf}\n              onClick={() => setParams({asOf: undefined, time: params.asOf})}\n              hasDefinition={!!definition}\n            />\n          </Box>\n        )}\n      </div>\n      {isDefinitionLoaded &&\n        (params.view === 'definition' ? (\n          definition ? (\n            <AssetNodeDefinition\n              assetNode={definition}\n              upstream={upstream}\n              downstream={downstream}\n              liveDataByNode={liveDataByNode}\n            />\n          ) : (\n            <AssetNoDefinitionState />\n          )\n        ) : params.view === 'lineage' ? (\n          definition ? (\n            assetGraphData ? (\n              <AssetNodeLineage\n                params={params}\n                setParams={setParams}\n                assetNode={definition}\n                liveDataByNode={liveDataByNode}\n                assetGraphData={assetGraphData}\n              />\n            ) : (\n              <Box style={{flex: 1}} flex={{alignItems: 'center', justifyContent: 'center'}}>\n                <Spinner purpose=\"page\" />\n              </Box>\n            )\n          ) : (\n            <AssetNoDefinitionState />\n          )\n        ) : (\n          <AssetEvents\n            assetKey={assetKey}\n            assetLastMaterializedAt={lastMaterializedAt}\n            assetHasDefinedPartitions={!!definition?.partitionDefinition}\n            params={params}\n            paramsTimeWindowOnly={!!params.asOf}\n            setParams={setParams}\n            liveData={definition ? liveDataByNode[toGraphId(definition.assetKey)] : undefined}\n          />\n        ))}\n    </Box>\n  );\n};\n\nconst AssetNoDefinitionState = () => (\n  <Box padding={{vertical: 32}}>\n    <NonIdealState\n      title=\"No definition\"\n      description=\"This asset doesn't have a software definition in any of your loaded repositories.\"\n      icon=\"materialization\"\n    />\n  </Box>\n);\n\nfunction useNeighborsFromGraph(graphData: GraphData | null, assetKey: AssetKey) {\n  const graphId = toGraphId(assetKey);\n\n  return React.useMemo(() => {\n    if (!graphData) {\n      return {upstream: null, downstream: null};\n    }\n    return {\n      upstream: Object.values(graphData.nodes)\n        .filter((n) => graphData.upstream[graphId]?.[toGraphId(n.assetKey)])\n        .map((n) => n.definition),\n      downstream: Object.values(graphData.nodes)\n        .filter((n) => graphData.downstream[graphId]?.[toGraphId(n.assetKey)])\n        .map((n) => n.definition),\n    };\n  }, [graphData, graphId]);\n}\n\nconst ASSET_QUERY = gql`\n  query AssetQuery($assetKey: AssetKeyInput!) {\n    assetOrError(assetKey: $assetKey) {\n      ... on Asset {\n        id\n        key {\n          path\n        }\n\n        assetMaterializations(limit: 1) {\n          timestamp\n        }\n\n        definition {\n          id\n          groupName\n          partitionDefinition\n          repository {\n            id\n            name\n            location {\n              id\n              name\n            }\n          }\n\n          ...AssetNodeInstigatorsFragment\n          ...AssetNodeDefinitionFragment\n        }\n      }\n    }\n  }\n  ${ASSET_NODE_INSTIGATORS_FRAGMENT}\n  ${ASSET_NODE_DEFINITION_FRAGMENT}\n`;\n\nconst HistoricalViewAlert: React.FC<{\n  asOf: string | undefined;\n  onClick: () => void;\n  hasDefinition: boolean;\n}> = ({asOf, onClick, hasDefinition}) => (\n  <Alert\n    intent=\"info\"\n    title={\n      <span>\n        This is a historical view of materializations as of{' '}\n        <span style={{fontWeight: 600}}>\n          <Timestamp\n            timestamp={{ms: Number(asOf)}}\n            timeFormat={{showSeconds: true, showTimezone: true}}\n          />\n        </span>\n        .\n      </span>\n    }\n    description={\n      <ButtonLink onClick={onClick} underline=\"always\">\n        {hasDefinition\n          ? 'Show definition and latest materializations'\n          : 'Show latest materializations'}\n      </ButtonLink>\n    }\n  />\n);\n","import {\n  Box,\n  Button,\n  ButtonGroup,\n  Checkbox,\n  Group,\n  IconName,\n  Icon,\n  MenuItem,\n  Select,\n  Spinner,\n  Tab,\n  Tabs,\n  IconWrapper,\n  Colors,\n  Tooltip,\n  FontFamily,\n} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {useCopyToClipboard} from '../app/browser';\nimport {OptionsContainer, OptionsDivider} from '../gantt/VizComponents';\nimport {compactNumber} from '../ui/formatters';\n\nimport {ExecutionStateDot} from './ExecutionStateDot';\nimport {LogLevel} from './LogLevel';\nimport {LogsFilterInput} from './LogsFilterInput';\nimport {LogFilter, LogFilterValue} from './LogsProvider';\nimport {\n  extractLogCaptureStepsFromLegacySteps,\n  ILogCaptureInfo,\n  IRunMetadataDict,\n  IStepState,\n} from './RunMetadataProvider';\nimport {getRunFilterProviders} from './getRunFilterProviders';\n\nexport enum LogType {\n  structured = 'structured',\n  stdout = 'stdout',\n  stderr = 'stderr',\n}\n\ninterface ILogsToolbarProps {\n  steps: string[];\n  metadata: IRunMetadataDict;\n  counts: LogLevelCounts;\n\n  filter: LogFilter;\n  onSetFilter: (filter: LogFilter) => void;\n  logType: LogType;\n  onSetLogType: (logType: LogType) => void;\n  computeLogKey?: string;\n  onSetComputeLogKey: (key: string) => void;\n  computeLogUrl: string | null;\n}\n\nconst logQueryToString = (logQuery: LogFilterValue[]) =>\n  logQuery.map(({token, value}) => (token ? `${token}:${value}` : value)).join(' ');\n\nexport const LogsToolbar: React.FC<ILogsToolbarProps> = (props) => {\n  const {\n    steps,\n    metadata,\n    counts,\n    filter,\n    onSetFilter,\n    logType,\n    onSetLogType,\n    computeLogKey,\n    onSetComputeLogKey,\n    computeLogUrl,\n  } = props;\n\n  const activeItems = React.useMemo(\n    () => new Set([logType === LogType.structured ? logType : LogType.stdout]),\n    [logType],\n  );\n\n  return (\n    <OptionsContainer>\n      <ButtonGroup\n        activeItems={activeItems}\n        buttons={[\n          {id: LogType.structured, icon: 'list', tooltip: 'Structured event logs'},\n          {id: LogType.stdout, icon: 'wysiwyg', tooltip: 'Raw compute logs'},\n        ]}\n        onClick={(id) => onSetLogType(id)}\n      />\n      <OptionsDivider />\n      {logType === 'structured' ? (\n        <StructuredLogToolbar\n          counts={counts}\n          filter={filter}\n          onSetFilter={onSetFilter}\n          steps={steps}\n        />\n      ) : (\n        <ComputeLogToolbar\n          steps={steps}\n          metadata={metadata}\n          logType={logType}\n          onSetLogType={onSetLogType}\n          computeLogKey={computeLogKey}\n          onSetComputeLogKey={onSetComputeLogKey}\n          computeLogUrl={computeLogUrl}\n        />\n      )}\n    </OptionsContainer>\n  );\n};\n\nconst resolveState = (metadata: IRunMetadataDict, logCapture: ILogCaptureInfo) => {\n  // resolves the state of potentially many steps into a single state so that we can show the\n  // execution dot representing the status of this log capture group (potentially at the process\n  // level)\n  if (logCapture.stepKeys.some((stepKey) => metadata.steps[stepKey].state === IStepState.RUNNING)) {\n    return IStepState.RUNNING;\n  }\n  if (logCapture.stepKeys.some((stepKey) => metadata.steps[stepKey].state === IStepState.SKIPPED)) {\n    return IStepState.SKIPPED;\n  }\n  if (\n    logCapture.stepKeys.every((stepKey) => metadata.steps[stepKey].state === IStepState.SUCCEEDED)\n  ) {\n    return IStepState.SUCCEEDED;\n  }\n  return IStepState.FAILED;\n};\n\nconst ComputeLogToolbar = ({\n  steps,\n  metadata,\n  computeLogKey,\n  onSetComputeLogKey,\n  logType,\n  onSetLogType,\n  computeLogUrl,\n}: {\n  steps: string[];\n  metadata: IRunMetadataDict;\n  computeLogKey?: string;\n  onSetComputeLogKey: (step: string) => void;\n  logType: LogType;\n  onSetLogType: (type: LogType) => void;\n  computeLogUrl: string | null;\n}) => {\n  const logCaptureSteps =\n    metadata.logCaptureSteps || extractLogCaptureStepsFromLegacySteps(Object.keys(metadata.steps));\n  const isValidStepSelection = computeLogKey && logCaptureSteps[computeLogKey];\n  const logKeyText = (logKey?: string) => {\n    if (!logKey || !logCaptureSteps[logKey]) {\n      return null;\n    }\n    const captureInfo = logCaptureSteps[logKey];\n    if (captureInfo.stepKeys.length === 1 && logKey === captureInfo.stepKeys[0]) {\n      return logKey;\n    }\n    if (captureInfo.pid) {\n      return `pid: ${captureInfo.pid} (${captureInfo.stepKeys.length} steps)`;\n    }\n    return `${logKey} (${captureInfo.stepKeys.length} steps)`;\n  };\n\n  return (\n    <Box\n      flex={{justifyContent: 'space-between', alignItems: 'center', direction: 'row'}}\n      style={{flex: 1}}\n    >\n      <Group direction=\"row\" spacing={24} alignItems=\"center\">\n        <Select\n          disabled={!steps.length}\n          items={Object.keys(logCaptureSteps)}\n          itemRenderer={(item: string, options: {handleClick: any; modifiers: any}) => (\n            <MenuItem\n              key={item}\n              onClick={options.handleClick}\n              text={logKeyText(item)}\n              active={options.modifiers.active}\n            />\n          )}\n          activeItem={computeLogKey}\n          filterable={false}\n          onItemSelect={(logKey) => {\n            onSetComputeLogKey(logKey);\n          }}\n        >\n          <Button disabled={!steps.length} rightIcon={<Icon name=\"expand_more\" />}>\n            {logKeyText(computeLogKey) || 'Select a step...'}\n          </Button>\n        </Select>\n        {isValidStepSelection ? (\n          <Tabs selectedTabId={logType} onChange={onSetLogType} size=\"small\">\n            <Tab id={LogType.stdout} title=\"stdout\" />\n            <Tab id={LogType.stderr} title=\"stderr\" />\n          </Tabs>\n        ) : null}\n      </Group>\n      {isValidStepSelection ? (\n        <Box flex={{direction: 'row', alignItems: 'center', gap: 12}}>\n          {computeLogKey && logCaptureSteps[computeLogKey] ? (\n            resolveState(metadata, logCaptureSteps[computeLogKey]) === IStepState.RUNNING ? (\n              <Spinner purpose=\"body-text\" />\n            ) : (\n              <ExecutionStateDot state={resolveState(metadata, logCaptureSteps[computeLogKey])} />\n            )\n          ) : null}\n          {computeLogUrl ? (\n            <Tooltip\n              placement=\"top-end\"\n              content={\n                computeLogKey && logCaptureSteps[computeLogKey]?.stepKeys.length === 1\n                  ? `Download ${logCaptureSteps[computeLogKey]?.stepKeys[0]} compute logs`\n                  : `Download compute logs`\n              }\n            >\n              <DownloadLink aria-label=\"Download link\" href={computeLogUrl} download>\n                <Icon name=\"download_for_offline\" color={Colors.Gray600} />\n              </DownloadLink>\n            </Tooltip>\n          ) : null}\n        </Box>\n      ) : null}\n    </Box>\n  );\n};\n\nconst DownloadLink = styled.a`\n  border-radius: 4px;\n  display: block;\n  text-decoration: none;\n\n  ${IconWrapper} {\n    transition: background-color 100ms linear;\n  }\n\n  :hover ${IconWrapper} {\n    background-color: ${Colors.Gray800};\n  }\n\n  :active ${IconWrapper}, :focus ${IconWrapper} {\n    background-color: ${Colors.Dark};\n  }\n\n  :focus {\n    outline: none;\n  }\n`;\n\nexport type LogLevelCounts = Record<LogLevel, number>;\n\nconst StructuredLogToolbar = ({\n  filter,\n  counts,\n  onSetFilter,\n  steps,\n}: {\n  filter: LogFilter;\n  counts: LogLevelCounts;\n  onSetFilter: (filter: LogFilter) => void;\n  steps: string[];\n}) => {\n  const [copyIcon, setCopyIcon] = React.useState<IconName>('assignment');\n  const logQueryString = logQueryToString(filter.logQuery);\n  const [queryString, setQueryString] = React.useState<string>(() => logQueryString);\n  const copyToClipboard = useCopyToClipboard();\n\n  const selectedStep = filter.logQuery.find((v) => v.token === 'step')?.value || null;\n  const filterText = filter.logQuery.reduce((accum, value) => accum + value.value, '');\n\n  // Reset the query string if the filter is updated, allowing external behavior\n  // (e.g. clicking a Gantt step) to set the input.\n  React.useEffect(() => {\n    setQueryString(logQueryString);\n  }, [logQueryString]);\n\n  const onChange = (value: string) => {\n    const tokens = value.split(/\\s+/);\n    const logQuery = tokens.map((item) => {\n      const segments = item.split(':');\n      if (segments.length > 1) {\n        return {token: segments[0], value: segments[1]};\n      }\n      return {value: segments[0]};\n    });\n    onSetFilter({...filter, logQuery: logQuery as LogFilterValue[]});\n    setQueryString(value);\n  };\n\n  // Restore the clipboard icon after a delay.\n  React.useEffect(() => {\n    let token: any;\n    if (copyIcon === 'assignment_turned_in') {\n      token = setTimeout(() => {\n        setCopyIcon('assignment');\n      }, 2000);\n    }\n    return () => {\n      token && clearTimeout(token);\n    };\n  }, [copyIcon]);\n\n  return (\n    <>\n      <LogsFilterInput\n        value={queryString}\n        suggestionProviders={getRunFilterProviders(steps)}\n        onChange={onChange}\n      />\n      {filterText ? (\n        <NonMatchCheckbox\n          checked={filter.hideNonMatches}\n          onChange={(event: React.ChangeEvent<HTMLInputElement>) =>\n            onSetFilter({...filter, hideNonMatches: event.currentTarget.checked})\n          }\n          label=\"Hide non-matches\"\n        />\n      ) : null}\n      <OptionsDivider />\n      <Box flex={{direction: 'row', alignItems: 'center', gap: 8}}>\n        {Object.keys(LogLevel).map((level) => {\n          const enabled = filter.levels[level];\n          return (\n            <FilterLabel key={level} $enabled={enabled}>\n              <Checkbox\n                format=\"switch\"\n                size=\"small\"\n                checked={!!enabled}\n                fillColor={enabled ? Colors.Blue500 : Colors.Gray200}\n                onChange={() =>\n                  onSetFilter({\n                    ...filter,\n                    levels: {\n                      ...filter.levels,\n                      [level]: !enabled,\n                    },\n                  })\n                }\n              />\n              <LogLabel $enabled={enabled}>{level.toLowerCase()}</LogLabel>\n              <LogCount $enabled={enabled}>{compactNumber(counts[level])}</LogCount>\n            </FilterLabel>\n          );\n        })}\n      </Box>\n      {selectedStep && <OptionsDivider />}\n      <div style={{minWidth: 15, flex: 1}} />\n      <Button\n        icon={<Icon name={copyIcon} />}\n        onClick={() => {\n          copyToClipboard(window.location.href);\n          setCopyIcon('assignment_turned_in');\n        }}\n      >\n        Copy URL\n      </Button>\n    </>\n  );\n};\n\nconst NonMatchCheckbox = styled(Checkbox)`\n  &&& {\n    margin: 0 4px 0 12px;\n  }\n\n  white-space: nowrap;\n`;\n\nconst FilterLabel = styled.label<{$enabled: boolean}>`\n  background-color: ${({$enabled}) => ($enabled ? Colors.Blue50 : Colors.Gray100)};\n  border: none;\n  border-radius: 8px;\n  margin: 0;\n  padding: 4px 6px;\n  overflow: hidden;\n  cursor: pointer;\n  display: inline-flex;\n  flex-direction: row;\n  align-items: center;\n  font-size: 12px;\n  font-weight: 500;\n  gap: 6px;\n\n  box-shadow: transparent inset 0px 0px 0px 1px;\n  transition: background 50ms linear;\n\n  :focus {\n    box-shadow: rgba(58, 151, 212, 0.6) 0 0 0 3px;\n    outline: none;\n  }\n\n  :focus:not(:focus-visible) {\n    box-shadow: transparent inset 0px 0px 0px 1px, rgba(0, 0, 0, 0.12) 0px 2px 12px 0px;\n  }\n`;\n\nconst LogLabel = styled.span<{$enabled: boolean}>`\n  color: ${({$enabled}) => ($enabled ? Colors.Blue500 : Colors.Gray700)};\n  line-height: 16px;\n  transition: background 50ms linear;\n`;\n\nconst LogCount = styled.span<{$enabled: boolean}>`\n  background-color: ${({$enabled}) => ($enabled ? Colors.Blue100 : Colors.Gray200)};\n  border-radius: 6px;\n  color: ${({$enabled}) => ($enabled ? Colors.Blue500 : Colors.Gray700)};\n  font-weight: 600;\n  font-family: ${FontFamily.monospace};\n  line-height: 16px;\n  padding: 1px 4px;\n  transition: background 50ms linear;\n`;\n","import {gql, useQuery} from '@apollo/client';\nimport {Box, Page, Spinner} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {useHistory} from 'react-router';\nimport {useParams} from 'react-router-dom';\n\nimport {displayNameForAssetKey} from '../asset-graph/Utils';\nimport {useDocumentTitle} from '../hooks/useDocumentTitle';\nimport {ReloadAllButton} from '../workspace/ReloadAllButton';\n\nimport {AssetPageHeader} from './AssetPageHeader';\nimport {AssetView} from './AssetView';\nimport {AssetsCatalogTable} from './AssetsCatalogTable';\nimport {assetDetailsPathForKey} from './assetDetailsPathForKey';\nimport {\n  AssetsCatalogRootQuery,\n  AssetsCatalogRootQueryVariables,\n} from './types/AssetsCatalogRootQuery';\n\nexport const AssetsCatalogRoot = () => {\n  const params = useParams();\n  const history = useHistory();\n  const currentPath: string[] = (params['0'] || '')\n    .split('/')\n    .filter((x: string) => x)\n    .map(decodeURIComponent);\n\n  const queryResult = useQuery<AssetsCatalogRootQuery, AssetsCatalogRootQueryVariables>(\n    ASSETS_CATALOG_ROOT_QUERY,\n    {\n      skip: currentPath.length === 0,\n      variables: {assetKey: {path: currentPath}},\n    },\n  );\n\n  useDocumentTitle(\n    currentPath && currentPath.length\n      ? `Assets: ${displayNameForAssetKey({path: currentPath})}`\n      : 'Assets',\n  );\n\n  return queryResult.loading ? (\n    <Page>\n      <AssetPageHeader assetKey={{path: currentPath}} />\n      <Box padding={64}>\n        <Spinner purpose=\"page\" />\n      </Box>\n    </Page>\n  ) : currentPath.length === 0 ||\n    queryResult.data?.assetOrError.__typename === 'AssetNotFoundError' ? (\n    <Page>\n      <AssetPageHeader\n        assetKey={{path: currentPath}}\n        right={<ReloadAllButton label=\"Reload definitions\" />}\n      />\n      <AssetsCatalogTable\n        prefixPath={currentPath}\n        setPrefixPath={(prefixPath) => history.push(assetDetailsPathForKey({path: prefixPath}))}\n      />\n    </Page>\n  ) : (\n    <AssetView assetKey={{path: currentPath}} />\n  );\n};\n\nconst ASSETS_CATALOG_ROOT_QUERY = gql`\n  query AssetsCatalogRootQuery($assetKey: AssetKeyInput!) {\n    assetOrError(assetKey: $assetKey) {\n      __typename\n      ... on Asset {\n        id\n        key {\n          path\n        }\n      }\n    }\n  }\n`;\n","import {gql} from '@apollo/client';\nimport {Colors, Group, Icon, Spinner, FontFamily} from '@dagster-io/ui';\nimport Ansi from 'ansi-to-react';\nimport * as React from 'react';\nimport styled, {createGlobalStyle} from 'styled-components/macro';\n\nimport {ComputeLogContentFileFragment} from './types/ComputeLogContentFileFragment';\n\nconst TRUNCATE_PREFIX = '\\u001b[33m...logs truncated...\\u001b[39m\\n';\nconst SCROLLER_LINK_TIMEOUT_MS = 3000;\nexport const MAX_STREAMING_LOG_BYTES = 5242880; // 5 MB\n\nconst shouldTruncate = (content: string | null | undefined) => {\n  if (!content) {\n    return false;\n  }\n  const encoder = new TextEncoder();\n  return encoder.encode(content).length >= MAX_STREAMING_LOG_BYTES;\n};\n\nexport class ComputeLogContent extends React.Component<{\n  logData?: ComputeLogContentFileFragment | null;\n  downloadUrl?: string | null;\n  isLoading?: boolean;\n  isVisible: boolean;\n}> {\n  private timeout: number | null = null;\n  private contentContainer = React.createRef<ScrollContainer>();\n\n  state = {\n    showScrollToTop: false,\n  };\n\n  hideWarning = () => {\n    this.setState({showScrollToTop: false});\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n      this.timeout = 0;\n    }\n  };\n\n  scheduleHideWarning = () => {\n    this.timeout = window.setTimeout(this.hideWarning, SCROLLER_LINK_TIMEOUT_MS);\n  };\n\n  cancelHideWarning = () => {\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n      this.timeout = 0;\n    }\n  };\n\n  onScrollUp = (position: number) => {\n    this.cancelHideWarning();\n\n    if (!position) {\n      this.hideWarning();\n    } else {\n      this.setState({showScrollToTop: true});\n      this.scheduleHideWarning();\n    }\n  };\n\n  onScrollDown = (_position: number) => {\n    this.hideWarning();\n  };\n\n  scrollToTop = () => {\n    this.contentContainer.current && this.contentContainer.current.scrollToTop();\n  };\n\n  renderScrollToTop() {\n    const {showScrollToTop} = this.state;\n\n    if (!showScrollToTop) {\n      return null;\n    }\n\n    return (\n      <ScrollToast>\n        <ScrollToTop\n          onClick={() => this.scrollToTop()}\n          onMouseOver={this.cancelHideWarning}\n          onMouseOut={this.scheduleHideWarning}\n        >\n          <Group direction=\"row\" spacing={8} alignItems=\"center\">\n            <Icon name=\"arrow_upward\" color={Colors.White} />\n            Scroll to top\n          </Group>\n        </ScrollToTop>\n      </ScrollToast>\n    );\n  }\n\n  render() {\n    const {logData, isLoading, isVisible, downloadUrl} = this.props;\n    let content = logData?.data;\n    const isTruncated = shouldTruncate(content);\n\n    if (content && isTruncated) {\n      const nextLine = content.indexOf('\\n') + 1;\n      const truncated = nextLine < content.length ? content.slice(nextLine) : content;\n      content = TRUNCATE_PREFIX + truncated;\n    }\n    const warning = isTruncated ? (\n      <FileWarning>\n        <Group direction=\"row\" spacing={8} alignItems=\"center\">\n          <Icon name=\"warning\" color={Colors.Yellow500} />\n          <div>\n            This log has exceeded the 5MB limit.{' '}\n            {downloadUrl ? (\n              <a href={downloadUrl} download>\n                Download the full log file\n              </a>\n            ) : null}\n            .\n          </div>\n        </Group>\n      </FileWarning>\n    ) : null;\n\n    return (\n      <>\n        <FileContainer isVisible={isVisible}>\n          {this.renderScrollToTop()}\n          <FileContent>\n            {warning}\n            <RelativeContainer>\n              <LogContent\n                isSelected={true}\n                content={content}\n                onScrollUp={this.onScrollUp}\n                onScrollDown={this.onScrollDown}\n                ref={this.contentContainer}\n              />\n            </RelativeContainer>\n          </FileContent>\n          {isLoading ? (\n            <LoadingContainer>\n              <Spinner purpose=\"page\" />\n            </LoadingContainer>\n          ) : null}\n        </FileContainer>\n        <FileFooter isVisible={isVisible}>{logData?.path}</FileFooter>\n      </>\n    );\n  }\n}\n\nexport const COMPUTE_LOG_CONTENT_FRAGMENT = gql`\n  fragment ComputeLogContentFileFragment on ComputeLogFile {\n    path\n    cursor\n    data\n    downloadUrl\n  }\n`;\n\ninterface IScrollContainerProps {\n  content: string | null | undefined;\n  isSelected?: boolean;\n  className?: string;\n  onScrollUp?: (position: number) => void;\n  onScrollDown?: (position: number) => void;\n}\n\nclass ScrollContainer extends React.Component<IScrollContainerProps> {\n  private container = React.createRef<HTMLDivElement>();\n  private lastScroll = 0;\n\n  componentDidMount() {\n    this.scrollToBottom();\n    if (this.container.current) {\n      this.container.current.focus();\n      this.container.current.addEventListener('scroll', this.onScroll);\n    }\n  }\n\n  getSnapshotBeforeUpdate() {\n    if (!this.container.current) {\n      return false;\n    }\n    const {scrollHeight, scrollTop, offsetHeight} = this.container.current;\n    const shouldScroll = offsetHeight + scrollTop >= scrollHeight;\n    return shouldScroll;\n  }\n\n  componentDidUpdate(_props: any, _state: any, shouldScroll: boolean) {\n    if (shouldScroll) {\n      this.scrollToBottom();\n    }\n    if (this.props.isSelected && !_props.isSelected) {\n      this.container.current && this.container.current.focus();\n    }\n  }\n\n  onScroll = () => {\n    if (!this.container.current || !this.props.isSelected) {\n      return;\n    }\n    const {onScrollUp, onScrollDown} = this.props;\n\n    const {scrollHeight, scrollTop, offsetHeight} = this.container.current;\n    const position = scrollTop / (scrollHeight - offsetHeight);\n    if (this.container.current.scrollTop < this.lastScroll) {\n      onScrollUp && onScrollUp(position);\n    } else {\n      onScrollDown && onScrollDown(position);\n    }\n    this.lastScroll = this.container.current.scrollTop;\n  };\n\n  focus() {\n    const node = this.container.current;\n    if (!node) {\n      return;\n    }\n\n    node.focus();\n  }\n\n  scrollToBottom() {\n    const node = this.container.current;\n    if (!node) {\n      return;\n    }\n\n    node.scrollTop = node.scrollHeight - node.offsetHeight;\n  }\n\n  scrollToTop() {\n    const node = this.container.current;\n    if (!node) {\n      return;\n    }\n\n    node.scrollTop = 0;\n    node.focus();\n  }\n\n  render() {\n    const {content, className} = this.props;\n    if (!content) {\n      return (\n        <div className={className} ref={this.container}>\n          <ContentContainer style={{justifyContent: 'center', alignItems: 'center'}}>\n            {content == null ? 'No log file available' : 'No output'}\n          </ContentContainer>\n        </div>\n      );\n    }\n\n    return (\n      <div className={className} style={{outline: 'none'}} ref={this.container} tabIndex={0}>\n        <ContentContainer>\n          <LineNumbers content={content} />\n          <Content>\n            <SolarizedColors />\n            <Ansi linkify={false} useClasses>\n              {content}\n            </Ansi>\n          </Content>\n        </ContentContainer>\n      </div>\n    );\n  }\n}\n\nconst LineNumbers = (props: IScrollContainerProps) => {\n  const {content} = props;\n  if (!content) {\n    return null;\n  }\n  const matches = content.match(/\\n/g);\n  const count = matches ? matches.length : 0;\n  return (\n    <LineNumberContainer>\n      {Array.from(Array(count), (_, i) => (\n        <div key={i}>{String(i + 1)}</div>\n      ))}\n    </LineNumberContainer>\n  );\n};\n\nconst FileContainer = styled.div`\n  flex: 1;\n  height: 100%;\n  position: relative;\n  &:first-child {\n    border-right: 0.5px solid #5c7080;\n  }\n  display: flex;\n  flex-direction: column;\n  ${({isVisible}: {isVisible: boolean}) => (isVisible ? null : 'display: none;')}\n`;\nconst FileFooter = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  height: 30px;\n  background-color: ${Colors.Gray900};\n  border-top: 0.5px solid #5c7080;\n  color: #aaaaaa;\n  padding: 2px 5px;\n  font-size: 0.85em;\n  ${({isVisible}: {isVisible: boolean}) => (isVisible ? null : 'display: none;')}\n`;\nconst ContentContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  min-height: 100%;\n  background-color: ${Colors.Gray900};\n`;\nconst Content = styled.div`\n  padding: 10px;\n  background-color: ${Colors.Gray900};\n`;\nconst LineNumberContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  border-right: 1px solid #5c7080;\n  padding: 10px 10px 10px 20px;\n  margin-right: 5px;\n  background-color: ${Colors.Gray900};\n  opacity: 0.8;\n  color: #858585;\n  min-height: 100%;\n`;\nconst SolarizedColors = createGlobalStyle`\n  .ansi-black {\n    color: #586e75;\n  }\n  .ansi-red {\n    color: #dc322f;\n  }\n  .ansi-green {\n    color: #859900;\n  }\n  .ansi-yellow {\n    color: #b58900;\n  }\n  .ansi-blue {\n    color: #268bd2;\n  }\n  .ansi-magenta {\n    color: #d33682;\n  }\n  .ansi-cyan {\n    color: #2aa198;\n  }\n  .ansi-white {\n    color: #eee8d5;\n  }\n`;\nconst FileContent = styled.div`\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n`;\nconst RelativeContainer = styled.div`\n  flex: 1;\n  position: relative;\n`;\nconst LogContent = styled(ScrollContainer)`\n  color: #eeeeee;\n  font-family: ${FontFamily.monospace};\n  font-size: 16px;\n  white-space: pre;\n  overflow: auto;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n`;\nconst FileWarning = styled.div`\n  background-color: #fffae3;\n  padding: 10px 20px;\n  margin: 20px 70px;\n  border-radius: 5px;\n`;\nconst ScrollToast = styled.div`\n  position: absolute;\n  height: 30px;\n  top: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: flex-start;\n  z-index: 1;\n`;\nconst ScrollToTop = styled.div`\n  background-color: black;\n  padding: 10px 20px;\n  border-bottom-right-radius: 5px;\n  border-bottom-left-radius: 5px;\n  color: white;\n  border-bottom: 0.5px solid #5c7080;\n  border-left: 0.5px solid #5c7080;\n  border-right: 0.5px solid #5c7080;\n  cursor: pointer;\n`;\nconst LoadingContainer = styled.div`\n  display: flex;\n  justifycontent: center;\n  alignitems: center;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  backgroundcolor: ${Colors.Gray800};\n  opacity: 0.3;\n`;\n","import {gql, useSubscription} from '@apollo/client';\nimport * as React from 'react';\n\nimport {ComputeIOType} from '../types/globalTypes';\n\nimport {COMPUTE_LOG_CONTENT_FRAGMENT, MAX_STREAMING_LOG_BYTES} from './ComputeLogContent';\nimport {ComputeLogContentFileFragment} from './types/ComputeLogContentFileFragment';\nimport {\n  ComputeLogsSubscription,\n  ComputeLogsSubscriptionVariables,\n} from './types/ComputeLogsSubscription';\nimport {ComputeLogsSubscriptionFragment} from './types/ComputeLogsSubscriptionFragment';\n\nconst slice = (s: string) =>\n  s.length < MAX_STREAMING_LOG_BYTES ? s : s.slice(-MAX_STREAMING_LOG_BYTES);\n\nconst merge = (\n  a: ComputeLogContentFileFragment | null,\n  b: ComputeLogContentFileFragment | null,\n): ComputeLogContentFileFragment | null => {\n  if (!b) {\n    return a;\n  }\n  let data = a?.data;\n  if (a?.data && b?.data) {\n    data = slice(a.data + b.data);\n  } else if (b?.data) {\n    data = slice(b.data);\n  }\n  return {\n    __typename: b.__typename,\n    path: b.path,\n    downloadUrl: b.downloadUrl,\n    data: typeof data === 'string' ? data : null,\n    cursor: b.cursor,\n  };\n};\n\ninterface State {\n  stepKey: string;\n  stdout: ComputeLogsSubscriptionFragment | null;\n  stderr: ComputeLogsSubscriptionFragment | null;\n  isLoading: boolean;\n}\n\ntype Action =\n  | {type: 'stdout'; stepKey: string; log: ComputeLogsSubscriptionFragment | null}\n  | {type: 'stderr'; stepKey: string; log: ComputeLogsSubscriptionFragment | null};\n\nconst reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case 'stdout':\n      const stdout =\n        action.stepKey === state.stepKey ? merge(state.stdout, action.log) : action.log;\n      return {...state, isLoading: false, stdout};\n    case 'stderr':\n      const stderr =\n        action.stepKey === state.stepKey ? merge(state.stderr, action.log) : action.log;\n      return {...state, isLoading: false, stderr};\n    default:\n      return state;\n  }\n};\n\nconst initialState: State = {\n  stepKey: '',\n  stdout: null,\n  stderr: null,\n  isLoading: true,\n};\n\nexport const useComputeLogs = (runId: string, stepKey?: string) => {\n  const [state, dispatch] = React.useReducer(reducer, initialState);\n\n  useSubscription<ComputeLogsSubscription, ComputeLogsSubscriptionVariables>(\n    COMPUTE_LOGS_SUBSCRIPTION,\n    {\n      fetchPolicy: 'no-cache',\n      variables: {runId, stepKey: stepKey!, ioType: ComputeIOType.STDOUT, cursor: null},\n      skip: !stepKey,\n      onSubscriptionData: ({subscriptionData}) => {\n        if (stepKey) {\n          dispatch({type: 'stdout', stepKey, log: subscriptionData.data?.computeLogs || null});\n        }\n      },\n    },\n  );\n\n  useSubscription<ComputeLogsSubscription, ComputeLogsSubscriptionVariables>(\n    COMPUTE_LOGS_SUBSCRIPTION,\n    {\n      fetchPolicy: 'no-cache',\n      variables: {runId, stepKey: stepKey!, ioType: ComputeIOType.STDERR, cursor: null},\n      skip: !stepKey,\n      onSubscriptionData: ({subscriptionData}) => {\n        if (stepKey) {\n          dispatch({type: 'stderr', stepKey, log: subscriptionData.data?.computeLogs || null});\n        }\n      },\n    },\n  );\n\n  return state;\n};\n\nconst COMPUTE_LOGS_SUBSCRIPTION_FRAGMENT = gql`\n  fragment ComputeLogsSubscriptionFragment on ComputeLogFile {\n    data\n    cursor\n    ...ComputeLogContentFileFragment\n  }\n  ${COMPUTE_LOG_CONTENT_FRAGMENT}\n`;\n\nconst COMPUTE_LOGS_SUBSCRIPTION = gql`\n  subscription ComputeLogsSubscription(\n    $runId: ID!\n    $stepKey: String!\n    $ioType: ComputeIOType!\n    $cursor: String\n  ) {\n    computeLogs(runId: $runId, stepKey: $stepKey, ioType: $ioType, cursor: $cursor) {\n      ...ComputeLogsSubscriptionFragment\n    }\n  }\n  ${COMPUTE_LOGS_SUBSCRIPTION_FRAGMENT}\n`;\n","import {Box, Spinner} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {AppContext} from '../app/AppContext';\n\nimport {ComputeLogContent} from './ComputeLogContent';\nimport {ComputeLogContentFileFragment} from './types/ComputeLogContentFileFragment';\nimport {useComputeLogs} from './useComputeLogs';\ninterface RunComputeLogs {\n  runId: string;\n  stepKeys: string[];\n  computeLogKey?: string;\n  ioType: string;\n  setComputeLogUrl: (url: string | null) => void;\n}\n\nconst resolveDownloadUrl = (\n  rootServerURI: string,\n  logData: ComputeLogContentFileFragment | null,\n) => {\n  const downloadUrl = logData?.downloadUrl;\n  if (!downloadUrl) {\n    return null;\n  }\n  const isRelativeUrl = (x?: string) => x && x.startsWith('/');\n  return isRelativeUrl(downloadUrl) ? rootServerURI + downloadUrl : downloadUrl;\n};\n\nexport const ComputeLogPanel: React.FC<RunComputeLogs> = React.memo(\n  ({runId, stepKeys, computeLogKey, ioType, setComputeLogUrl}) => {\n    const {rootServerURI} = React.useContext(AppContext);\n    const {isLoading, stdout, stderr} = useComputeLogs(runId, computeLogKey);\n\n    if (!stepKeys.length || !computeLogKey) {\n      return (\n        <Box\n          flex={{justifyContent: 'center', alignItems: 'center'}}\n          style={{flex: 1, height: '100%'}}\n        >\n          <Spinner purpose=\"section\" />\n        </Box>\n      );\n    }\n\n    const logData = ioType === 'stdout' ? stdout : stderr;\n    const downloadUrl = resolveDownloadUrl(rootServerURI, logData);\n\n    return (\n      <div style={{flex: 1, minHeight: 0, display: 'flex', flexDirection: 'column'}}>\n        <ContentWrapper\n          logData={stdout}\n          isLoading={isLoading}\n          isVisible={ioType === 'stdout'}\n          downloadUrl={downloadUrl}\n          setComputeLogUrl={setComputeLogUrl}\n        />\n        <ContentWrapper\n          logData={stderr}\n          isLoading={isLoading}\n          isVisible={ioType === 'stderr'}\n          downloadUrl={downloadUrl}\n          setComputeLogUrl={setComputeLogUrl}\n        />\n      </div>\n    );\n  },\n);\n\nconst ContentWrapper = ({\n  isLoading,\n  isVisible,\n  logData,\n  downloadUrl,\n  setComputeLogUrl,\n}: {\n  isVisible: boolean;\n  isLoading: boolean;\n  logData: ComputeLogContentFileFragment | null;\n  downloadUrl: string | null;\n  setComputeLogUrl: (url: string | null) => void;\n}) => {\n  React.useEffect(() => {\n    setComputeLogUrl(downloadUrl);\n  }, [setComputeLogUrl, downloadUrl]);\n  return (\n    <ComputeLogContent\n      logData={logData}\n      isLoading={isLoading}\n      isVisible={isVisible}\n      downloadUrl={downloadUrl}\n    />\n  );\n};\n","import {gql, useApolloClient, useQuery, useSubscription} from '@apollo/client';\nimport {TokenizingFieldValue} from '@dagster-io/ui';\nimport throttle from 'lodash/throttle';\nimport * as React from 'react';\n\nimport {WebSocketContext} from '../app/WebSocketProvider';\nimport {RunStatus} from '../types/globalTypes';\n\nimport {LogLevelCounts} from './LogsToolbar';\nimport {RunFragments} from './RunFragments';\nimport {logNodeLevel} from './logNodeLevel';\nimport {LogNode} from './types';\nimport {\n  PipelineRunLogsSubscription,\n  PipelineRunLogsSubscriptionVariables,\n} from './types/PipelineRunLogsSubscription';\nimport {PipelineRunLogsSubscriptionStatusFragment} from './types/PipelineRunLogsSubscriptionStatusFragment';\nimport {RunDagsterRunEventFragment} from './types/RunDagsterRunEventFragment';\nimport {RunLogsQuery, RunLogsQueryVariables} from './types/RunLogsQuery';\n\nexport interface LogFilterValue extends TokenizingFieldValue {\n  token?: 'step' | 'type' | 'query';\n}\n\nexport interface LogFilter {\n  logQuery: LogFilterValue[];\n  levels: {[key: string]: boolean};\n  focusedTime: number;\n  sinceTime: number;\n  hideNonMatches: boolean;\n}\n\nexport interface LogsProviderLogs {\n  allNodes: LogNode[];\n  counts: LogLevelCounts;\n  loading: boolean;\n}\n\nconst pipelineStatusFromMessages = (messages: RunDagsterRunEventFragment[]) => {\n  const reversed = [...messages].reverse();\n  for (const message of reversed) {\n    const {__typename} = message;\n    switch (__typename) {\n      case 'RunStartEvent':\n        return RunStatus.STARTED;\n      case 'RunEnqueuedEvent':\n        return RunStatus.QUEUED;\n      case 'RunStartingEvent':\n        return RunStatus.STARTING;\n      case 'RunCancelingEvent':\n        return RunStatus.CANCELING;\n      case 'RunCanceledEvent':\n        return RunStatus.CANCELED;\n      case 'RunSuccessEvent':\n        return RunStatus.SUCCESS;\n      case 'RunFailureEvent':\n        return RunStatus.FAILURE;\n    }\n  }\n  return null;\n};\n\nconst BATCH_INTERVAL = 100;\nconst QUERY_LOG_LIMIT = 10000;\n\ntype State = {\n  nodes: LogNode[];\n  cursor: string | null;\n  counts: LogLevelCounts;\n  loading: boolean;\n};\n\ntype Action =\n  | {type: 'append'; queued: RunDagsterRunEventFragment[]; hasMore: boolean; cursor: string}\n  | {type: 'set-cursor'; cursor: string}\n  | {type: 'reset'};\n\nconst emptyCounts = {\n  DEBUG: 0,\n  INFO: 0,\n  WARNING: 0,\n  ERROR: 0,\n  CRITICAL: 0,\n  EVENT: 0,\n};\n\nconst reducer = (state: State, action: Action) => {\n  switch (action.type) {\n    case 'append': {\n      const queuedNodes = action.queued.map((node, ii) => ({\n        ...node,\n        clientsideKey: `csk${node.timestamp}-${ii}`,\n      }));\n      const nodes = [...state.nodes, ...queuedNodes];\n      const counts = {...state.counts};\n      queuedNodes.forEach((node) => {\n        const level = logNodeLevel(node);\n        counts[level]++;\n      });\n      return {nodes, counts, loading: action.hasMore, cursor: action.cursor};\n    }\n    case 'set-cursor':\n      return {...state, cursor: action.cursor};\n    case 'reset':\n      return {nodes: [], counts: emptyCounts, cursor: null, loading: true};\n    default:\n      return state;\n  }\n};\n\nconst initialState: State = {\n  nodes: [],\n  counts: emptyCounts,\n  cursor: null,\n  loading: true,\n};\n\nconst useLogsProviderWithSubscription = (runId: string) => {\n  const client = useApolloClient();\n  const queue = React.useRef<RunDagsterRunEventFragment[]>([]);\n  const [state, dispatch] = React.useReducer(reducer, initialState);\n\n  const syncPipelineStatusToApolloCache = React.useCallback(\n    (status: RunStatus) => {\n      const local = client.readFragment<PipelineRunLogsSubscriptionStatusFragment>({\n        fragmentName: 'PipelineRunLogsSubscriptionStatusFragment',\n        fragment: PIPELINE_RUN_LOGS_SUBSCRIPTION_STATUS_FRAGMENT,\n        id: `Run:${runId}`,\n      });\n\n      if (local) {\n        const toWrite = {...local, status};\n        if (\n          status === RunStatus.FAILURE ||\n          status === RunStatus.SUCCESS ||\n          status === RunStatus.STARTING ||\n          status === RunStatus.CANCELING ||\n          status === RunStatus.CANCELED\n        ) {\n          toWrite.canTerminate = false;\n        }\n\n        client.writeFragment({\n          fragmentName: 'PipelineRunLogsSubscriptionStatusFragment',\n          fragment: PIPELINE_RUN_LOGS_SUBSCRIPTION_STATUS_FRAGMENT,\n          id: `Run:${runId}`,\n          data: toWrite,\n        });\n      }\n    },\n    [client, runId],\n  );\n\n  React.useEffect(() => {\n    queue.current = [];\n    dispatch({type: 'reset'});\n  }, [runId]);\n\n  // Batch the nodes together so they don't overwhelm the animation of the Gantt,\n  // which depends on a bit of a timing delay to maintain smoothness.\n  const throttledSetNodes = React.useMemo(() => {\n    return throttle((hasMore: boolean, cursor: string) => {\n      const queued = [...queue.current];\n      queue.current = [];\n      dispatch({type: 'append', queued, hasMore, cursor});\n    }, BATCH_INTERVAL);\n  }, []);\n\n  const {nodes, counts, cursor, loading} = state;\n\n  useSubscription<PipelineRunLogsSubscription, PipelineRunLogsSubscriptionVariables>(\n    PIPELINE_RUN_LOGS_SUBSCRIPTION,\n    {\n      fetchPolicy: 'no-cache',\n      variables: {runId, cursor},\n      onSubscriptionData: ({subscriptionData}) => {\n        const logs = subscriptionData.data?.pipelineRunLogs;\n        if (!logs || logs.__typename === 'PipelineRunLogsSubscriptionFailure') {\n          return;\n        }\n\n        const {messages, hasMorePastEvents, cursor} = logs;\n        const nextPipelineStatus = pipelineStatusFromMessages(messages);\n\n        // If we're still loading past events, don't sync to the cache -- event chunks could\n        // give us `status` values that don't match the actual state of the run.\n        if (nextPipelineStatus && !hasMorePastEvents) {\n          syncPipelineStatusToApolloCache(nextPipelineStatus);\n        }\n\n        // Maintain a queue of messages as they arrive, and call the throttled setter.\n        queue.current = [...queue.current, ...messages];\n        throttledSetNodes(hasMorePastEvents, cursor);\n      },\n    },\n  );\n\n  return React.useMemo(\n    () => (nodes !== null ? {allNodes: nodes, counts, loading} : {allNodes: [], counts, loading}),\n    [counts, loading, nodes],\n  );\n};\n\ninterface LogsProviderProps {\n  runId: string;\n  children: (result: LogsProviderLogs) => React.ReactChild;\n}\n\nconst LogsProviderWithSubscription: React.FC<LogsProviderProps> = (props) => {\n  const state = useLogsProviderWithSubscription(props.runId);\n  return <>{props.children(state)}</>;\n};\n\ninterface LogsProviderWithQueryProps {\n  runId: string;\n  children: (result: LogsProviderLogs) => React.ReactChild;\n}\n\nconst POLL_INTERVAL = 5000;\n\nconst LogsProviderWithQuery = (props: LogsProviderWithQueryProps) => {\n  const {children, runId} = props;\n  const [state, dispatch] = React.useReducer(reducer, initialState);\n  const {counts, cursor, nodes} = state;\n\n  const {stopPolling, startPolling} = useQuery<RunLogsQuery, RunLogsQueryVariables>(\n    RUN_LOGS_QUERY,\n    {\n      notifyOnNetworkStatusChange: true,\n      variables: {runId, cursor, limit: QUERY_LOG_LIMIT},\n      pollInterval: POLL_INTERVAL,\n      onCompleted: (data: RunLogsQuery) => {\n        // We have to stop polling in order to update the `after` value.\n        stopPolling();\n\n        if (\n          data?.pipelineRunOrError.__typename !== 'Run' ||\n          data?.logsForRun.__typename !== 'EventConnection'\n        ) {\n          return;\n        }\n\n        const run = data.pipelineRunOrError;\n        const queued = data.logsForRun.events;\n        const status = run.status;\n        const cursor = data.logsForRun.cursor;\n\n        const hasMore =\n          !!status &&\n          status !== RunStatus.FAILURE &&\n          status !== RunStatus.SUCCESS &&\n          status !== RunStatus.CANCELED;\n\n        dispatch({type: 'append', queued, hasMore, cursor});\n\n        if (hasMore) {\n          startPolling(POLL_INTERVAL);\n        }\n      },\n    },\n  );\n\n  return (\n    <>\n      {children(\n        nodes !== null && nodes.length > 0\n          ? {allNodes: nodes, counts, loading: false}\n          : {allNodes: [], counts, loading: true},\n      )}\n    </>\n  );\n};\n\nexport const LogsProvider: React.FC<LogsProviderProps> = (props) => {\n  const {children, runId} = props;\n  const {availability, disabled} = React.useContext(WebSocketContext);\n\n  // if disabled, drop to query variant immediately\n  if (availability === 'unavailable' || disabled) {\n    return <LogsProviderWithQuery runId={runId}>{children}</LogsProviderWithQuery>;\n  }\n\n  if (availability === 'attempting-to-connect') {\n    return <>{children({allNodes: [], counts: emptyCounts, loading: true})}</>;\n  }\n\n  return <LogsProviderWithSubscription runId={runId}>{children}</LogsProviderWithSubscription>;\n};\n\nconst PIPELINE_RUN_LOGS_SUBSCRIPTION = gql`\n  subscription PipelineRunLogsSubscription($runId: ID!, $cursor: String) {\n    pipelineRunLogs(runId: $runId, cursor: $cursor) {\n      __typename\n      ... on PipelineRunLogsSubscriptionSuccess {\n        messages {\n          ... on MessageEvent {\n            runId\n          }\n          ...RunDagsterRunEventFragment\n        }\n        hasMorePastEvents\n        cursor\n      }\n      ... on PipelineRunLogsSubscriptionFailure {\n        missingRunId\n        message\n      }\n    }\n  }\n\n  ${RunFragments.RunDagsterRunEventFragment}\n`;\n\nconst PIPELINE_RUN_LOGS_SUBSCRIPTION_STATUS_FRAGMENT = gql`\n  fragment PipelineRunLogsSubscriptionStatusFragment on Run {\n    id\n    runId\n    status\n    canTerminate\n  }\n`;\n\nconst RUN_LOGS_QUERY = gql`\n  query RunLogsQuery($runId: ID!, $cursor: String, $limit: Int) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        runId\n        status\n        canTerminate\n      }\n    }\n    logsForRun(runId: $runId, afterCursor: $cursor, limit: $limit) {\n      ... on EventConnection {\n        events {\n          __typename\n          ... on MessageEvent {\n            runId\n          }\n          ...RunDagsterRunEventFragment\n        }\n        cursor\n      }\n      ... on PythonError {\n        message\n        stack\n      }\n    }\n  }\n  ${RunFragments.RunDagsterRunEventFragment}\n`;\n","import memoize from 'lodash/memoize';\n\nconst compactFormatter = memoize(\n  () =>\n    new Intl.NumberFormat(navigator.language, {\n      compactDisplay: 'short',\n      notation: 'compact',\n    }),\n);\n\nexport const compactNumber = (num: number | bigint): string => compactFormatter().format(num);\n","import {Colors} from '@dagster-io/ui';\nimport styled from 'styled-components/macro';\n\nimport {IStepState} from './RunMetadataProvider';\n\nexport const ExecutionStateDot = styled.div<{state: IStepState}>`\n  display: inline-block;\n  width: 11px;\n  height: 11px;\n  border-radius: 5.5px;\n  transition: background 200ms linear;\n  background: ${({state}) =>\n    ({\n      [IStepState.RUNNING]: Colors.Gray400,\n      [IStepState.SUCCEEDED]: Colors.Green700,\n      [IStepState.SKIPPED]: Colors.Yellow500,\n      [IStepState.FAILED]: Colors.Red500,\n      [IStepState.PREPARING]: Colors.Red500,\n      [IStepState.RETRY_REQUESTED]: Colors.Red500,\n      [IStepState.UNKNOWN]: Colors.Red500,\n    }[state])};\n  &:hover {\n    background: ${({state}) =>\n      ({\n        [IStepState.RUNNING]: Colors.Gray400,\n        [IStepState.SUCCEEDED]: Colors.Green700,\n        [IStepState.SKIPPED]: Colors.Yellow500,\n        [IStepState.FAILED]: Colors.Red200,\n        [IStepState.PREPARING]: Colors.Red500,\n        [IStepState.RETRY_REQUESTED]: Colors.Red500,\n        [IStepState.UNKNOWN]: Colors.Red500,\n      }[state])};\n  }\n`;\n","import {\n  Colors,\n  Popover,\n  TextInput,\n  SuggestionProvider,\n  useSuggestionsForString,\n  Icon,\n} from '@dagster-io/ui';\nimport Fuse from 'fuse.js';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {ClearButton} from '../ui/ClearButton';\n\ninterface Props {\n  value: string;\n  onChange: (value: string) => void;\n  suggestionProviders: SuggestionProvider[];\n}\n\ntype Action =\n  | {type: 'show-popover'}\n  | {type: 'hide-popover'}\n  | {type: 'highlight'; highlight: number}\n  | {type: 'change-query'}\n  | {type: 'select-suggestion'};\n\ntype State = {\n  shown: boolean;\n  highlight: number;\n};\n\nconst reducer = (state: State, action: Action) => {\n  switch (action.type) {\n    case 'show-popover':\n      return {...state, shown: true};\n    case 'hide-popover':\n      return {...state, shown: false};\n    case 'highlight':\n      return {...state, highlight: action.highlight};\n    case 'change-query':\n      return {...state, shown: true, highlight: 0};\n    case 'select-suggestion':\n      return {...state, highlight: 0};\n    default:\n      return state;\n  }\n};\n\nconst initialState: State = {\n  shown: false,\n  highlight: 0,\n};\n\nconst fuseOptions = {\n  threshold: 0.3,\n};\n\nexport const LogsFilterInput: React.FC<Props> = (props) => {\n  const {value, onChange, suggestionProviders} = props;\n\n  const [state, dispatch] = React.useReducer(reducer, initialState);\n  const {shown, highlight} = state;\n  const inputRef = React.useRef<HTMLInputElement>(null);\n\n  const {empty, perProvider} = React.useMemo(() => {\n    const perProvider = suggestionProviders.reduce((accum, provider) => {\n      const values = provider.values();\n      return provider.token\n        ? {...accum, [provider.token]: {fuse: new Fuse(values, fuseOptions), all: values}}\n        : accum;\n    }, {} as {[token: string]: {fuse: Fuse<string>; all: string[]}});\n    const providerKeys = suggestionProviders\n      .map((provider) => provider.token)\n      .filter((token) => token) as string[];\n    return {\n      empty: new Fuse(providerKeys, fuseOptions),\n      perProvider,\n    };\n  }, [suggestionProviders]);\n\n  const buildSuggestions = React.useCallback(\n    (queryString: string): string[] => {\n      if (!queryString) {\n        return Object.keys(perProvider);\n      }\n\n      const [token, value] = queryString.split(':');\n      if (token in perProvider) {\n        const {fuse, all} = perProvider[token];\n        const results = value\n          ? fuse.search(value).map((result) => `${token}:${result.item}`)\n          : all.map((value) => `${token}:${value}`);\n\n        // If the querystring is an exact match, don't suggest anything.\n        return results.map((result) => result.toLowerCase()).includes(queryString) ? [] : results;\n      }\n\n      return empty.search(queryString).map((result) => result.item);\n    },\n    [empty, perProvider],\n  );\n\n  const {suggestions, onSelectSuggestion} = useSuggestionsForString(buildSuggestions, value);\n\n  const numResults = suggestions.length;\n  const highlightedResult = suggestions[highlight] || null;\n\n  const onInputChange = React.useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      dispatch({type: 'change-query'});\n      onChange(e.target.value);\n    },\n    [onChange],\n  );\n\n  const onSelect = React.useCallback(\n    (suggestion: string) => {\n      dispatch({type: 'select-suggestion'});\n      onChange(onSelectSuggestion(suggestion));\n    },\n    [onChange, onSelectSuggestion],\n  );\n\n  const onClear = React.useCallback(() => {\n    dispatch({type: 'change-query'});\n    onChange('');\n    inputRef.current?.focus();\n  }, [onChange]);\n\n  const onKeyDown = (e: React.KeyboardEvent) => {\n    const {key} = e;\n    if (key === 'Escape') {\n      dispatch({type: 'hide-popover'});\n      return;\n    }\n\n    if (!numResults) {\n      return;\n    }\n\n    const lastResult = numResults - 1;\n\n    switch (key) {\n      case 'ArrowUp':\n        e.preventDefault();\n        dispatch({type: 'highlight', highlight: highlight === 0 ? lastResult : highlight - 1});\n        break;\n      case 'ArrowDown':\n        e.preventDefault();\n        dispatch({type: 'highlight', highlight: highlight === lastResult ? 0 : highlight + 1});\n        break;\n      case 'Enter':\n        e.preventDefault();\n        if (highlightedResult) {\n          onSelect(highlightedResult);\n        }\n    }\n  };\n  return (\n    <Popover\n      isOpen={shown && suggestions.length > 0}\n      position=\"bottom-left\"\n      content={\n        <Results>\n          {suggestions.map((suggestion, ii) => (\n            <ResultItem\n              key={suggestion}\n              suggestion={suggestion}\n              isHighlight={highlight === ii}\n              onSelect={onSelect}\n            />\n          ))}\n        </Results>\n      }\n    >\n      <FilterInput\n        placeholder=\"Filter\"\n        spellCheck={false}\n        autoCorrect=\"off\"\n        value={value}\n        ref={inputRef}\n        onChange={onInputChange}\n        onFocus={() => dispatch({type: 'show-popover'})}\n        onBlur={() => dispatch({type: 'hide-popover'})}\n        onKeyDown={onKeyDown}\n        rightElement={\n          <ClearButton onClick={onClear}>\n            <Icon name=\"cancel\" />\n          </ClearButton>\n        }\n      />\n    </Popover>\n  );\n};\n\nconst ResultItem: React.FC<{\n  suggestion: string;\n  isHighlight: boolean;\n  onSelect: (suggestion: string) => void;\n}> = (props) => {\n  const {suggestion, isHighlight, onSelect} = props;\n  const element = React.useRef<HTMLLIElement>(null);\n\n  React.useEffect(() => {\n    if (element.current && isHighlight) {\n      element.current.scrollIntoView({block: 'nearest'});\n    }\n  }, [isHighlight]);\n\n  return (\n    <Item\n      ref={element}\n      isHighlight={isHighlight}\n      onMouseDown={(e: React.MouseEvent<any>) => {\n        e.preventDefault();\n        onSelect(suggestion);\n      }}\n    >\n      {suggestion}\n    </Item>\n  );\n};\n\nconst FilterInput = styled(TextInput)`\n  width: 300px;\n`;\n\nconst Results = styled.ul`\n  list-style: none;\n  margin: 0;\n  max-height: 200px;\n  max-width: 800px;\n  min-width: 300px;\n  overflow-y: auto;\n  padding: 4px 0;\n`;\n\ninterface HighlightableTextProps {\n  readonly isHighlight: boolean;\n}\n\nconst Item = styled.li<HighlightableTextProps>`\n  align-items: center;\n  background-color: ${({isHighlight}) => (isHighlight ? Colors.Blue500 : Colors.White)};\n  color: ${({isHighlight}) => (isHighlight ? Colors.White : 'default')};\n  cursor: pointer;\n  display: flex;\n  flex-direction: row;\n  font-size: 12px;\n  list-style: none;\n  margin: 0;\n  padding: 4px 8px;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n\n  &:hover {\n    background-color: ${({isHighlight}) => (isHighlight ? Colors.Blue500 : Colors.Gray100)};\n  }\n`;\n","import * as React from 'react';\n\nexport const useSuggestionsForString = (\n  buildSuggestions: (value: string) => string[],\n  value: string,\n) => {\n  const tokens = value.toLocaleLowerCase().trim().split(/\\s+/);\n  const queryString = tokens[tokens.length - 1] || '';\n\n  const suggestions = React.useMemo(() => buildSuggestions(queryString), [\n    buildSuggestions,\n    queryString,\n  ]);\n\n  const onSelectSuggestion = React.useCallback(\n    (suggestion: string) => {\n      const lastIndex = value.toLocaleLowerCase().lastIndexOf(queryString);\n      if (lastIndex !== -1) {\n        const keep = value.slice(0, lastIndex);\n        return `${keep}${suggestion}`;\n      }\n\n      // Shouldn't really ever fall through to this, since `queryString` should definitely\n      // be the last token in `value`. No-op just in case.\n      return value;\n    },\n    [queryString, value],\n  );\n\n  return React.useMemo(\n    () => ({\n      suggestions,\n      onSelectSuggestion,\n    }),\n    [onSelectSuggestion, suggestions],\n  );\n};\n","import {useMutation} from '@apollo/client';\nimport * as React from 'react';\nimport {useHistory} from 'react-router';\n\nimport {showLaunchError} from '../launchpad/showLaunchError';\nimport {useRepositoryForRun} from '../workspace/useRepositoryForRun';\n\nimport {\n  getReexecutionVariables,\n  handleLaunchResult,\n  LAUNCH_PIPELINE_REEXECUTION_MUTATION,\n  ReExecutionStyle,\n} from './RunUtils';\nimport {\n  LaunchPipelineReexecution,\n  LaunchPipelineReexecutionVariables,\n} from './types/LaunchPipelineReexecution';\nimport {RunFragment} from './types/RunFragment';\n\nexport const useJobReExecution = (run: RunFragment | undefined | null) => {\n  const history = useHistory();\n  const [launchPipelineReexecution] = useMutation<\n    LaunchPipelineReexecution,\n    LaunchPipelineReexecutionVariables\n  >(LAUNCH_PIPELINE_REEXECUTION_MUTATION);\n  const repoMatch = useRepositoryForRun(run);\n\n  return React.useCallback(\n    async (style: ReExecutionStyle) => {\n      if (!run || !run.pipelineSnapshotId || !repoMatch) {\n        return;\n      }\n\n      const variables = getReexecutionVariables({\n        run,\n        style,\n        repositoryLocationName: repoMatch.match.repositoryLocation.name,\n        repositoryName: repoMatch.match.repository.name,\n      });\n\n      try {\n        const result = await launchPipelineReexecution({variables});\n        handleLaunchResult(run.pipelineName, result, history, {\n          preserveQuerystring: true,\n          behavior: 'open',\n        });\n      } catch (error) {\n        showLaunchError(error as Error);\n      }\n    },\n    [history, launchPipelineReexecution, repoMatch, run],\n  );\n};\n","import {tokenizedValueFromString} from '@dagster-io/ui';\n\nimport {useQueryPersistedState} from '../hooks/useQueryPersistedState';\n\nimport {DefaultLogLevels, LogLevel} from './LogLevel';\nimport {LogFilter} from './LogsProvider';\nimport {getRunFilterProviders} from './getRunFilterProviders';\n\nconst DELIMITER = '|';\n\nfunction levelsToQuery(levels: string[]): string {\n  return levels\n    .sort()\n    .map((key) => key.toLowerCase())\n    .join(DELIMITER);\n}\n\nexport const DefaultQuerystring: {[key: string]: string} = {\n  steps: '*',\n  logs: '',\n  levels: levelsToQuery(DefaultLogLevels),\n  hideNonMatches: 'true',\n  focusedTime: '',\n};\n\n/**\n * Query parameter structure, all optional:\n *\n * `steps`\n *   - string (selection syntax)\n *   - Initializes step selection in Gantt chart\n * `logs`\n *   - string (comma-separated foo:bar tokens or free text)\n *   - Initializes log filter input\n * `levels`\n *   - string (comma-separated values)\n *   - Initializes levels in log filter\n * `focusedTime`\n *   - string (unix timestamp with msec)\n *   - Scrolls directly to log with specified time, if no `logs` filter\n */\nexport const decodeRunPageFilters = (qs: {[key: string]: string}) => {\n  const logValues = qs['logs'].split(DELIMITER);\n  const focusedTime = qs['focusedTime'] && !qs['logs'] ? Number(qs['focusedTime']) : null;\n  const hideNonMatches = qs['hideNonMatches'] === 'true' ? true : false;\n\n  const providers = getRunFilterProviders();\n  const logQuery = logValues.map((token) => tokenizedValueFromString(token, providers));\n\n  const levelsValues = qs['levels'].split(DELIMITER);\n\n  return {\n    sinceTime: 0,\n    focusedTime,\n    hideNonMatches,\n    logQuery,\n    levels: levelsValues\n      .map((level) => level.toUpperCase())\n      .filter((level) => LogLevel.hasOwnProperty(level))\n      .reduce((accum, level) => ({...accum, [level]: true}), {}),\n  } as LogFilter;\n};\n\nexport function encodeRunPageFilters(filter: LogFilter) {\n  const logQueryTokenStrings = filter.logQuery.map((v) =>\n    v.token ? `${v.token}:${v.value}` : v.value,\n  );\n\n  return {\n    hideNonMatches: filter.hideNonMatches ? 'true' : 'false',\n    focusedTime: filter.focusedTime || '',\n    logs: logQueryTokenStrings.join(DELIMITER),\n    levels: levelsToQuery(Object.keys(filter.levels).filter((key) => !!filter.levels[key])),\n  };\n}\n\nexport function useQueryPersistedLogFilter() {\n  return useQueryPersistedState<LogFilter>({\n    encode: encodeRunPageFilters,\n    decode: decodeRunPageFilters,\n    defaults: DefaultQuerystring,\n  });\n}\n","import {Box, NonIdealState, FirstOrSecondPanelToggle, SplitPanelContainer} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {showCustomAlert} from '../app/CustomAlertProvider';\nimport {filterByQuery} from '../app/GraphQueryImpl';\nimport {PythonErrorInfo} from '../app/PythonErrorInfo';\nimport {isHiddenAssetGroupJob} from '../asset-graph/Utils';\nimport {GanttChart, GanttChartLoadingState, GanttChartMode, QueuedState} from '../gantt/GanttChart';\nimport {toGraphQueryItems} from '../gantt/toGraphQueryItems';\nimport {useDocumentTitle} from '../hooks/useDocumentTitle';\nimport {useFavicon} from '../hooks/useFavicon';\nimport {useQueryPersistedState} from '../hooks/useQueryPersistedState';\nimport {RunStatus} from '../types/globalTypes';\n\nimport {ComputeLogPanel} from './ComputeLogPanel';\nimport {LogFilter, LogsProvider, LogsProviderLogs} from './LogsProvider';\nimport {LogsScrollingTable} from './LogsScrollingTable';\nimport {LogsToolbar, LogType} from './LogsToolbar';\nimport {RunActionButtons} from './RunActionButtons';\nimport {RunContext} from './RunContext';\nimport {IRunMetadataDict, RunMetadataProvider} from './RunMetadataProvider';\nimport {\n  RunDagsterRunEventFragment,\n  RunDagsterRunEventFragment_ExecutionStepFailureEvent,\n} from './types/RunDagsterRunEventFragment';\nimport {RunFragment} from './types/RunFragment';\nimport {useJobReExecution} from './useJobReExecution';\nimport {useQueryPersistedLogFilter} from './useQueryPersistedLogFilter';\n\ninterface RunProps {\n  runId: string;\n  run?: RunFragment;\n}\n\nconst runStatusFavicon = (status: RunStatus) => {\n  switch (status) {\n    case RunStatus.CANCELED:\n    case RunStatus.CANCELING:\n    case RunStatus.FAILURE:\n      return '/favicon-run-failed.svg';\n    case RunStatus.SUCCESS:\n      return '/favicon-run-success.svg';\n    default:\n      return '/favicon-run-pending.svg';\n  }\n};\n\nexport const Run: React.FC<RunProps> = (props) => {\n  const {run, runId} = props;\n  const [logsFilter, setLogsFilter] = useQueryPersistedLogFilter();\n  const [selectionQuery, setSelectionQuery] = useQueryPersistedState<string>({\n    queryKey: 'selection',\n    defaults: {selection: ''},\n  });\n\n  useFavicon(run ? runStatusFavicon(run.status) : '/favicon.svg');\n  useDocumentTitle(\n    run\n      ? `${!isHiddenAssetGroupJob(run.pipelineName) ? run.pipelineName : ''} ${runId.slice(\n          0,\n          8,\n        )} [${run.status}]`\n      : `Run: ${runId}`,\n  );\n\n  const onShowStateDetails = (stepKey: string, logs: RunDagsterRunEventFragment[]) => {\n    const errorNode = logs.find(\n      (node) => node.__typename === 'ExecutionStepFailureEvent' && node.stepKey === stepKey,\n    ) as RunDagsterRunEventFragment_ExecutionStepFailureEvent;\n\n    if (errorNode) {\n      showCustomAlert({\n        body: <PythonErrorInfo error={errorNode} />,\n      });\n    }\n  };\n\n  const onSetSelectionQuery = (query: string) => {\n    setSelectionQuery(query);\n    setLogsFilter({\n      ...logsFilter,\n      logQuery: query !== '*' ? [{token: 'query', value: query}] : [],\n    });\n  };\n\n  return (\n    <RunContext.Provider value={run}>\n      <LogsProvider key={runId} runId={runId}>\n        {(logs) => (\n          <RunMetadataProvider logs={logs}>\n            {(metadata) => (\n              <RunWithData\n                run={run}\n                runId={runId}\n                logs={logs}\n                logsFilter={logsFilter}\n                metadata={metadata}\n                selectionQuery={selectionQuery}\n                onSetLogsFilter={setLogsFilter}\n                onSetSelectionQuery={onSetSelectionQuery}\n                onShowStateDetails={onShowStateDetails}\n              />\n            )}\n          </RunMetadataProvider>\n        )}\n      </LogsProvider>\n    </RunContext.Provider>\n  );\n};\n\ninterface RunWithDataProps {\n  run?: RunFragment;\n  runId: string;\n  selectionQuery: string;\n  logs: LogsProviderLogs;\n  logsFilter: LogFilter;\n  metadata: IRunMetadataDict;\n  onSetLogsFilter: (v: LogFilter) => void;\n  onSetSelectionQuery: (query: string) => void;\n  onShowStateDetails: (stepKey: string, logs: RunDagsterRunEventFragment[]) => void;\n}\n\nconst logTypeFromQuery = (queryLogType: string) => {\n  switch (queryLogType) {\n    case 'stdout':\n      return LogType.stdout;\n    case 'stderr':\n      return LogType.stderr;\n    default:\n      return LogType.structured;\n  }\n};\n\n/**\n * Note: There are two places we keep a \"step query string\" in the Run view:\n * selectionQuery and logsFilter.logsQuery.\n *\n * - selectionQuery is set when you click around in the Gannt view and is the\n *   selection used for re-execution, etc. When set, we autofill logsFilter.logsQuery.\n *\n * - logsFilter.logsQuery is used for filtering the logs. It can be cleared separately\n *   from the selectionQuery, so you can select a step but navigate elsewhere in the logs.\n *\n * We could revisit this in the future but I believe we iterated quite a bit to get to this\n * solution and we should avoid locking the two filter inputs together completely.\n */\nconst RunWithData: React.FC<RunWithDataProps> = ({\n  run,\n  runId,\n  logs,\n  logsFilter,\n  metadata,\n  selectionQuery,\n  onSetLogsFilter,\n  onSetSelectionQuery,\n}) => {\n  const onLaunch = useJobReExecution(run);\n  const splitPanelContainer = React.createRef<SplitPanelContainer>();\n\n  const [queryLogType, setQueryLogType] = useQueryPersistedState<string>({\n    queryKey: 'logType',\n    defaults: {logType: 'structured'},\n  });\n\n  const [computeLogKey, setComputeLogKey] = useQueryPersistedState<string>({\n    queryKey: 'logKey',\n  });\n\n  const logType = logTypeFromQuery(queryLogType);\n  const setLogType = (lt: LogType) => setQueryLogType(LogType[lt]);\n  const [computeLogUrl, setComputeLogUrl] = React.useState<string | null>(null);\n\n  const stepKeysJSON = JSON.stringify(Object.keys(metadata.steps).sort());\n  const stepKeys = React.useMemo(() => JSON.parse(stepKeysJSON), [stepKeysJSON]);\n\n  const runtimeGraph = run?.executionPlan && toGraphQueryItems(run?.executionPlan, metadata.steps);\n\n  const selectionStepKeys = React.useMemo(() => {\n    return runtimeGraph && selectionQuery && selectionQuery !== '*'\n      ? filterByQuery(runtimeGraph, selectionQuery).all.map((n) => n.name)\n      : [];\n  }, [runtimeGraph, selectionQuery]);\n\n  React.useEffect(() => {\n    if (!stepKeys?.length || computeLogKey) {\n      return;\n    }\n\n    if (metadata.logCaptureSteps) {\n      const logKeys = Object.keys(metadata.logCaptureSteps);\n      const selectedLogKey = logKeys.find((logKey) => {\n        return selectionStepKeys.every(\n          (stepKey) =>\n            metadata.logCaptureSteps && metadata.logCaptureSteps[logKey].stepKeys.includes(stepKey),\n        );\n      });\n      setComputeLogKey(selectedLogKey || logKeys[0]);\n    } else if (!stepKeys.includes(computeLogKey)) {\n      setComputeLogKey(selectionStepKeys.length === 1 ? selectionStepKeys[0] : stepKeys[0]);\n    } else if (selectionStepKeys.length === 1 && computeLogKey !== selectionStepKeys[0]) {\n      setComputeLogKey(selectionStepKeys[0]);\n    }\n  }, [stepKeys, computeLogKey, selectionStepKeys, metadata.logCaptureSteps, setComputeLogKey]);\n\n  const onSetComputeLogKey = (logKey: string) => {\n    setComputeLogKey(logKey);\n  };\n\n  const logsFilterStepKeys = runtimeGraph\n    ? logsFilter.logQuery\n        .filter((v) => v.token && v.token === 'query')\n        .reduce((accum, v) => {\n          return [...accum, ...filterByQuery(runtimeGraph, v.value).all.map((n) => n.name)];\n        }, [] as string[])\n    : [];\n\n  const onClickStep = (stepKey: string, evt: React.MouseEvent<any>) => {\n    const index = selectionStepKeys.indexOf(stepKey);\n    let newSelected: string[];\n    const filterForExactStep = `\"${stepKey}\"`;\n    if (evt.shiftKey) {\n      // shift-click to multi select steps, preserving quotations if present\n      newSelected = [\n        ...selectionStepKeys.map((k) => (selectionQuery.includes(`\"${k}\"`) ? `\"${k}\"` : k)),\n      ];\n\n      if (index !== -1) {\n        // deselect the step if already selected\n        newSelected.splice(index, 1);\n      } else {\n        // select the step otherwise\n        newSelected.push(filterForExactStep);\n      }\n    } else {\n      if (selectionStepKeys.length === 1 && index !== -1) {\n        // deselect the step if already selected\n        newSelected = [];\n      } else {\n        // select the step otherwise\n        newSelected = [filterForExactStep];\n\n        // When only one step is selected, set the compute log key as well.\n        setComputeLogKey(stepKey);\n      }\n    }\n\n    onSetSelectionQuery(newSelected.join(', ') || '*');\n  };\n\n  const gantt = (metadata: IRunMetadataDict) => {\n    if (!run) {\n      return <GanttChartLoadingState runId={runId} />;\n    }\n\n    if (run.status === 'QUEUED') {\n      return <QueuedState run={run} />;\n    }\n\n    if (run.executionPlan && runtimeGraph) {\n      return (\n        <GanttChart\n          options={{\n            mode: GanttChartMode.WATERFALL_TIMED,\n          }}\n          toolbarActions={\n            <Box flex={{direction: 'row', alignItems: 'center', gap: 12}}>\n              <FirstOrSecondPanelToggle axis=\"vertical\" container={splitPanelContainer} />\n              <RunActionButtons\n                run={run}\n                onLaunch={onLaunch}\n                graph={runtimeGraph}\n                metadata={metadata}\n                selection={{query: selectionQuery, keys: selectionStepKeys}}\n              />\n            </Box>\n          }\n          runId={runId}\n          graph={runtimeGraph}\n          metadata={metadata}\n          selection={{query: selectionQuery, keys: selectionStepKeys}}\n          onClickStep={onClickStep}\n          onSetSelection={onSetSelectionQuery}\n          focusedTime={logsFilter.focusedTime}\n        />\n      );\n    }\n\n    return <NonIdealState icon=\"error\" title=\"Unable to build execution plan\" />;\n  };\n\n  return (\n    <>\n      <SplitPanelContainer\n        ref={splitPanelContainer}\n        axis=\"vertical\"\n        identifier=\"run-gantt\"\n        firstInitialPercent={35}\n        firstMinSize={56}\n        first={gantt(metadata)}\n        second={\n          <LogsContainer>\n            <LogsToolbar\n              logType={logType}\n              onSetLogType={setLogType}\n              filter={logsFilter}\n              onSetFilter={onSetLogsFilter}\n              steps={stepKeys}\n              metadata={metadata}\n              computeLogKey={computeLogKey}\n              onSetComputeLogKey={onSetComputeLogKey}\n              computeLogUrl={computeLogUrl}\n              counts={logs.counts}\n            />\n            {logType !== LogType.structured ? (\n              <ComputeLogPanel\n                runId={runId}\n                stepKeys={stepKeys}\n                computeLogKey={computeLogKey}\n                ioType={LogType[logType]}\n                setComputeLogUrl={setComputeLogUrl}\n              />\n            ) : (\n              <LogsScrollingTable\n                logs={logs}\n                filter={logsFilter}\n                filterStepKeys={logsFilterStepKeys}\n                filterKey={`${JSON.stringify(logsFilter)}`}\n                metadata={metadata}\n              />\n            )}\n          </LogsContainer>\n        }\n      />\n    </>\n  );\n};\n\nconst LogsContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n`;\n","import * as React from 'react';\n\nexport const useFavicon = (href: string) => {\n  React.useEffect(() => {\n    const el = document.querySelector('link[rel=\"icon\"][type=\"image/svg+xml\"]');\n    if (!el) {\n      return;\n    }\n    const previousHref = el.getAttribute('href');\n    el.setAttribute('href', href);\n    return () => {\n      if (previousHref) {\n        el.setAttribute('href', previousHref);\n      }\n    };\n  }, [href]);\n};\n","import {gql, useQuery} from '@apollo/client';\nimport {Box, NonIdealState, PageHeader, Popover, Tag, Heading, FontFamily} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {useParams} from 'react-router-dom';\n\nimport {formatElapsedTime} from '../app/Util';\nimport {isHiddenAssetGroupJob} from '../asset-graph/Utils';\nimport {PipelineReference} from '../pipelines/PipelineReference';\nimport {TimestampDisplay} from '../schedules/TimestampDisplay';\nimport {isThisThingAJob} from '../workspace/WorkspaceContext';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\nimport {useRepositoryForRun} from '../workspace/useRepositoryForRun';\n\nimport {Run} from './Run';\nimport {RunAssetKeyTags} from './RunAssetKeyTags';\nimport {RunConfigDialog, RunDetails} from './RunDetails';\nimport {RunFragments} from './RunFragments';\nimport {RunStatusTag} from './RunStatusTag';\nimport {assetKeysForRun} from './RunUtils';\nimport {RunRootQuery, RunRootQueryVariables} from './types/RunRootQuery';\n\nexport const RunRoot = () => {\n  const {runId} = useParams<{runId: string}>();\n\n  const {data, loading} = useQuery<RunRootQuery, RunRootQueryVariables>(RUN_ROOT_QUERY, {\n    fetchPolicy: 'cache-and-network',\n    partialRefetch: true,\n    variables: {runId},\n  });\n\n  const run = data?.pipelineRunOrError.__typename === 'Run' ? data.pipelineRunOrError : null;\n  const snapshotID = run?.pipelineSnapshotId;\n\n  const repoMatch = useRepositoryForRun(run);\n  const repoAddress = repoMatch?.match\n    ? buildRepoAddress(repoMatch.match.repository.name, repoMatch.match.repositoryLocation.name)\n    : null;\n\n  const isJob = React.useMemo(\n    () => !!(run && repoMatch && isThisThingAJob(repoMatch.match, run.pipelineName)),\n    [run, repoMatch],\n  );\n\n  return (\n    <div\n      style={{\n        display: 'flex',\n        flexDirection: 'column',\n        minWidth: 0,\n        width: '100%',\n        height: '100%',\n        overflow: 'hidden',\n      }}\n    >\n      <Box\n        flex={{direction: 'row', alignItems: 'flex-start'}}\n        style={{\n          position: 'relative',\n          zIndex: 1,\n        }}\n      >\n        <PageHeader\n          title={\n            <Heading style={{fontFamily: FontFamily.monospace, fontSize: '20px'}}>\n              {runId.slice(0, 8)}\n            </Heading>\n          }\n          tags={\n            run ? (\n              <>\n                <RunStatusTag status={run.status} />\n                {isHiddenAssetGroupJob(run.pipelineName) ? (\n                  <RunAssetKeyTags assetKeys={assetKeysForRun(run)} clickableTags />\n                ) : (\n                  <>\n                    <Tag icon=\"run\">\n                      Run of{' '}\n                      <PipelineReference\n                        pipelineName={run?.pipelineName}\n                        pipelineHrefContext={repoAddress || 'repo-unknown'}\n                        snapshotId={snapshotID}\n                        size=\"small\"\n                        isJob={isJob}\n                      />\n                    </Tag>\n                    <RunAssetKeyTags assetKeys={run.assets.map((a) => a.key)} clickableTags />\n                  </>\n                )}\n                <Box flex={{direction: 'row', alignItems: 'flex-start', gap: 12, wrap: 'wrap'}}>\n                  {run?.startTime ? (\n                    <Popover\n                      interactionKind=\"hover\"\n                      placement=\"bottom\"\n                      content={\n                        <Box padding={16}>\n                          <RunDetails run={run} loading={loading} />\n                        </Box>\n                      }\n                    >\n                      <Tag icon=\"schedule\">\n                        <TimestampDisplay\n                          timestamp={run.startTime}\n                          timeFormat={{showSeconds: true, showTimezone: false}}\n                        />\n                      </Tag>\n                    </Popover>\n                  ) : run.updateTime ? (\n                    <Tag icon=\"schedule\">\n                      <TimestampDisplay\n                        timestamp={run.updateTime}\n                        timeFormat={{showSeconds: true, showTimezone: false}}\n                      />\n                    </Tag>\n                  ) : undefined}\n                  {run?.startTime && run?.endTime ? (\n                    <Popover\n                      interactionKind=\"hover\"\n                      placement=\"bottom\"\n                      content={\n                        <Box padding={16}>\n                          <RunDetails run={run} loading={loading} />\n                        </Box>\n                      }\n                    >\n                      <Tag icon=\"timer\">\n                        <span style={{fontVariantNumeric: 'tabular-nums'}}>\n                          {run?.startTime\n                            ? formatElapsedTime(\n                                (run?.endTime * 1000 || Date.now()) - run?.startTime * 1000,\n                              )\n                            : ''}\n                        </span>\n                      </Tag>\n                    </Popover>\n                  ) : null}\n                </Box>\n              </>\n            ) : null\n          }\n          right={run ? <RunConfigDialog run={run} isJob={isJob} /> : null}\n        />\n      </Box>\n      <RunById data={data} runId={runId} />\n    </div>\n  );\n};\n\nconst RunById: React.FC<{data: RunRootQuery | undefined; runId: string}> = (props) => {\n  const {data, runId} = props;\n\n  if (!data || !data.pipelineRunOrError) {\n    return <Run run={undefined} runId={runId} />;\n  }\n\n  if (data.pipelineRunOrError.__typename !== 'Run') {\n    return (\n      <Box padding={{vertical: 64}}>\n        <NonIdealState\n          icon=\"error\"\n          title=\"No run found\"\n          description=\"The run with this ID does not exist or has been cleaned up.\"\n        />\n      </Box>\n    );\n  }\n\n  return <Run run={data.pipelineRunOrError} runId={runId} />;\n};\n\nconst RUN_ROOT_QUERY = gql`\n  query RunRootQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      __typename\n      ... on Run {\n        id\n        ...RunFragment\n      }\n    }\n  }\n\n  ${RunFragments.RunFragment}\n`;\n","import {gql, useQuery} from '@apollo/client';\n\nimport {InstanceConfigHasInfo} from './types/InstanceConfigHasInfo';\n\nexport const useCanSeeConfig = () => {\n  const {data} = useQuery<InstanceConfigHasInfo>(INSTANCE_CONFIG_HAS_INFO);\n  return !!data?.instance.hasInfo;\n};\n\nconst INSTANCE_CONFIG_HAS_INFO = gql`\n  query InstanceConfigHasInfo {\n    instance {\n      hasInfo\n    }\n  }\n`;\n","import {gql, useQuery} from '@apollo/client';\nimport {Alert, Box, ButtonLink, Colors, Group} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {showCustomAlert} from '../app/CustomAlertProvider';\nimport {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorInfo';\nimport {FIFTEEN_SECONDS, useQueryRefreshAtInterval} from '../app/QueryRefresh';\nimport {INSTANCE_HEALTH_FRAGMENT} from '../instance/InstanceHealthFragment';\nimport {REPOSITORY_SCHEDULES_FRAGMENT} from '../schedules/ScheduleUtils';\nimport {SchedulerInfo} from '../schedules/SchedulerInfo';\nimport {SchedulesNextTicks} from '../schedules/SchedulesNextTicks';\nimport {Loading} from '../ui/Loading';\n\nimport {SchedulerInfoQuery} from './types/SchedulerInfoQuery';\n\nexport const AllScheduledTicks = () => {\n  const queryResult = useQuery<SchedulerInfoQuery>(SCHEDULER_INFO_QUERY, {\n    fetchPolicy: 'cache-and-network',\n    partialRefetch: true,\n    notifyOnNetworkStatusChange: true,\n  });\n\n  useQueryRefreshAtInterval(queryResult, FIFTEEN_SECONDS);\n\n  return (\n    <Loading queryResult={queryResult}>\n      {(result) => {\n        const {repositoriesOrError, instance} = result;\n        if (repositoriesOrError.__typename === 'PythonError') {\n          const message = repositoriesOrError.message;\n          return (\n            <Alert\n              intent=\"warning\"\n              title={\n                <Group direction=\"row\" spacing={4}>\n                  <div>Could not load scheduled ticks.</div>\n                  <ButtonLink\n                    color={Colors.Link}\n                    underline=\"always\"\n                    onClick={() => {\n                      showCustomAlert({\n                        title: 'Python error',\n                        body: message,\n                      });\n                    }}\n                  >\n                    View error\n                  </ButtonLink>\n                </Group>\n              }\n            />\n          );\n        }\n        return (\n          <div>\n            <Box\n              padding={{horizontal: 24, vertical: 16}}\n              border={{side: 'bottom', width: 1, color: Colors.KeylineGray}}\n            >\n              <SchedulerInfo daemonHealth={instance.daemonHealth} />\n            </Box>\n            <SchedulesNextTicks repos={repositoriesOrError.nodes} />\n          </div>\n        );\n      }}\n    </Loading>\n  );\n};\n\nconst SCHEDULER_INFO_QUERY = gql`\n  query SchedulerInfoQuery {\n    instance {\n      ...InstanceHealthFragment\n    }\n    repositoriesOrError {\n      ... on RepositoryConnection {\n        nodes {\n          __typename\n          id\n          ... on Repository {\n            ...RepositorySchedulesFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n  ${INSTANCE_HEALTH_FRAGMENT}\n  ${REPOSITORY_SCHEDULES_FRAGMENT}\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n","import {ApolloError, gql, useQuery} from '@apollo/client';\nimport {\n  Alert,\n  Box,\n  Colors,\n  CursorHistoryControls,\n  NonIdealState,\n  Page,\n  PageHeader,\n  Tab,\n  Tabs,\n  Tag,\n  Heading,\n  TokenizingFieldValue,\n  tokenToString,\n} from '@dagster-io/ui';\nimport isEqual from 'lodash/isEqual';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\n\nimport {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorInfo';\nimport {\n  FIFTEEN_SECONDS,\n  QueryRefreshCountdown,\n  useQueryRefreshAtInterval,\n} from '../app/QueryRefresh';\nimport {useDocumentTitle} from '../hooks/useDocumentTitle';\nimport {useCanSeeConfig} from '../instance/useCanSeeConfig';\nimport {RunStatus} from '../types/globalTypes';\nimport {Loading} from '../ui/Loading';\nimport {StickyTableContainer} from '../ui/StickyTableContainer';\n\nimport {AllScheduledTicks} from './AllScheduledTicks';\nimport {doneStatuses, inProgressStatuses, queuedStatuses} from './RunStatuses';\nimport {RunTable, RUN_TABLE_RUN_FRAGMENT} from './RunTable';\nimport {RunsQueryRefetchContext} from './RunUtils';\nimport {\n  RunFilterTokenType,\n  RunsFilterInput,\n  runsFilterForSearchTokens,\n  useQueryPersistedRunFilters,\n  RunFilterToken,\n} from './RunsFilterInput';\nimport {QueueDaemonStatusQuery} from './types/QueueDaemonStatusQuery';\nimport {RunsRootQuery, RunsRootQueryVariables} from './types/RunsRootQuery';\nimport {useCursorPaginatedQuery} from './useCursorPaginatedQuery';\n\nconst PAGE_SIZE = 25;\n\nconst selectedTabId = (filterTokens: TokenizingFieldValue[]) => {\n  const statusTokens = new Set(\n    filterTokens.filter((token) => token.token === 'status').map((token) => token.value),\n  );\n  if (isEqual(queuedStatuses, statusTokens)) {\n    return 'queued';\n  }\n  if (isEqual(inProgressStatuses, statusTokens)) {\n    return 'in-progress';\n  }\n  if (isEqual(doneStatuses, statusTokens)) {\n    return 'done';\n  }\n  return 'all';\n};\n\nexport const RunsRoot = () => {\n  useDocumentTitle('Runs');\n  const [filterTokens, setFilterTokens] = useQueryPersistedRunFilters();\n  const filter = runsFilterForSearchTokens(filterTokens);\n  const [showScheduled, setShowScheduled] = React.useState(false);\n  const canSeeConfig = useCanSeeConfig();\n\n  const {queryResult, paginationProps} = useCursorPaginatedQuery<\n    RunsRootQuery,\n    RunsRootQueryVariables\n  >({\n    nextCursorForResult: (runs) => {\n      if (runs.pipelineRunsOrError.__typename !== 'Runs') {\n        return undefined;\n      }\n      return runs.pipelineRunsOrError.results[PAGE_SIZE - 1]?.runId;\n    },\n    getResultArray: (data) => {\n      if (!data || data.pipelineRunsOrError.__typename !== 'Runs') {\n        return [];\n      }\n      return data.pipelineRunsOrError.results;\n    },\n    variables: {\n      filter,\n      queuedFilter: {...filter, statuses: Array.from(queuedStatuses)},\n      inProgressFilter: {...filter, statuses: Array.from(inProgressStatuses)},\n    },\n    query: RUNS_ROOT_QUERY,\n    pageSize: PAGE_SIZE,\n  });\n  const refreshState = useQueryRefreshAtInterval(queryResult, FIFTEEN_SECONDS);\n\n  const selectedTab = showScheduled ? 'scheduled' : selectedTabId(filterTokens);\n  const staticStatusTags = selectedTab !== 'all';\n\n  const setStatusFilter = (statuses: RunStatus[]) => {\n    const tokensMinusStatus = filterTokens.filter((token) => token.token !== 'status');\n    const statusTokens = statuses.map((status) => ({token: 'status' as const, value: status}));\n    setFilterTokens([...statusTokens, ...tokensMinusStatus]);\n    setShowScheduled(false);\n  };\n\n  const setFilterTokensWithStatus = React.useCallback(\n    (tokens) => {\n      if (staticStatusTags) {\n        const statusTokens = filterTokens.filter((token) => token.token === 'status');\n        setFilterTokens([...statusTokens, ...tokens]);\n      } else {\n        setFilterTokens(tokens);\n      }\n    },\n    [filterTokens, setFilterTokens, staticStatusTags],\n  );\n\n  const onAddTag = React.useCallback(\n    (token: RunFilterToken) => {\n      const tokenAsString = tokenToString(token);\n      if (!filterTokens.some((token) => tokenToString(token) === tokenAsString)) {\n        setFilterTokensWithStatus([...filterTokens, token]);\n      }\n    },\n    [filterTokens, setFilterTokensWithStatus],\n  );\n\n  const enabledFilters = React.useMemo(() => {\n    const filters: RunFilterTokenType[] = ['tag', 'snapshotId', 'id', 'job', 'pipeline'];\n\n    if (!staticStatusTags) {\n      filters.push('status');\n    }\n\n    return filters;\n  }, [staticStatusTags]);\n\n  const mutableTokens = React.useMemo(() => {\n    if (staticStatusTags) {\n      return filterTokens.filter((token) => token.token !== 'status');\n    }\n    return filterTokens;\n  }, [filterTokens, staticStatusTags]);\n\n  return (\n    <Page>\n      <PageHeader\n        title={<Heading>Runs</Heading>}\n        tabs={\n          <Box flex={{direction: 'row', justifyContent: 'space-between', alignItems: 'flex-end'}}>\n            <Tabs selectedTabId={selectedTab} id=\"run-tabs\">\n              <Tab title=\"All runs\" onClick={() => setStatusFilter([])} id=\"all\" />\n              <Tab\n                title=\"Queued\"\n                count={\n                  queryResult.data?.queuedCount?.__typename === 'Runs'\n                    ? queryResult.data?.queuedCount.count\n                    : 'indeterminate'\n                }\n                onClick={() => setStatusFilter(Array.from(queuedStatuses))}\n                id=\"queued\"\n              />\n              <Tab\n                title=\"In progress\"\n                count={\n                  queryResult.data?.inProgressCount?.__typename === 'Runs'\n                    ? queryResult.data?.inProgressCount.count\n                    : 'indeterminate'\n                }\n                onClick={() => setStatusFilter(Array.from(inProgressStatuses))}\n                id=\"in-progress\"\n              />\n              <Tab\n                title=\"Done\"\n                onClick={() => setStatusFilter(Array.from(doneStatuses))}\n                id=\"done\"\n              />\n              <Tab title=\"Scheduled\" onClick={() => setShowScheduled(true)} id=\"scheduled\" />\n            </Tabs>\n            <Box padding={{bottom: 8}}>\n              <QueryRefreshCountdown refreshState={refreshState} />\n            </Box>\n          </Box>\n        }\n      />\n      {selectedTab === 'queued' && canSeeConfig ? (\n        <Box\n          flex={{direction: 'column', gap: 8}}\n          padding={{horizontal: 24, vertical: 16}}\n          border={{side: 'bottom', width: 1, color: Colors.KeylineGray}}\n        >\n          <Alert\n            intent=\"info\"\n            title={<Link to=\"/instance/config#run_coordinator\">View queue configuration</Link>}\n          />\n          <QueueDaemonAlert />\n        </Box>\n      ) : null}\n      <RunsQueryRefetchContext.Provider value={{refetch: queryResult.refetch}}>\n        <Loading\n          queryResult={queryResult}\n          allowStaleData\n          renderError={(error: ApolloError) => {\n            // In this case, a 400 is most likely due to invalid run filters, which are a GraphQL\n            // validation error but surfaced as a 400.\n            const badRequest = !!(\n              error?.networkError &&\n              'statusCode' in error.networkError &&\n              error.networkError.statusCode === 400\n            );\n            return (\n              <Box\n                flex={{direction: 'column', gap: 32}}\n                padding={{vertical: 8, left: 24, right: 12}}\n              >\n                <RunsFilterInput\n                  tokens={mutableTokens}\n                  onChange={setFilterTokensWithStatus}\n                  loading={queryResult.loading}\n                  enabledFilters={enabledFilters}\n                />\n                <NonIdealState\n                  icon=\"warning\"\n                  title={badRequest ? 'Invalid run filters' : 'Unexpected error'}\n                  description={\n                    badRequest\n                      ? 'The specified run filters are not valid. Please check the filters and try again.'\n                      : 'An unexpected error occurred. Check the console for details.'\n                  }\n                />\n              </Box>\n            );\n          }}\n        >\n          {({pipelineRunsOrError}) => {\n            if (pipelineRunsOrError.__typename !== 'Runs') {\n              return (\n                <Box padding={{vertical: 64}}>\n                  <NonIdealState\n                    icon=\"error\"\n                    title=\"Query Error\"\n                    description={pipelineRunsOrError.message}\n                  />\n                </Box>\n              );\n            }\n\n            if (showScheduled) {\n              return <AllScheduledTicks />;\n            }\n\n            return (\n              <>\n                <StickyTableContainer $top={0}>\n                  <RunTable\n                    runs={pipelineRunsOrError.results.slice(0, PAGE_SIZE)}\n                    onAddTag={onAddTag}\n                    filter={filter}\n                    actionBarComponents={\n                      showScheduled ? null : (\n                        <Box flex={{direction: 'column', gap: 8}}>\n                          {selectedTab !== 'all' ? (\n                            <Box flex={{direction: 'row', gap: 8}}>\n                              {filterTokens\n                                .filter((token) => token.token === 'status')\n                                .map(({token, value}) => (\n                                  <Tag key={token}>{`${token}:${value}`}</Tag>\n                                ))}\n                            </Box>\n                          ) : null}\n                          <RunsFilterInput\n                            tokens={mutableTokens}\n                            onChange={setFilterTokensWithStatus}\n                            loading={queryResult.loading}\n                            enabledFilters={enabledFilters}\n                          />\n                        </Box>\n                      )\n                    }\n                  />\n                </StickyTableContainer>\n                {pipelineRunsOrError.results.length > 0 ? (\n                  <div style={{marginTop: '16px'}}>\n                    <CursorHistoryControls {...paginationProps} />\n                  </div>\n                ) : null}\n              </>\n            );\n          }}\n        </Loading>\n      </RunsQueryRefetchContext.Provider>\n    </Page>\n  );\n};\n\nconst COUNT_FRAGMENT = gql`\n  fragment CountFragment on Runs {\n    count\n  }\n`;\n\nconst RUNS_ROOT_QUERY = gql`\n  query RunsRootQuery(\n    $limit: Int\n    $cursor: String\n    $filter: RunsFilter!\n    $queuedFilter: RunsFilter!\n    $inProgressFilter: RunsFilter!\n  ) {\n    pipelineRunsOrError(limit: $limit, cursor: $cursor, filter: $filter) {\n      ... on Runs {\n        results {\n          id\n          ...RunTableRunFragment\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n    queuedCount: pipelineRunsOrError(filter: $queuedFilter) {\n      ...CountFragment\n    }\n    inProgressCount: pipelineRunsOrError(filter: $inProgressFilter) {\n      ...CountFragment\n    }\n  }\n\n  ${RUN_TABLE_RUN_FRAGMENT}\n  ${COUNT_FRAGMENT}\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n\nconst QueueDaemonAlert = () => {\n  const {data} = useQuery<QueueDaemonStatusQuery>(QUEUE_DAEMON_STATUS_QUERY);\n  const status = data?.instance.daemonHealth.daemonStatus;\n  if (status?.required && !status?.healthy) {\n    return (\n      <Alert\n        intent=\"warning\"\n        title=\"The queued run coordinator is not healthy.\"\n        description={\n          <div>\n            View <Link to=\"/instance/health\">Instance status</Link> for details.\n          </div>\n        }\n      />\n    );\n  }\n  return null;\n};\n\nconst QUEUE_DAEMON_STATUS_QUERY = gql`\n  query QueueDaemonStatusQuery {\n    instance {\n      daemonHealth {\n        id\n        daemonStatus(daemonType: \"QUEUED_RUN_COORDINATOR\") {\n          id\n          daemonType\n          healthy\n          required\n        }\n      }\n    }\n  }\n`;\n","import {gql, useQuery} from '@apollo/client';\nimport {PageHeader, Tabs, Tag, Heading, FontFamily} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\n\nimport {explorerPathToString, ExplorerPath} from '../pipelines/PipelinePathUtils';\nimport {TabLink} from '../ui/TabLink';\nimport {useActivePipelineForName} from '../workspace/WorkspaceContext';\nimport {workspacePipelinePathGuessRepo} from '../workspace/workspacePath';\n\nimport {SnapshotQuery, SnapshotQueryVariables} from './types/SnapshotQuery';\n\nconst SNAPSHOT_PARENT_QUERY = gql`\n  query SnapshotQuery($snapshotId: String!) {\n    pipelineSnapshotOrError(snapshotId: $snapshotId) {\n      ... on PipelineSnapshot {\n        id\n        parentSnapshotId\n      }\n    }\n  }\n`;\n\ninterface SnapshotNavProps {\n  activeTab?: string;\n  explorerPath: ExplorerPath;\n}\n\nexport const SnapshotNav = (props: SnapshotNavProps) => {\n  const {activeTab = '', explorerPath} = props;\n  const {pipelineName, snapshotId = ''} = explorerPath;\n  const explorerPathString = explorerPathToString({\n    ...explorerPath,\n    opNames: [],\n  });\n\n  const currentPipelineState = useActivePipelineForName(pipelineName);\n  const isJob = !!currentPipelineState?.isJob;\n  const currentSnapshotID = currentPipelineState?.pipelineSnapshotId;\n\n  const {data, loading} = useQuery<SnapshotQuery, SnapshotQueryVariables>(SNAPSHOT_PARENT_QUERY, {\n    variables: {snapshotId},\n  });\n\n  const tag = () => {\n    if (loading) {\n      return (\n        <Tag intent=\"none\" minimal>\n          ...\n        </Tag>\n      );\n    }\n\n    if (\n      !currentSnapshotID ||\n      (currentSnapshotID !== snapshotId &&\n        data?.pipelineSnapshotOrError.__typename === 'PipelineSnapshot' &&\n        data?.pipelineSnapshotOrError?.parentSnapshotId !== currentSnapshotID)\n    ) {\n      return (\n        <Tag intent=\"warning\" minimal>\n          Snapshot\n        </Tag>\n      );\n    }\n\n    return (\n      <Tag intent=\"success\" minimal>\n        Current\n      </Tag>\n    );\n  };\n\n  const tabs = [\n    {\n      text: 'Definition',\n      pathComponent: '',\n      href: `/instance/snapshots/${explorerPathString}`,\n    },\n    {\n      text: 'Runs',\n      pathComponent: 'runs',\n      href: `/instance/snapshots/${explorerPathString}runs`,\n    },\n  ];\n\n  return (\n    <PageHeader\n      title={\n        <Heading style={{fontFamily: FontFamily.monospace, fontSize: '20px'}}>\n          {explorerPath.snapshotId?.slice(0, 8)}\n        </Heading>\n      }\n      tags={\n        <>\n          <Tag icon=\"schema\">\n            Snapshot of{' '}\n            <Link to={workspacePipelinePathGuessRepo(explorerPath.pipelineName, isJob)}>\n              {explorerPath.pipelineName}\n            </Link>\n          </Tag>\n          {tag()}\n        </>\n      }\n      tabs={\n        <Tabs selectedTabId={activeTab}>\n          {tabs.map((tab) => {\n            const {href, text, pathComponent} = tab;\n            return <TabLink key={text} id={pathComponent} title={text} to={href} />;\n          })}\n        </Tabs>\n      }\n    />\n  );\n};\n","import * as React from 'react';\nimport {Route, Switch, useParams} from 'react-router-dom';\n\nimport {PipelineExplorerSnapshotRoot} from '../pipelines/PipelineExplorerRoot';\nimport {explorerPathFromString} from '../pipelines/PipelinePathUtils';\nimport {PipelineRunsRoot} from '../pipelines/PipelineRunsRoot';\n\nimport {SnapshotNav} from './SnapshotNav';\n\nexport const SnapshotRoot = () => {\n  const {pipelinePath, tab} = useParams<{\n    pipelinePath: string;\n    tab?: string;\n  }>();\n  const explorerPath = explorerPathFromString(pipelinePath);\n\n  return (\n    <div\n      style={{\n        display: 'flex',\n        flexDirection: 'column',\n        minWidth: 0,\n        width: '100%',\n        height: '100%',\n      }}\n    >\n      <SnapshotNav activeTab={tab} explorerPath={explorerPath} />\n      <Switch>\n        <Route path=\"/instance/snapshots/:pipelinePath/runs\">\n          <PipelineRunsRoot />\n        </Route>\n        <Route path=\"/instance/snapshots/(/?.*)\">\n          <PipelineExplorerSnapshotRoot />\n        </Route>\n      </Switch>\n    </div>\n  );\n};\n","import {QueryResult} from '@apollo/client';\nimport {Box, Tabs} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {QueryRefreshCountdown, QueryRefreshState} from '../app/QueryRefresh';\nimport {TabLink} from '../ui/TabLink';\n\nimport {useCanSeeConfig} from './useCanSeeConfig';\n\ninterface Props<TData> {\n  refreshState: QueryRefreshState;\n  queryData?: QueryResult<TData, any>;\n  tab: string;\n}\n\nexport const InstanceTabContext = React.createContext({healthTitle: 'Daemons'});\n\nexport const InstanceTabs = <TData extends Record<string, any>>(props: Props<TData>) => {\n  const {healthTitle} = React.useContext(InstanceTabContext);\n  const {refreshState, tab} = props;\n  const canSeeConfig = useCanSeeConfig();\n\n  return (\n    <Box flex={{direction: 'row', justifyContent: 'space-between', alignItems: 'flex-end'}}>\n      <Tabs selectedTabId={tab}>\n        <TabLink id=\"overview\" title=\"Overview\" to=\"/instance/overview\" />\n        <TabLink id=\"health\" title={healthTitle} to=\"/instance/health\" />\n        <TabLink id=\"schedules\" title=\"Schedules\" to=\"/instance/schedules\" />\n        <TabLink id=\"sensors\" title=\"Sensors\" to=\"/instance/sensors\" />\n        <TabLink id=\"backfills\" title=\"Backfills\" to=\"/instance/backfills\" />\n        {canSeeConfig ? <TabLink id=\"config\" title=\"Configuration\" to=\"/instance/config\" /> : null}\n      </Tabs>\n      {refreshState ? (\n        <Box padding={{bottom: 8}}>\n          <QueryRefreshCountdown refreshState={refreshState} />\n        </Box>\n      ) : null}\n    </Box>\n  );\n};\n","import {gql, useQuery} from '@apollo/client';\nimport {\n  Alert,\n  Box,\n  CursorPaginationControls,\n  NonIdealState,\n  PageHeader,\n  Heading,\n} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {PythonErrorInfo, PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorInfo';\nimport {FIFTEEN_SECONDS, useQueryRefreshAtInterval} from '../app/QueryRefresh';\nimport {useDocumentTitle} from '../hooks/useDocumentTitle';\nimport {useCursorPaginatedQuery} from '../runs/useCursorPaginatedQuery';\nimport {Loading} from '../ui/Loading';\n\nimport {BACKFILL_TABLE_FRAGMENT, BackfillTable} from './BackfillTable';\nimport {INSTANCE_HEALTH_FRAGMENT} from './InstanceHealthFragment';\nimport {InstanceTabs} from './InstanceTabs';\nimport {\n  InstanceBackfillsQuery,\n  InstanceBackfillsQueryVariables,\n} from './types/InstanceBackfillsQuery';\nimport {InstanceHealthForBackfillsQuery} from './types/InstanceHealthForBackfillsQuery';\n\nconst PAGE_SIZE = 25;\n\nexport const InstanceBackfills = () => {\n  const queryData = useQuery<InstanceHealthForBackfillsQuery>(INSTANCE_HEALTH_FOR_BACKFILLS_QUERY);\n\n  const {queryResult, paginationProps} = useCursorPaginatedQuery<\n    InstanceBackfillsQuery,\n    InstanceBackfillsQueryVariables\n  >({\n    query: BACKFILLS_QUERY,\n    variables: {},\n    pageSize: PAGE_SIZE,\n    nextCursorForResult: (result) =>\n      result.partitionBackfillsOrError.__typename === 'PartitionBackfills'\n        ? result.partitionBackfillsOrError.results[PAGE_SIZE - 1]?.backfillId\n        : undefined,\n    getResultArray: (result) =>\n      result?.partitionBackfillsOrError.__typename === 'PartitionBackfills'\n        ? result.partitionBackfillsOrError.results\n        : [],\n  });\n  const refreshState = useQueryRefreshAtInterval(queryResult, FIFTEEN_SECONDS);\n  useDocumentTitle('Backfills');\n\n  return (\n    <>\n      <PageHeader\n        title={<Heading>Instance status</Heading>}\n        tabs={<InstanceTabs tab=\"backfills\" refreshState={refreshState} />}\n      />\n      <Loading queryResult={queryResult} allowStaleData={true}>\n        {({partitionBackfillsOrError}) => {\n          if (partitionBackfillsOrError.__typename === 'PythonError') {\n            return <PythonErrorInfo error={partitionBackfillsOrError} />;\n          }\n\n          if (!partitionBackfillsOrError.results.length) {\n            return (\n              <Box padding={{vertical: 64}}>\n                <NonIdealState\n                  icon=\"no-results\"\n                  title=\"No backfills found\"\n                  description={<p>This instance does not have any backfill jobs.</p>}\n                />\n              </Box>\n            );\n          }\n\n          const daemonHealths = queryData.data?.instance.daemonHealth.allDaemonStatuses || [];\n          const backfillHealths = daemonHealths\n            .filter((daemon) => daemon.daemonType === 'BACKFILL')\n            .map((daemon) => daemon.required && daemon.healthy);\n          const isBackfillHealthy = backfillHealths.length && backfillHealths.every((x) => x);\n\n          return (\n            <div>\n              {isBackfillHealthy ? null : (\n                <Box padding={{horizontal: 24, vertical: 16}}>\n                  <Alert\n                    intent=\"warning\"\n                    title=\"The backfill daemon is not running.\"\n                    description={\n                      <div>\n                        See the{' '}\n                        <a\n                          href=\"https://docs.dagster.io/deployment/dagster-daemon\"\n                          target=\"_blank\"\n                          rel=\"noreferrer\"\n                        >\n                          dagster-daemon documentation\n                        </a>{' '}\n                        for more information on how to deploy the dagster-daemon process.\n                      </div>\n                    }\n                  />\n                </Box>\n              )}\n              <BackfillTable\n                backfills={partitionBackfillsOrError.results.slice(0, PAGE_SIZE)}\n                refetch={queryResult.refetch}\n              />\n              {partitionBackfillsOrError.results.length > 0 ? (\n                <div style={{marginTop: '16px'}}>\n                  <CursorPaginationControls {...paginationProps} />\n                </div>\n              ) : null}\n            </div>\n          );\n        }}\n      </Loading>\n    </>\n  );\n};\n\nconst INSTANCE_HEALTH_FOR_BACKFILLS_QUERY = gql`\n  query InstanceHealthForBackfillsQuery {\n    instance {\n      ...InstanceHealthFragment\n    }\n  }\n\n  ${INSTANCE_HEALTH_FRAGMENT}\n`;\n\nconst BACKFILLS_QUERY = gql`\n  query InstanceBackfillsQuery($cursor: String, $limit: Int) {\n    partitionBackfillsOrError(cursor: $cursor, limit: $limit) {\n      ... on PartitionBackfills {\n        results {\n          backfillId\n          status\n          backfillStatus\n          numRequested\n          partitionNames\n          numPartitions\n          partitionRunStats {\n            numQueued\n            numInProgress\n            numSucceeded\n            numFailed\n            numPartitionsWithRuns\n            numTotalRuns\n          }\n          unfinishedRuns {\n            id\n            canTerminate\n          }\n          timestamp\n          partitionSetName\n          partitionSet {\n            id\n            name\n            mode\n            pipelineName\n            repositoryOrigin {\n              id\n              repositoryName\n              repositoryLocationName\n            }\n          }\n          error {\n            ...PythonErrorFragment\n          }\n\n          ...BackfillTableFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ${PYTHON_ERROR_FRAGMENT}\n  ${BACKFILL_TABLE_FRAGMENT}\n`;\n","import 'codemirror/addon/search/searchcursor';\n\nimport {gql, useQuery} from '@apollo/client';\nimport {\n  Box,\n  Colors,\n  PageHeader,\n  Spinner,\n  Code,\n  Heading,\n  StyledReadOnlyCodeMirror,\n  Subheading,\n} from '@dagster-io/ui';\nimport * as codemirror from 'codemirror';\nimport * as React from 'react';\nimport {createGlobalStyle} from 'styled-components/macro';\n\nimport {useQueryRefreshAtInterval, FIFTEEN_SECONDS} from '../app/QueryRefresh';\n\nimport {InstanceTabs} from './InstanceTabs';\nimport {InstanceConfigQuery} from './types/InstanceConfigQuery';\n\nconst InstanceConfigStyle = createGlobalStyle`\n  .react-codemirror2 .CodeMirror.cm-s-instance-config {\n    box-shadow: 0 1px 0 ${Colors.KeylineGray};\n    height: 100%;\n  }\n\n  .react-codemirror2 .CodeMirror.cm-s-instance-config {\n    .config-highlight {\n      background-color: ${Colors.Yellow200};\n    }\n`;\n\nexport const InstanceConfig = React.memo(() => {\n  const queryResult = useQuery<InstanceConfigQuery>(INSTANCE_CONFIG_QUERY, {\n    fetchPolicy: 'cache-and-network',\n    notifyOnNetworkStatusChange: true,\n  });\n\n  const refreshState = useQueryRefreshAtInterval(queryResult, FIFTEEN_SECONDS);\n  const {data} = queryResult;\n  const config = data?.instance.info;\n\n  const onEditorDidMount = (editor: codemirror.Editor) => {\n    const documentHash = document.location.hash;\n    if (documentHash) {\n      const target = new RegExp(`^${documentHash.slice(1)}:`);\n      const cursor = editor.getSearchCursor(target);\n      const found = cursor.findNext();\n      if (found) {\n        editor.markText(cursor.from(), cursor.to(), {className: 'config-highlight'});\n        editor.scrollIntoView(cursor.from());\n      }\n    }\n  };\n\n  if (!data) {\n    return (\n      <Box padding={{vertical: 64}}>\n        <Spinner purpose=\"section\" />\n      </Box>\n    );\n  }\n\n  return (\n    <>\n      <InstanceConfigStyle />\n      <PageHeader\n        title={<Heading>Instance status</Heading>}\n        tabs={<InstanceTabs tab=\"config\" refreshState={refreshState} />}\n      />\n      <Box\n        padding={{vertical: 16, horizontal: 24}}\n        border={{side: 'bottom', width: 1, color: Colors.KeylineGray}}\n      >\n        <Subheading>\n          Dagster version: <Code style={{fontSize: '16px'}}>{data.version}</Code>\n        </Subheading>\n      </Box>\n      <StyledReadOnlyCodeMirror\n        editorDidMount={onEditorDidMount}\n        value={config || ''}\n        options={{lineNumbers: true, mode: 'yaml'}}\n        theme={['instance-config']}\n      />\n    </>\n  );\n});\n\nexport const INSTANCE_CONFIG_QUERY = gql`\n  query InstanceConfigQuery {\n    version\n    instance {\n      info\n    }\n  }\n`;\n","import {gql, useQuery} from '@apollo/client';\nimport {Box, Colors, PageHeader, Heading, Subheading} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {FIFTEEN_SECONDS, useQueryRefreshAtInterval} from '../app/QueryRefresh';\n\nimport {DaemonList} from './DaemonList';\nimport {INSTANCE_HEALTH_FRAGMENT} from './InstanceHealthFragment';\nimport {InstanceTabs} from './InstanceTabs';\nimport {InstanceHealthQuery} from './types/InstanceHealthQuery';\n\nexport const InstanceHealthPage = () => {\n  const queryData = useQuery<InstanceHealthQuery>(INSTANCE_HEALTH_QUERY, {\n    fetchPolicy: 'cache-and-network',\n    notifyOnNetworkStatusChange: true,\n  });\n  const refreshState = useQueryRefreshAtInterval(queryData, FIFTEEN_SECONDS);\n  const {loading, data} = queryData;\n\n  const daemonContent = () => {\n    if (loading && !data?.instance) {\n      return (\n        <Box padding={{horizontal: 24}} style={{color: Colors.Gray400}}>\n          Loading\n        </Box>\n      );\n    }\n    return data?.instance ? (\n      <DaemonList daemonStatuses={data.instance.daemonHealth.allDaemonStatuses} />\n    ) : null;\n  };\n\n  return (\n    <>\n      <PageHeader\n        title={<Heading>Instance status</Heading>}\n        tabs={<InstanceTabs tab=\"health\" refreshState={refreshState} />}\n      />\n      <Box padding={{vertical: 16, horizontal: 24}}>\n        <Subheading>Daemon statuses</Subheading>\n      </Box>\n      {daemonContent()}\n    </>\n  );\n};\n\nconst INSTANCE_HEALTH_QUERY = gql`\n  query InstanceHealthQuery {\n    instance {\n      ...InstanceHealthFragment\n    }\n  }\n\n  ${INSTANCE_HEALTH_FRAGMENT}\n`;\n","import {Box, Colors, FontFamily, Mono, Popover} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport {SectionHeader} from '../pipelines/SidebarComponents';\nimport {RunStatus} from '../types/globalTypes';\n\nimport {RunStatusIndicator} from './RunStatusDots';\nimport {RunStateSummary, RunTime, titleForRun} from './RunUtils';\nimport {RunTimeFragment} from './types/RunTimeFragment';\n\nconst RUN_STATUS_COLORS = {\n  QUEUED: Colors.Blue500,\n  NOT_STARTED: Colors.Blue500,\n  STARTING: Colors.Blue500,\n  MANAGED: Colors.Blue500,\n  STARTED: Colors.Blue500,\n  SUCCESS: Colors.Green500,\n  FAILURE: Colors.Red500,\n  CANCELING: Colors.Red500,\n  CANCELED: Colors.Red500,\n};\n\nconst MIN_OPACITY = 0.2;\nconst MAX_OPACITY = 1.0;\nconst MIN_OPACITY_STEPS = 3;\n\ninterface Props {\n  opacity?: number;\n  runId: string;\n  status: RunStatus;\n}\n\nexport const RunStatusPez = (props: Props) => {\n  const {status, opacity = MAX_OPACITY} = props;\n  const color = RUN_STATUS_COLORS[status];\n\n  return <Pez $color={color} $opacity={opacity} />;\n};\n\ninterface ListProps {\n  fade: boolean;\n  repoAddress: string;\n  runs: RunTimeFragment[];\n}\n\nexport const RunStatusPezList = (props: ListProps) => {\n  const {fade, runs} = props;\n  const count = runs.length;\n  const countForStep = Math.max(MIN_OPACITY_STEPS, count);\n  const step = (MAX_OPACITY - MIN_OPACITY) / countForStep;\n  return (\n    <Box flex={{direction: 'row', alignItems: 'center', gap: 2}}>\n      {runs.map((run, ii) => (\n        <Popover\n          key={run.runId}\n          position=\"bottom\"\n          interactionKind=\"hover\"\n          content={\n            <div>\n              <RunStatusOverlay run={run} repoAddr={props.repoAddress} />\n            </div>\n          }\n          hoverOpenDelay={100}\n        >\n          <RunStatusPez\n            key={run.runId}\n            runId={run.runId}\n            status={run.status}\n            opacity={fade ? MAX_OPACITY - (count - ii - 1) * step : 1.0}\n          />\n        </Popover>\n      ))}\n    </Box>\n  );\n};\n\ninterface OverlayProps {\n  run: RunTimeFragment;\n  repoAddr: string;\n}\n\nconst RunStatusOverlay = (props: OverlayProps) => {\n  return (\n    <OverlayContainer>\n      <OverlayTitle>{props.repoAddr}</OverlayTitle>\n      <RunRow>\n        <RunStatusIndicator status={props.run.status} />\n        <Link to={`/instance/runs/${props.run.runId}`}>\n          <Mono>{titleForRun(props.run)}</Mono>\n        </Link>\n        <HorizontalSpace />\n        <Box flex={{direction: 'column'}}>\n          <RunTime run={props.run} />\n          <RunStateSummary run={props.run} />\n        </Box>\n      </RunRow>\n    </OverlayContainer>\n  );\n};\n\nconst OverlayContainer = styled.div`\n  padding: 4px;\n  font-size: 12px;\n  width: 280px;\n`;\n\nconst HorizontalSpace = styled.div`\n  flex: 1;\n`;\n\nconst OverlayTitle = styled(SectionHeader)`\n  padding: 8px;\n  box-shadow: inset 0 -1px ${Colors.KeylineGray};\n  max-width: 100%;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  min-width: 0px;\n`;\n\nconst RunRow = styled.div`\n  align-items: baseline;\n  padding: 8px;\n  font-family: ${FontFamily.monospace};\n  font-size: 14px;\n  line-height: 20px;\n  display: flex;\n  gap: 8px;\n`;\n\nconst Pez = styled.div<{$color: string; $opacity: number}>`\n  background-color: ${({$color}) => $color};\n  border-radius: 2px;\n  height: 16px;\n  opacity: ${({$opacity}) => $opacity};\n  width: 8px;\n`;\n","import {gql} from '@apollo/client';\nimport {Colors, CaptionMono} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {TimestampDisplay} from '../schedules/TimestampDisplay';\nimport {InstigationStatus} from '../types/globalTypes';\n\nimport {ScheduleFutureTicksFragment} from './types/ScheduleFutureTicksFragment';\n\nconst TIME_FORMAT = {\n  showTimezone: true,\n  showSeconds: true,\n};\n\ninterface Props {\n  schedules: ScheduleFutureTicksFragment[];\n}\n\nexport const NextTick = (props: Props) => {\n  const {schedules} = props;\n\n  const nextTick = React.useMemo(() => {\n    const timestamps = schedules.map((schedule) => {\n      const {executionTimezone, futureTicks, scheduleState} = schedule;\n      if (scheduleState.status === InstigationStatus.RUNNING) {\n        return {\n          executionTimezone,\n          earliest: Math.min(...futureTicks.results.map(({timestamp}) => timestamp)),\n        };\n      }\n      return null;\n    });\n\n    return timestamps.reduce((earliestOverall, timestamp) => {\n      if (\n        !earliestOverall ||\n        (timestamp?.earliest && timestamp.earliest < earliestOverall?.earliest)\n      ) {\n        return timestamp;\n      }\n      return earliestOverall;\n    }, null);\n  }, [schedules]);\n\n  if (nextTick) {\n    return (\n      <CaptionMono color={Colors.Gray500}>\n        Next tick:{' '}\n        <TimestampDisplay\n          timestamp={nextTick.earliest}\n          timezone={nextTick.executionTimezone}\n          timeFormat={TIME_FORMAT}\n        />\n      </CaptionMono>\n    );\n  }\n\n  return null;\n};\n\nexport const SCHEDULE_FUTURE_TICKS_FRAGMENT = gql`\n  fragment ScheduleFutureTicksFragment on Schedule {\n    id\n    executionTimezone\n    scheduleState {\n      id\n      status\n    }\n    futureTicks(limit: 10) {\n      results {\n        timestamp\n      }\n    }\n  }\n`;\n","export interface RunWithTime {\n  startTime: number;\n  endTime: number;\n}\n\nexport type RunBatch<R extends RunWithTime> = {\n  runs: R[];\n  startTime: number;\n  endTime: number;\n  left: number;\n  width: number;\n};\n\ntype Config<R extends RunWithTime> = {\n  runs: R[];\n  start: number;\n  end: number;\n  width: number;\n  minChunkWidth: number;\n  minMultipleWidth: number;\n};\n\nexport const overlap = (a: {start: number; end: number}, b: {start: number; end: number}) =>\n  !(a.end < b.start || b.end < a.start);\n\n/**\n * Given a list of runs, batch any that overlap. Calculate `left` and `width` values for rendering\n * purposes, using minimum widths for very brief runs and overlapping batches.\n */\nexport const batchRunsForTimeline = <R extends RunWithTime>(config: Config<R>) => {\n  const {runs, start, end, width, minChunkWidth, minMultipleWidth} = config;\n  const rangeLength = end - start;\n\n  const batches: RunBatch<R>[] = runs\n    .map((run) => {\n      const startTime = run.startTime;\n      const endTime = run.endTime || Date.now();\n      const left = Math.max(0, Math.floor(((startTime - start) / rangeLength) * width));\n      const runWidth = Math.max(\n        minChunkWidth,\n        Math.min(\n          Math.ceil(((endTime - startTime) / rangeLength) * width),\n          Math.ceil(((endTime - start) / rangeLength) * width),\n        ),\n      );\n\n      return {\n        runs: [run],\n        startTime,\n        endTime,\n        left,\n        width: runWidth,\n      };\n    })\n    .sort((a, b) => b.left - a.left);\n\n  const consolidated = [];\n  while (batches.length) {\n    const current = batches.shift();\n    const next = batches[0];\n    if (current) {\n      if (\n        next &&\n        overlap(\n          {\n            start: current.left,\n            end: current.left + Math.max(current.width, minMultipleWidth),\n          },\n          {start: next.left, end: next.left + Math.max(next.width, minMultipleWidth)},\n        )\n      ) {\n        // Remove `next`, consolidate it with `current`, and unshift it back on.\n        // This way, we keep looking for batches to consolidate with.\n        batches.shift();\n        current.runs = [...current.runs, ...next.runs];\n        current.startTime = Math.min(current.startTime, next.startTime);\n        current.endTime = Math.max(current.endTime, next.endTime);\n\n        // Identify the rightmost point for these two items.\n        const right = Math.max(\n          current.left + minMultipleWidth,\n          current.left + current.width,\n          next.left + next.width,\n        );\n\n        // Using the leftmost point, calculate the new width using the rightmost point\n        // determined above.\n        const minLeft = Math.min(current.left, next.left);\n        current.width = right - minLeft;\n        current.left = minLeft;\n\n        batches.unshift(current);\n      } else {\n        // If the next batch doesn't overlap, we've consolidated this batch\n        // all we can. Move on!\n        consolidated.push(current);\n      }\n    }\n  }\n\n  return consolidated;\n};\n","import {gql, useQuery} from '@apollo/client';\nimport {Box, Colors, Popover, Mono, FontFamily} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport {TimezoneContext} from '../app/time/TimezoneContext';\nimport {browserTimezone} from '../app/time/browserTimezone';\nimport {SCHEDULE_FUTURE_TICKS_FRAGMENT} from '../instance/NextTick';\nimport {RUN_TIME_FRAGMENT} from '../runs/RunUtils';\nimport {TimestampDisplay} from '../schedules/TimestampDisplay';\nimport {InstigationStatus, RunStatus} from '../types/globalTypes';\nimport {LoadingSpinner} from '../ui/Loading';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\nimport {repoAddressAsString} from '../workspace/repoAddressAsString';\nimport {RepoAddress} from '../workspace/types';\nimport {workspacePipelinePath} from '../workspace/workspacePath';\n\nimport {RunStatusDot} from './RunStatusDots';\nimport {\n  doneStatuses,\n  failedStatuses,\n  inProgressStatuses,\n  queuedStatuses,\n  successStatuses,\n} from './RunStatuses';\nimport {TimeElapsed} from './TimeElapsed';\nimport {batchRunsForTimeline, overlap, RunBatch} from './batchRunsForTimeline';\nimport {RunTimelineQuery, RunTimelineQueryVariables} from './types/RunTimelineQuery';\n\nconst ROW_HEIGHT = 24;\nconst TIME_HEADER_HEIGHT = 36;\nconst LABEL_WIDTH = 232;\n\nconst ONE_HOUR_MSEC = 60 * 60 * 1000;\n\nexport type TimelineRun = {\n  id: string;\n  status: RunStatus | 'SCHEDULED';\n  startTime: number;\n  endTime: number;\n};\n\nexport type TimelineJob = {\n  key: string;\n  jobName: string;\n  path: string;\n  runs: TimelineRun[];\n};\n\nexport type HourWindow = '1' | '6' | '12' | '24';\n\nexport const makeJobKey = (repoAddress: RepoAddress, jobName: string) => {\n  return `${jobName}-${repoAddressAsString(repoAddress)}`;\n};\n\nexport const RunTimelineContainer = ({\n  range,\n  jobs,\n  hourWindow,\n}: {\n  range: [number, number];\n  jobs: TimelineJob[];\n  hourWindow: HourWindow;\n}) => {\n  const [start, end] = range;\n  const [jobsWithRuns, setJobsWithRuns] = React.useState<TimelineJob[]>([]);\n  const [loadedWindow, setLoadedWindow] = React.useState<HourWindow>();\n\n  const {data, loading} = useQuery<RunTimelineQuery, RunTimelineQueryVariables>(\n    RUN_TIMELINE_QUERY,\n    {\n      fetchPolicy: 'network-only',\n      notifyOnNetworkStatusChange: true,\n      variables: {\n        inProgressFilter: {\n          statuses: [RunStatus.CANCELING, RunStatus.STARTED],\n          createdBefore: end / 1000.0,\n        },\n        terminatedFilter: {\n          statuses: Array.from(doneStatuses),\n          createdBefore: end / 1000.0,\n          updatedAfter: start / 1000.0,\n        },\n      },\n    },\n  );\n  const jobsByKey = React.useMemo(() => {\n    return jobs.reduce((accum, job: TimelineJob) => {\n      return {...accum, [job.key]: job};\n    }, {} as {[key: string]: TimelineJob});\n  }, [jobs]);\n\n  React.useEffect(() => {\n    if (loading) {\n      return;\n    }\n    const {unterminated, terminated, workspaceOrError} = data || {};\n\n    const runsByJob: {[jobName: string]: TimelineRun[]} = {};\n    const now = Date.now();\n\n    // fetch all the runs in the given range\n    [\n      ...(unterminated?.__typename === 'Runs' ? unterminated.results : []),\n      ...(terminated?.__typename === 'Runs' ? terminated.results : []),\n    ].forEach((run) => {\n      if (!run.startTime) {\n        return;\n      }\n      if (\n        !overlap(\n          {start, end},\n          {\n            start: run.startTime * 1000,\n            end: run.endTime ? run.endTime * 1000 : now,\n          },\n        )\n      ) {\n        return;\n      }\n      runsByJob[run.pipelineName] = [\n        ...(runsByJob[run.pipelineName] || []),\n        {\n          id: run.id,\n          status: run.status,\n          startTime: run.startTime * 1000,\n          endTime: run.endTime ? run.endTime * 1000 : now,\n        },\n      ];\n    });\n\n    const jobs = [];\n    if (workspaceOrError && workspaceOrError.__typename === 'Workspace') {\n      for (const locationEntry of workspaceOrError.locationEntries) {\n        if (\n          locationEntry.__typename === 'WorkspaceLocationEntry' &&\n          locationEntry.locationOrLoadError?.__typename === 'RepositoryLocation'\n        ) {\n          for (const repository of locationEntry.locationOrLoadError.repositories) {\n            const repoAddress = buildRepoAddress(\n              repository.name,\n              locationEntry.locationOrLoadError.name,\n            );\n            for (const pipeline of repository.pipelines) {\n              const jobKey = makeJobKey(repoAddress, pipeline.name);\n              if (!(jobKey in jobsByKey)) {\n                continue;\n              }\n\n              const schedules = (repository.schedules || []).filter(\n                (schedule) => schedule.pipelineName === pipeline.name,\n              );\n\n              const jobTicks: TimelineRun[] = [];\n              for (const schedule of schedules) {\n                if (schedule.scheduleState.status === InstigationStatus.RUNNING) {\n                  schedule.futureTicks.results.forEach(({timestamp}) => {\n                    const startTime = timestamp * 1000;\n                    if (overlap({start, end}, {start: startTime, end: startTime})) {\n                      jobTicks.push({\n                        id: `${schedule.pipelineName}-future-run-${timestamp}`,\n                        status: 'SCHEDULED',\n                        startTime,\n                        endTime: startTime + 10 * 1000,\n                      });\n                    }\n                  });\n                }\n              }\n\n              const jobRuns = runsByJob[pipeline.name] || [];\n              if (jobTicks.length || jobRuns.length) {\n                jobs.push({\n                  key: jobKey,\n                  jobName: pipeline.name,\n                  path: workspacePipelinePath({\n                    repoName: repoAddress.name,\n                    repoLocation: repoAddress.location,\n                    pipelineName: pipeline.name,\n                    isJob: pipeline.isJob,\n                  }),\n                  runs: [...jobRuns, ...jobTicks],\n                });\n              }\n            }\n          }\n        }\n      }\n    }\n\n    const earliest = jobs.reduce((accum, job) => {\n      const startTimes = job.runs.map((job) => job.startTime);\n      return {...accum, [job.key]: Math.min(...startTimes)};\n    }, {} as {[jobKey: string]: number});\n\n    setJobsWithRuns(jobs.sort((a, b) => earliest[a.key] - earliest[b.key]));\n    setLoadedWindow(hourWindow);\n  }, [data, start, end, loading, jobsByKey, hourWindow]);\n\n  if (loading && hourWindow !== loadedWindow) {\n    return <LoadingSpinner purpose=\"section\" />;\n  }\n  return <RunTimeline range={[start, end]} jobs={jobsWithRuns} />;\n};\n\nexport const RunTimeline = ({jobs, range}: {jobs: TimelineJob[]; range: [number, number]}) => {\n  const [width, setWidth] = React.useState<number | null>(null);\n  const observer = React.useRef<ResizeObserver | null>(null);\n\n  const containerRef = React.useCallback((node) => {\n    if (node) {\n      observer.current = new ResizeObserver((entries) => {\n        const entry = entries[0];\n        setWidth(entry.contentRect.width);\n      });\n      observer.current.observe(node);\n    } else {\n      observer.current?.disconnect();\n    }\n  }, []);\n\n  const height = ROW_HEIGHT * (jobs.length || 1);\n\n  return (\n    <Timeline $height={TIME_HEADER_HEIGHT + height} ref={containerRef}>\n      {width ? (\n        jobs.length ? (\n          <>\n            <TimeDividers interval={ONE_HOUR_MSEC} range={range} height={height} />\n            <div>\n              {jobs.map((job, ii) => (\n                <RunTimelineRow\n                  key={job.key}\n                  job={job}\n                  top={ii * ROW_HEIGHT + TIME_HEADER_HEIGHT}\n                  range={range}\n                  width={width}\n                />\n              ))}\n            </div>\n          </>\n        ) : (\n          <NoRunsTimeline />\n        )\n      ) : null}\n    </Timeline>\n  );\n};\n\ntype TimeMarker = {\n  key: string;\n  label: React.ReactNode;\n  left: number;\n};\n\ninterface TimeDividersProps {\n  height: number;\n  interval: number;\n  range: [number, number];\n}\n\nconst TimeDividers = (props: TimeDividersProps) => {\n  const {interval, range, height} = props;\n  const [start, end] = range;\n  const locale = navigator.language;\n  const [timezone] = React.useContext(TimezoneContext);\n\n  const timeMarkers: TimeMarker[] = React.useMemo(() => {\n    const totalTime = end - start;\n    const startGap = start % interval;\n    const firstMarker = start - startGap;\n    const markerCount = Math.ceil(totalTime / interval) + 1;\n    return [...new Array(markerCount)]\n      .map((_, ii) => {\n        const time = firstMarker + ii * interval;\n        const date = new Date(time);\n        const label = date.toLocaleString(locale, {\n          hour: '2-digit',\n          timeZone: timezone === 'Automatic' ? browserTimezone() : timezone,\n        });\n        return {\n          label,\n          key: date.toString(),\n          left: ((time - start) / totalTime) * 100,\n        };\n      })\n      .filter((marker) => marker.left > 0);\n  }, [end, start, interval, locale, timezone]);\n\n  const now = Date.now();\n  const nowLeft = `${(((now - start) / (end - start)) * 100).toPrecision(3)}%`;\n\n  return (\n    <DividerContainer style={{height: `${height}px`}}>\n      <DividerLabels>\n        {timeMarkers.map((marker) => (\n          <DividerLabel key={marker.key} style={{left: `${marker.left.toPrecision(3)}%`}}>\n            {marker.label}\n          </DividerLabel>\n        ))}\n      </DividerLabels>\n      <DividerLines>\n        {timeMarkers.map((marker) => (\n          <DividerLine key={marker.key} style={{left: `${marker.left.toPrecision(3)}%`}} />\n        ))}\n        {now >= start && now <= end ? (\n          <DividerLine style={{left: nowLeft, backgroundColor: Colors.Blue500, zIndex: 1}} />\n        ) : null}\n      </DividerLines>\n    </DividerContainer>\n  );\n};\n\nconst DividerContainer = styled.div`\n  position: absolute;\n  top: 0;\n  left: ${LABEL_WIDTH}px;\n  right: 0;\n  font-family: ${FontFamily.monospace};\n  color: ${Colors.Gray400};\n`;\n\nconst DividerLabels = styled.div`\n  display: flex;\n  align-items: center;\n  height: ${TIME_HEADER_HEIGHT}px;\n  position: relative;\n  user-select: none;\n  width: 100%;\n`;\n\nconst DividerLabel = styled.div`\n  position: absolute;\n  transform: translateX(-50%);\n  white-space: nowrap;\n`;\n\nconst DividerLines = styled.div`\n  height: 100%;\n  position: relative;\n  width: 100%;\n  box-shadow: inset 1px 0 0 ${Colors.KeylineGray}, inset -1px 0 0 ${Colors.KeylineGray};\n`;\n\nconst DividerLine = styled.div`\n  background-color: ${Colors.KeylineGray};\n  height: 100%;\n  position: absolute;\n  top: 0;\n  width: 1px;\n`;\n\nconst mergeStatusToColor = (runs: TimelineRun[]) => {\n  let anyInProgress = false;\n  let anyQueued = false;\n  let anyFailed = false;\n  let anySucceeded = false;\n  let anyScheduled = false;\n\n  runs.forEach(({status}) => {\n    if (status === 'SCHEDULED') {\n      anyScheduled = true;\n    } else if (queuedStatuses.has(status)) {\n      anyQueued = true;\n    } else if (inProgressStatuses.has(status)) {\n      anyInProgress = true;\n    } else if (failedStatuses.has(status)) {\n      anyFailed = true;\n    } else if (successStatuses.has(status)) {\n      anySucceeded = true;\n    }\n  });\n\n  if (anyQueued) {\n    return Colors.Blue200;\n  }\n  if (anyInProgress) {\n    return Colors.Blue500;\n  }\n  if (anyFailed) {\n    return Colors.Red500;\n  }\n  if (anySucceeded) {\n    return Colors.Green500;\n  }\n  if (anyScheduled) {\n    return Colors.Blue200;\n  }\n\n  return Colors.Gray500;\n};\n\nconst MIN_CHUNK_WIDTH = 2;\nconst MIN_WIDTH_FOR_MULTIPLE = 16;\n\nconst RunTimelineRow = ({\n  job,\n  top,\n  range,\n  width: containerWidth,\n}: {\n  job: TimelineJob;\n  top: number;\n  range: [number, number];\n  width: number;\n}) => {\n  // const {jobKey, jobLabel, jobPath, runs, top, range, width: containerWidth} = props;\n  const [start, end] = range;\n  const width = containerWidth - LABEL_WIDTH;\n  const {runs} = job;\n\n  // Batch overlapping runs in this row.\n  const batched = React.useMemo(() => {\n    const batches: RunBatch<TimelineRun>[] = batchRunsForTimeline({\n      runs,\n      start,\n      end,\n      width,\n      minChunkWidth: MIN_CHUNK_WIDTH,\n      minMultipleWidth: MIN_WIDTH_FOR_MULTIPLE,\n    });\n\n    return batches;\n  }, [runs, start, end, width]);\n\n  if (!job.runs.length) {\n    return null;\n  }\n\n  return (\n    <Row $top={top}>\n      <JobName>\n        <Link to={job.path}>{job.jobName}</Link>\n      </JobName>\n      <RunChunks>\n        {batched.map((batch) => {\n          const {left, width, runs} = batch;\n          const runCount = runs.length;\n          return (\n            <RunChunk\n              key={batch.runs[0].id}\n              $color={mergeStatusToColor(batch.runs)}\n              $multiple={runCount > 1}\n              style={{\n                left: `${left}px`,\n                width: `${width}px`,\n              }}\n            >\n              <Popover\n                content={<RunHoverContent jobKey={job.key} batch={batch} />}\n                position=\"top\"\n                interactionKind=\"hover\"\n                className=\"chunk-popover-target\"\n              >\n                <Box\n                  flex={{direction: 'row', justifyContent: 'center', alignItems: 'center'}}\n                  style={{height: '100%'}}\n                >\n                  {runCount > 1 ? <BatchCount>{batch.runs.length}</BatchCount> : null}\n                </Box>\n              </Popover>\n            </RunChunk>\n          );\n        })}\n      </RunChunks>\n    </Row>\n  );\n};\n\nconst NoRunsTimeline = () => (\n  <Box flex={{justifyContent: 'center', alignItems: 'center'}} padding={24}>\n    No runs or upcoming runs found for this time window.\n  </Box>\n);\n\nconst Timeline = styled.div<{$height: number}>`\n  ${({$height}) => `height: ${$height}px;`}\n  position: relative;\n`;\n\nconst Row = styled.div<{$top: number}>`\n  align-items: center;\n  box-shadow: inset 0 -1px 0 ${Colors.KeylineGray};\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  height: ${ROW_HEIGHT + 1}px;\n  padding: 1px 0;\n  position: absolute;\n  left: 0;\n  top: 0;\n\n  ${({$top}) => `transform: translateY(${$top}px);`}\n\n  :first-child, :hover {\n    box-shadow: inset 0 1px 0 ${Colors.KeylineGray}, inset 0 -1px 0 ${Colors.KeylineGray};\n  }\n\n  :hover {\n    background-color: ${Colors.Gray10};\n  }\n`;\n\nconst JobName = styled.div`\n  font-family: ${FontFamily.monospace};\n  font-size: 14px;\n  line-height: 16px;\n  overflow: hidden;\n  padding: 0 12px 0 24px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  width: ${LABEL_WIDTH}px;\n`;\n\nconst RunChunks = styled.div`\n  flex: 1;\n  position: relative;\n  height: ${ROW_HEIGHT}px;\n`;\n\ninterface ChunkProps {\n  $color: string;\n  $multiple: boolean;\n}\n\nconst RunChunk = styled.div<ChunkProps>`\n  align-items: center;\n  background-color: ${({$color}) => $color};\n  border-radius: 2px;\n  height: ${ROW_HEIGHT - 4}px;\n  position: absolute;\n  top: 2px;\n  ${({$multiple}) => ($multiple ? `min-width: ${MIN_WIDTH_FOR_MULTIPLE}px` : null)};\n\n  transition: background-color 300ms linear, width 300ms ease-in-out;\n\n  .chunk-popover-target {\n    display: block;\n    height: 100%;\n    width: 100%;\n  }\n`;\n\nconst BatchCount = styled.div`\n  color: ${Colors.White};\n  cursor: default;\n  font-size: 12px;\n  user-select: none;\n`;\n\ninterface RunHoverContentProps {\n  jobKey: string;\n  batch: RunBatch<TimelineRun>;\n}\n\nconst RunHoverContent = (props: RunHoverContentProps) => {\n  const {jobKey, batch} = props;\n  return (\n    <Box style={{width: '260px'}}>\n      <Box padding={12} border={{side: 'bottom', width: 1, color: Colors.KeylineGray}}>\n        <HoverContentJobName>{jobKey}</HoverContentJobName>\n      </Box>\n      <div style={{maxHeight: '240px', overflowY: 'auto'}}>\n        {batch.runs.map((run, ii) => (\n          <Box\n            key={run.id}\n            border={ii > 0 ? {side: 'top', width: 1, color: Colors.KeylineGray} : null}\n            flex={{direction: 'row', justifyContent: 'space-between', alignItems: 'center'}}\n            padding={{vertical: 8, horizontal: 12}}\n          >\n            <Box flex={{direction: 'row', gap: 8, alignItems: 'center'}}>\n              <RunStatusDot status={run.status} size={8} />\n              {run.status === 'SCHEDULED' ? (\n                'Scheduled'\n              ) : (\n                <Link to={`/instance/runs/${run.id}`}>\n                  <Mono>{run.id.slice(0, 8)}</Mono>\n                </Link>\n              )}\n            </Box>\n            <Mono>\n              {run.status === 'SCHEDULED' ? (\n                <TimestampDisplay timestamp={run.startTime / 1000} />\n              ) : (\n                <TimeElapsed startUnix={run.startTime / 1000} endUnix={run.endTime / 1000} />\n              )}\n            </Mono>\n          </Box>\n        ))}\n      </div>\n    </Box>\n  );\n};\n\nconst HoverContentJobName = styled.strong`\n  display: block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  width: 100%;\n`;\n\nconst RUN_TIMELINE_QUERY = gql`\n  query RunTimelineQuery($inProgressFilter: RunsFilter!, $terminatedFilter: RunsFilter!) {\n    unterminated: runsOrError(filter: $inProgressFilter) {\n      ... on Runs {\n        results {\n          id\n          pipelineName\n          ...RunTimeFragment\n        }\n      }\n    }\n    terminated: runsOrError(filter: $terminatedFilter) {\n      ... on Runs {\n        results {\n          id\n          pipelineName\n          ...RunTimeFragment\n        }\n      }\n    }\n    workspaceOrError {\n      ... on Workspace {\n        locationEntries {\n          id\n          name\n          loadStatus\n          displayMetadata {\n            key\n            value\n          }\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                }\n                schedules {\n                  id\n                  name\n                  pipelineName\n                  scheduleState {\n                    id\n                    status\n                  }\n                  ...ScheduleFutureTicksFragment\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ${RUN_TIME_FRAGMENT}\n  ${SCHEDULE_FUTURE_TICKS_FRAGMENT}\n`;\n","import {gql, useLazyQuery} from '@apollo/client';\nimport {Button, Icon, Menu, MenuItem, Popover, Tooltip} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {DISABLED_MESSAGE, usePermissions} from '../app/Permissions';\nimport {canRunAllSteps, canRunFromFailure} from '../runs/RunActionButtons';\nimport {RunFragments} from '../runs/RunFragments';\nimport {useJobReExecution} from '../runs/useJobReExecution';\nimport {MenuLink} from '../ui/MenuLink';\nimport {RepoAddress} from '../workspace/types';\nimport {workspacePipelinePath} from '../workspace/workspacePath';\n\nimport {OverviewJobFragment} from './types/OverviewJobFragment';\nimport {RunReExecutionQuery} from './types/RunReExecutionQuery';\n\ninterface Props {\n  job: OverviewJobFragment;\n  repoAddress: RepoAddress;\n}\n\n/**\n * Lazily load more information about the last run for this job, then use that data to inform\n * whether re-execution is possible.\n */\nexport const JobMenu = (props: Props) => {\n  const {job, repoAddress} = props;\n  const lastRun = job.runs[0];\n  const {canLaunchPipelineReexecution} = usePermissions();\n  const [fetchHasExecutionPlan, {data}] = useLazyQuery<RunReExecutionQuery>(RUN_RE_EXECUTION_QUERY);\n\n  const run = data?.pipelineRunOrError.__typename === 'Run' ? data?.pipelineRunOrError : null;\n\n  const fetchIfPossible = React.useCallback(() => {\n    if (lastRun.id) {\n      fetchHasExecutionPlan({variables: {runId: lastRun.id}});\n    }\n  }, [lastRun, fetchHasExecutionPlan]);\n\n  const onLaunch = useJobReExecution(run);\n\n  const reExecuteAllItem = (\n    <MenuItem\n      icon=\"replay\"\n      text=\"Re-execute latest run\"\n      onClick={() => onLaunch({type: 'all'})}\n      disabled={!canLaunchPipelineReexecution || !run || !canRunAllSteps(run)}\n    />\n  );\n\n  const reExecuteFromFailureItem = (\n    <MenuItem\n      icon=\"sync_problem\"\n      text=\"Re-execute latest run from failure\"\n      onClick={() => onLaunch({type: 'from-failure'})}\n      disabled={!canLaunchPipelineReexecution || !run || !canRunFromFailure(run)}\n    />\n  );\n\n  return (\n    <Popover\n      onOpened={() => fetchIfPossible()}\n      content={\n        <Menu>\n          <MenuLink\n            to={workspacePipelinePath({\n              repoName: repoAddress.name,\n              repoLocation: repoAddress.location,\n              pipelineName: job.name,\n              isJob: job.isJob,\n            })}\n            icon=\"job\"\n            text=\"View job\"\n          />\n          <MenuLink\n            to={workspacePipelinePath({\n              repoName: repoAddress.name,\n              repoLocation: repoAddress.location,\n              pipelineName: job.name,\n              isJob: job.isJob,\n              path: '/runs',\n            })}\n            icon=\"checklist\"\n            text=\"View all recent runs\"\n          />\n          {canLaunchPipelineReexecution ? (\n            reExecuteAllItem\n          ) : (\n            <Tooltip content={DISABLED_MESSAGE} display=\"block\">\n              {reExecuteAllItem}\n            </Tooltip>\n          )}\n          {canLaunchPipelineReexecution ? (\n            reExecuteFromFailureItem\n          ) : (\n            <Tooltip content={DISABLED_MESSAGE} display=\"block\">\n              {reExecuteFromFailureItem}\n            </Tooltip>\n          )}\n        </Menu>\n      }\n      position=\"bottom-right\"\n    >\n      <Button icon={<Icon name=\"expand_more\" />} />\n    </Popover>\n  );\n};\n\nconst RUN_RE_EXECUTION_QUERY = gql`\n  query RunReExecutionQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        ...RunFragment\n      }\n    }\n  }\n\n  ${RunFragments.RunFragment}\n`;\n","import {Box, Button, DialogFooter, DialogHeader, Dialog, Icon} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {RepoSelector} from '../nav/RepoSelector';\nimport {WorkspaceContext} from '../workspace/WorkspaceContext';\n\nexport const RepoFilterButton: React.FC = () => {\n  const {allRepos, visibleRepos, toggleVisible} = React.useContext(WorkspaceContext);\n  const [open, setOpen] = React.useState(false);\n  return (\n    <>\n      <Dialog\n        canOutsideClickClose\n        canEscapeKeyClose\n        isOpen={open}\n        style={{width: 'auto'}}\n        onClose={() => setOpen(false)}\n      >\n        <DialogHeader icon=\"repo\" label=\"Repositories\" />\n        <RepoSelector\n          options={allRepos}\n          onBrowse={() => setOpen(false)}\n          onToggle={toggleVisible}\n          selected={visibleRepos}\n        />\n        <DialogFooter>\n          <Box padding={{top: 8}}>\n            <Button intent=\"none\" onClick={() => setOpen(false)}>\n              Done\n            </Button>\n          </Box>\n        </DialogFooter>\n      </Dialog>\n\n      <Button\n        icon={<Icon name=\"folder\" />}\n        rightIcon={<Icon name=\"expand_more\" />}\n        onClick={() => setOpen(true)}\n      >\n        {`${visibleRepos.length} of ${allRepos.length} Repositories`}\n      </Button>\n    </>\n  );\n};\n","import {gql, useQuery} from '@apollo/client';\nimport {\n  Box,\n  Button,\n  ButtonGroup,\n  Colors,\n  Icon,\n  PageHeader,\n  Spinner,\n  Table,\n  Body,\n  Heading,\n  TextInput,\n  FontFamily,\n} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorInfo';\nimport {FIFTEEN_SECONDS, useMergedRefresh, useQueryRefreshAtInterval} from '../app/QueryRefresh';\nimport {isHiddenAssetGroupJob} from '../asset-graph/Utils';\nimport {ScheduleOrSensorTag} from '../nav/ScheduleOrSensorTag';\nimport {LegacyPipelineTag} from '../pipelines/LegacyPipelineTag';\nimport {PipelineReference} from '../pipelines/PipelineReference';\nimport {RunStatusPezList} from '../runs/RunStatusPez';\nimport {\n  failedStatuses,\n  inProgressStatuses,\n  queuedStatuses,\n  successStatuses,\n} from '../runs/RunStatuses';\nimport {RunTimelineContainer, TimelineJob, makeJobKey, HourWindow} from '../runs/RunTimeline';\nimport {RUN_TIME_FRAGMENT} from '../runs/RunUtils';\nimport {RunTimeFragment} from '../runs/types/RunTimeFragment';\nimport {SCHEDULE_SWITCH_FRAGMENT} from '../schedules/ScheduleSwitch';\nimport {SENSOR_SWITCH_FRAGMENT} from '../sensors/SensorSwitch';\nimport {REPOSITORY_INFO_FRAGMENT} from '../workspace/RepositoryInformation';\nimport {WorkspaceContext} from '../workspace/WorkspaceContext';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\nimport {repoAddressAsString} from '../workspace/repoAddressAsString';\nimport {RepoAddress} from '../workspace/types';\nimport {workspacePipelinePath} from '../workspace/workspacePath';\n\nimport {InstanceTabs} from './InstanceTabs';\nimport {JobMenu} from './JobMenu';\nimport {LastRunSummary} from './LastRunSummary';\nimport {NextTick, SCHEDULE_FUTURE_TICKS_FRAGMENT} from './NextTick';\nimport {RepoFilterButton} from './RepoFilterButton';\nimport {\n  InstanceOverviewInitialQuery,\n  InstanceOverviewInitialQuery_workspaceOrError_Workspace_locationEntries_locationOrLoadError_RepositoryLocation_repositories_schedules as Schedule,\n  InstanceOverviewInitialQuery_workspaceOrError_Workspace_locationEntries_locationOrLoadError_RepositoryLocation_repositories_sensors as Sensor,\n} from './types/InstanceOverviewInitialQuery';\nimport {LastTenRunsPerJobQuery} from './types/LastTenRunsPerJobQuery';\nimport {OverviewJobFragment} from './types/OverviewJobFragment';\n\ntype JobItem = {\n  job: OverviewJobFragment;\n  repoAddress: RepoAddress;\n  schedules: Schedule[];\n  sensors: Sensor[];\n};\n\ntype JobItemWithRuns = JobItem & {\n  runs: RunTimeFragment[];\n};\n\ntype State = {\n  searchValue: string;\n};\n\ntype Action = {type: 'search'; value: string};\n\nconst reducer = (state: State, action: Action) => {\n  switch (action.type) {\n    case 'search': {\n      return {...state, searchValue: action.value};\n    }\n    default:\n      return state;\n  }\n};\n\nconst initialState: State = {\n  searchValue: '',\n};\n\nexport const InstanceOverviewPage = () => {\n  const [state, dispatch] = React.useReducer(reducer, initialState);\n  const {allRepos, visibleRepos} = React.useContext(WorkspaceContext);\n  const {searchValue} = state;\n\n  const queryResultOverview = useQuery<InstanceOverviewInitialQuery>(\n    INSTANCE_OVERVIEW_INITIAL_QUERY,\n    {\n      fetchPolicy: 'network-only',\n      notifyOnNetworkStatusChange: true,\n    },\n  );\n  const {data, loading} = queryResultOverview;\n\n  const queryResultLastRuns = useQuery<LastTenRunsPerJobQuery>(LAST_TEN_RUNS_PER_JOB_QUERY, {\n    fetchPolicy: 'network-only',\n    notifyOnNetworkStatusChange: true,\n  });\n  const {data: lastTenRunsData} = queryResultLastRuns;\n\n  const refreshState = useMergedRefresh(\n    useQueryRefreshAtInterval(queryResultLastRuns, FIFTEEN_SECONDS),\n    useQueryRefreshAtInterval(queryResultOverview, FIFTEEN_SECONDS),\n  );\n\n  const bucketed = React.useMemo(() => {\n    const failed = [];\n    const inProgress = [];\n    const succeeded = [];\n    const queued = [];\n    const neverRan = [];\n\n    const sortFn = (a: JobItem, b: JobItem) => {\n      const aRun = a.job.runs[0] || null;\n      const bRun = b.job.runs[0] || null;\n\n      if (aRun.startTime) {\n        return bRun.startTime ? bRun.startTime - aRun.startTime : -1;\n      } else if (bRun.startTime) {\n        return -1;\n      }\n\n      return a.job.name.toLocaleLowerCase().localeCompare(b.job.name.toLocaleLowerCase());\n    };\n\n    if (data && Object.keys(data).length && data?.workspaceOrError.__typename === 'Workspace') {\n      for (const locationEntry of data.workspaceOrError.locationEntries) {\n        if (\n          locationEntry.__typename === 'WorkspaceLocationEntry' &&\n          locationEntry.locationOrLoadError?.__typename === 'RepositoryLocation'\n        ) {\n          for (const repository of locationEntry.locationOrLoadError.repositories) {\n            for (const pipeline of repository.pipelines) {\n              const {runs} = pipeline;\n              const schedules: Schedule[] = (repository.schedules || []).filter(\n                (schedule) => schedule.pipelineName === pipeline.name,\n              );\n              const sensors: Sensor[] = (repository.sensors || []).filter((sensor) =>\n                sensor.targets?.map((t) => t.pipelineName).includes(pipeline.name),\n              );\n              const repoAddress = buildRepoAddress(\n                repository.name,\n                locationEntry.locationOrLoadError.name,\n              );\n\n              if (runs.length) {\n                const {status} = runs[0];\n                const item: JobItem = {\n                  job: pipeline,\n                  schedules,\n                  sensors,\n                  repoAddress,\n                };\n                if (failedStatuses.has(status)) {\n                  failed.push(item);\n                } else if (inProgressStatuses.has(status)) {\n                  inProgress.push(item);\n                } else if (successStatuses.has(status)) {\n                  succeeded.push(item);\n                } else if (queuedStatuses.has(status)) {\n                  queued.push(item);\n                } else {\n                  neverRan.push(item);\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n\n    failed.sort(sortFn);\n    inProgress.sort(sortFn);\n    queued.sort(sortFn);\n    succeeded.sort(sortFn);\n    neverRan.sort(sortFn);\n\n    return {failed, inProgress, queued, succeeded, neverRan};\n  }, [data]);\n\n  const filteredJobs = React.useMemo(() => {\n    const searchToLower = searchValue.toLocaleLowerCase();\n    const filterJobs = ({job, repoAddress}: JobItem) =>\n      visibleRepos.some(\n        (r) =>\n          r.repository.name === repoAddress.name &&\n          r.repositoryLocation.name === repoAddress.location,\n      ) &&\n      job.name.toLocaleLowerCase().includes(searchToLower) &&\n      !isHiddenAssetGroupJob(job.name);\n\n    const {failed, inProgress, queued, succeeded, neverRan} = bucketed;\n    return {\n      failed: failed.filter(filterJobs),\n      inProgress: inProgress.filter(filterJobs),\n      queued: queued.filter(filterJobs),\n      succeeded: succeeded.filter(filterJobs),\n      neverRan: neverRan.filter(filterJobs),\n    };\n  }, [bucketed, visibleRepos, searchValue]);\n\n  const lastTenRunsFlattened = React.useMemo(() => {\n    if (!lastTenRunsData || Object.keys(lastTenRunsData).length === 0) {\n      return null;\n    }\n\n    const flattened: {[key: string]: RunTimeFragment[]} = {};\n    if (lastTenRunsData.workspaceOrError.__typename === 'Workspace') {\n      for (const locationEntry of lastTenRunsData.workspaceOrError.locationEntries) {\n        if (\n          locationEntry.__typename === 'WorkspaceLocationEntry' &&\n          locationEntry.locationOrLoadError?.__typename === 'RepositoryLocation'\n        ) {\n          for (const repository of locationEntry.locationOrLoadError.repositories) {\n            for (const pipeline of repository.pipelines) {\n              const jobKey = makeJobKey(\n                buildRepoAddress(repository.name, locationEntry.locationOrLoadError.name),\n                pipeline.name,\n              );\n              flattened[jobKey] = pipeline.runs;\n            }\n          }\n        }\n      }\n    }\n\n    return flattened;\n  }, [lastTenRunsData]);\n\n  const filteredJobsFlattened: JobItem[] = React.useMemo(() => {\n    return Object.values(filteredJobs).reduce((accum, jobList) => {\n      return [...accum, ...jobList];\n    }, []);\n  }, [filteredJobs]);\n\n  const filteredJobsWithRuns = React.useMemo(() => {\n    const appendRuns = (jobItem: JobItem) => {\n      const {job, repoAddress} = jobItem;\n      const jobKey = makeJobKey(repoAddress, job.name);\n      const matchingRuns = lastTenRunsFlattened ? lastTenRunsFlattened[jobKey] || [] : [];\n      return {...jobItem, runs: [...matchingRuns].reverse()};\n    };\n\n    const {failed, inProgress, queued, succeeded, neverRan} = filteredJobs;\n    return {\n      failed: failed.map(appendRuns),\n      inProgress: inProgress.map(appendRuns),\n      queued: queued.map(appendRuns),\n      succeeded: succeeded.map(appendRuns),\n      neverRan: neverRan.map(appendRuns),\n    };\n  }, [lastTenRunsFlattened, filteredJobs]);\n\n  if (!data || Object.keys(data).length === 0) {\n    return (\n      <>\n        <PageHeader\n          title={<Heading>Instance status</Heading>}\n          tabs={<InstanceTabs tab=\"overview\" refreshState={refreshState} />}\n        />\n        <Box padding={64}>\n          <Spinner purpose=\"section\" />\n        </Box>\n      </>\n    );\n  }\n\n  const {failed, inProgress, queued, succeeded, neverRan} = filteredJobsWithRuns;\n\n  return (\n    <>\n      <PageHeader\n        title={<Heading>Instance status</Heading>}\n        tabs={<InstanceTabs tab=\"overview\" refreshState={refreshState} />}\n      />\n      <Box\n        padding={{horizontal: 24, top: 16}}\n        flex={{direction: 'row', alignItems: 'center', gap: 12, grow: 0}}\n      >\n        {allRepos.length > 1 && <RepoFilterButton />}\n        <TextInput\n          icon=\"search\"\n          value={searchValue}\n          onChange={(e) => dispatch({type: 'search', value: e.target.value})}\n          placeholder=\"Filter by job name\"\n          style={{width: '340px'}}\n        />\n      </Box>\n      <RunTimelineSection jobs={filteredJobsFlattened} loading={loading} />\n      {inProgress.length ? (\n        <JobSection\n          icon={<Icon name=\"hourglass_bottom\" color={Colors.Blue500} size={24} />}\n          heading={\n            inProgress.length === 1 ? '1 job in progress' : `${inProgress.length} jobs in progress`\n          }\n          jobs={inProgress}\n        />\n      ) : null}\n      {failed.length ? (\n        <JobSection\n          icon={<Icon name=\"error_outline\" color={Colors.Red500} size={24} />}\n          heading={failed.length === 1 ? '1 job failed' : `${failed.length} jobs failed`}\n          jobs={failed}\n        />\n      ) : null}\n      {queued.length ? (\n        <JobSection\n          icon={<Icon name=\"checklist\" color={Colors.Gray500} size={24} />}\n          heading={queued.length === 1 ? '1 job queued' : `${queued.length} jobs queued`}\n          jobs={queued}\n        />\n      ) : null}\n      {succeeded.length ? (\n        <JobSection\n          icon={<Icon name=\"check_circle\" color={Colors.Green500} size={24} />}\n          heading={\n            succeeded.length === 1 ? '1 job succeeded' : `${succeeded.length} jobs succeeded`\n          }\n          jobs={succeeded}\n        />\n      ) : null}\n      {neverRan.length ? (\n        <JobSection\n          icon={<Icon name=\"history_toggle_off\" color={Colors.Gray900} size={24} />}\n          heading={neverRan.length === 1 ? '1 job never ran' : `${neverRan.length} jobs never ran`}\n          jobs={neverRan}\n        />\n      ) : null}\n    </>\n  );\n};\n\nconst LOOKAHEAD_HOURS = 1;\nconst ONE_HOUR = 60 * 60 * 1000;\n\nconst RunTimelineSection = ({jobs, loading}: {jobs: JobItem[]; loading: boolean}) => {\n  const [shown, setShown] = React.useState(true);\n  const [hourWindow, setHourWindow] = React.useState<HourWindow>('6');\n  const nowRef = React.useRef(Date.now());\n\n  React.useEffect(() => {\n    if (!loading) {\n      nowRef.current = Date.now();\n    }\n  }, [loading]);\n\n  const nowSecs = Math.floor(nowRef.current / 1000);\n  const range: [number, number] = React.useMemo(() => {\n    return [\n      nowSecs * 1000 - Number(hourWindow) * ONE_HOUR,\n      nowSecs * 1000 + LOOKAHEAD_HOURS * ONE_HOUR,\n    ];\n  }, [hourWindow, nowSecs]);\n\n  const [start, end] = React.useMemo(() => {\n    const [unvalidatedStart, unvalidatedEnd] = range;\n    return unvalidatedEnd < unvalidatedStart\n      ? [unvalidatedEnd, unvalidatedStart]\n      : [unvalidatedStart, unvalidatedEnd];\n  }, [range]);\n\n  const timelineJobs: TimelineJob[] = jobs.map((job) => ({\n    key: makeJobKey(job.repoAddress, job.job.name),\n    jobName: job.job.name,\n    path: workspacePipelinePath({\n      repoName: job.repoAddress.name,\n      repoLocation: job.repoAddress.location,\n      pipelineName: job.job.name,\n      isJob: job.job.isJob,\n    }),\n    runs: [],\n  }));\n\n  return (\n    <>\n      <Box\n        flex={{direction: 'row', alignItems: 'center', justifyContent: 'space-between'}}\n        margin={{top: 16}}\n        padding={{bottom: 16, horizontal: 24}}\n        border={{side: 'bottom', width: 1, color: Colors.KeylineGray}}\n      >\n        <Box flex={{alignItems: 'center', gap: 8}}>\n          <Icon name=\"waterfall_chart\" color={Colors.Gray900} size={20} />\n          <Heading>Timeline</Heading>\n        </Box>\n        <Box flex={{alignItems: 'center', gap: 8}}>\n          {shown ? (\n            <ButtonGroup<HourWindow>\n              activeItems={new Set([hourWindow])}\n              buttons={[\n                {id: '1', label: '1hr'},\n                {id: '6', label: '6hr'},\n                {id: '12', label: '12hr'},\n                {id: '24', label: '24hr'},\n              ]}\n              onClick={(hrWindow: HourWindow) => setHourWindow(hrWindow)}\n            />\n          ) : null}\n          <Button\n            icon={<Icon name={shown ? 'unfold_less' : 'unfold_more'} />}\n            onClick={() => setShown((current) => !current)}\n          >\n            {shown ? 'Hide' : 'Show'}\n          </Button>\n        </Box>\n      </Box>\n      {shown ? (\n        <RunTimelineContainer range={[start, end]} jobs={timelineJobs} hourWindow={hourWindow} />\n      ) : null}\n    </>\n  );\n};\n\ninterface JobSectionProps {\n  icon: React.ReactNode;\n  heading: React.ReactNode;\n  jobs: JobItemWithRuns[];\n}\n\nconst JobSection = (props: JobSectionProps) => {\n  const {icon, heading, jobs} = props;\n  return (\n    <>\n      <Box\n        flex={{direction: 'row', gap: 8, alignItems: 'center'}}\n        margin={{top: 16}}\n        padding={{vertical: 16, horizontal: 24}}\n      >\n        {icon}\n        <Heading>{heading}</Heading>\n      </Box>\n      <Table>\n        <thead>\n          <tr>\n            <th style={{width: '40%'}}>Job</th>\n            <th style={{width: '25%'}}>Trigger</th>\n            <th style={{width: '35%'}}>Latest run</th>\n            <th />\n          </tr>\n        </thead>\n        <tbody>\n          {jobs.map(({job, repoAddress, runs, schedules, sensors}) => {\n            const jobKey = makeJobKey(repoAddress, job.name);\n            const repoAddressString = repoAddressAsString(repoAddress);\n            return (\n              <tr key={jobKey}>\n                <td>\n                  <Box\n                    flex={{\n                      direction: 'row',\n                      justifyContent: 'space-between',\n                      alignItems: 'flex-start',\n                    }}\n                  >\n                    <Box flex={{direction: 'column', gap: 4}}>\n                      <Box flex={{direction: 'row', gap: 8, alignItems: 'center'}}>\n                        <PipelineReference\n                          pipelineName={job.name}\n                          isJob={job.isJob}\n                          pipelineHrefContext={repoAddress}\n                        />\n                        {!job.isJob ? <LegacyPipelineTag /> : null}\n                      </Box>\n                      <Body color={Colors.Gray400} style={{fontFamily: FontFamily.monospace}}>\n                        {repoAddressString}\n                      </Body>\n                    </Box>\n                    {runs ? (\n                      <Box margin={{top: 4}}>\n                        <RunStatusPezList fade runs={runs} repoAddress={repoAddressString} />\n                      </Box>\n                    ) : null}\n                  </Box>\n                </td>\n                <td>\n                  {schedules.length || sensors.length ? (\n                    <Box flex={{direction: 'column', alignItems: 'flex-start', gap: 8}}>\n                      <ScheduleOrSensorTag\n                        schedules={schedules}\n                        sensors={sensors}\n                        repoAddress={repoAddress}\n                      />\n                      {schedules.length ? <NextTick schedules={schedules} /> : null}\n                    </Box>\n                  ) : (\n                    <div style={{color: Colors.Gray500}}>None</div>\n                  )}\n                </td>\n                <td>\n                  <LastRunSummary run={job.runs[0]} />\n                </td>\n                <td>\n                  <JobMenu job={job} repoAddress={repoAddress} />\n                </td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </Table>\n    </>\n  );\n};\n\nconst OVERVIEW_JOB_FRAGMENT = gql`\n  fragment OverviewJobFragment on Pipeline {\n    id\n    name\n    isJob\n    runs(limit: 1) {\n      id\n      mode\n      runId\n      status\n      ...RunTimeFragment\n    }\n    modes {\n      id\n      name\n    }\n  }\n\n  ${RUN_TIME_FRAGMENT}\n`;\n\nconst INSTANCE_OVERVIEW_INITIAL_QUERY = gql`\n  query InstanceOverviewInitialQuery {\n    workspaceOrError {\n      ... on Workspace {\n        locationEntries {\n          id\n          name\n          loadStatus\n          displayMetadata {\n            key\n            value\n          }\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  ...OverviewJobFragment\n                }\n                ...RepositoryInfoFragment\n                schedules {\n                  id\n                  name\n                  pipelineName\n                  scheduleState {\n                    id\n                    status\n                  }\n                  ...ScheduleFutureTicksFragment\n                  ...ScheduleSwitchFragment\n                }\n                sensors {\n                  id\n                  name\n                  targets {\n                    pipelineName\n                  }\n                  sensorState {\n                    id\n                    status\n                  }\n                  ...SensorSwitchFragment\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ${OVERVIEW_JOB_FRAGMENT}\n  ${REPOSITORY_INFO_FRAGMENT}\n  ${SCHEDULE_FUTURE_TICKS_FRAGMENT}\n  ${SCHEDULE_SWITCH_FRAGMENT}\n  ${SENSOR_SWITCH_FRAGMENT}\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n\nconst LAST_TEN_RUNS_PER_JOB_QUERY = gql`\n  query LastTenRunsPerJobQuery {\n    workspaceOrError {\n      ... on Workspace {\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                  runs(limit: 10) {\n                    id\n                    ...RunTimeFragment\n                  }\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ${PYTHON_ERROR_FRAGMENT}\n  ${RUN_TIME_FRAGMENT}\n`;\n","import {gql, useQuery} from '@apollo/client';\nimport {Box, Colors, Group, NonIdealState, PageHeader, Heading, Subheading} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {PythonErrorInfo, PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorInfo';\nimport {FIFTEEN_SECONDS, useQueryRefreshAtInterval} from '../app/QueryRefresh';\nimport {INSTIGATION_STATE_FRAGMENT} from '../instigation/InstigationUtils';\nimport {UnloadableSchedules} from '../instigation/Unloadable';\nimport {SCHEDULE_FRAGMENT} from '../schedules/ScheduleUtils';\nimport {SchedulerInfo} from '../schedules/SchedulerInfo';\nimport {SchedulesTable} from '../schedules/SchedulesTable';\nimport {InstigationType} from '../types/globalTypes';\nimport {Loading} from '../ui/Loading';\nimport {REPOSITORY_INFO_FRAGMENT} from '../workspace/RepositoryInformation';\nimport {buildRepoPath, buildRepoAddress} from '../workspace/buildRepoAddress';\n\nimport {INSTANCE_HEALTH_FRAGMENT} from './InstanceHealthFragment';\nimport {InstanceTabs} from './InstanceTabs';\nimport {InstanceSchedulesQuery} from './types/InstanceSchedulesQuery';\n\nexport const InstanceSchedules = React.memo(() => {\n  const queryData = useQuery<InstanceSchedulesQuery>(INSTANCE_SCHEDULES_QUERY, {\n    fetchPolicy: 'cache-and-network',\n    notifyOnNetworkStatusChange: true,\n  });\n  const refreshState = useQueryRefreshAtInterval(queryData, FIFTEEN_SECONDS);\n\n  return (\n    <>\n      <PageHeader\n        title={<Heading>Instance status</Heading>}\n        tabs={<InstanceTabs tab=\"schedules\" refreshState={refreshState} />}\n      />\n      <Loading queryResult={queryData} allowStaleData={true}>\n        {(data) => <AllSchedules data={data} />}\n      </Loading>\n    </>\n  );\n});\n\nconst AllSchedules: React.FC<{data: InstanceSchedulesQuery}> = ({data}) => {\n  const {instance, repositoriesOrError, unloadableInstigationStatesOrError} = data;\n\n  if (repositoriesOrError.__typename === 'PythonError') {\n    return <PythonErrorInfo error={repositoriesOrError} />;\n  }\n  if (unloadableInstigationStatesOrError.__typename === 'PythonError') {\n    return <PythonErrorInfo error={unloadableInstigationStatesOrError} />;\n  }\n\n  const unloadable = unloadableInstigationStatesOrError.results;\n  const withSchedules = repositoriesOrError.nodes.filter(\n    (repository) => repository.schedules.length,\n  );\n\n  const loadedSchedulesSection = withSchedules.length ? (\n    <>\n      <Box padding={{vertical: 16, horizontal: 24}}>\n        <SchedulerInfo daemonHealth={instance.daemonHealth} />\n      </Box>\n      {withSchedules.map((repository) => (\n        <React.Fragment key={repository.name}>\n          <Box\n            padding={{vertical: 16, horizontal: 24}}\n            border={{side: 'top', width: 1, color: Colors.KeylineGray}}\n          >\n            <Subheading>{`${buildRepoPath(repository.name, repository.location.name)}`}</Subheading>\n          </Box>\n          <Box padding={{bottom: 16}}>\n            <SchedulesTable\n              repoAddress={buildRepoAddress(repository.name, repository.location.name)}\n              schedules={repository.schedules}\n            />\n          </Box>\n        </React.Fragment>\n      ))}\n    </>\n  ) : null;\n\n  const unloadableSchedules = unloadable.filter(\n    (state) => state.instigationType === InstigationType.SCHEDULE,\n  );\n\n  const unloadableSchedulesSection = unloadableSchedules.length ? (\n    <UnloadableSchedules scheduleStates={unloadableSchedules} />\n  ) : null;\n\n  if (!loadedSchedulesSection && !unloadableSchedulesSection) {\n    return (\n      <Box margin={{top: 32}}>\n        <NonIdealState\n          icon=\"schedule\"\n          title=\"No schedules found\"\n          description={\n            <div>\n              This instance does not have any schedules defined. Visit the{' '}\n              <a\n                href=\"https://docs.dagster.io/concepts/partitions-schedules-sensors/schedules\"\n                target=\"_blank\"\n                rel=\"noreferrer\"\n              >\n                scheduler documentation\n              </a>{' '}\n              for more information about scheduling runs in Dagster.\n            </div>\n          }\n        />\n      </Box>\n    );\n  }\n\n  return (\n    <Group direction=\"column\" spacing={32}>\n      {loadedSchedulesSection}\n      {unloadableSchedulesSection}\n    </Group>\n  );\n};\n\nconst INSTANCE_SCHEDULES_QUERY = gql`\n  query InstanceSchedulesQuery {\n    instance {\n      ...InstanceHealthFragment\n    }\n    repositoriesOrError {\n      __typename\n      ... on RepositoryConnection {\n        nodes {\n          id\n          name\n          ...RepositoryInfoFragment\n          schedules {\n            id\n            ...ScheduleFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n    unloadableInstigationStatesOrError {\n      ... on InstigationStates {\n        results {\n          id\n          ...InstigationStateFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ${INSTANCE_HEALTH_FRAGMENT}\n  ${REPOSITORY_INFO_FRAGMENT}\n  ${SCHEDULE_FRAGMENT}\n  ${PYTHON_ERROR_FRAGMENT}\n  ${INSTIGATION_STATE_FRAGMENT}\n`;\n","import {gql, useQuery} from '@apollo/client';\nimport {Box, Colors, NonIdealState, PageHeader, Heading, Subheading} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {PythonErrorInfo, PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorInfo';\nimport {useQueryRefreshAtInterval, FIFTEEN_SECONDS} from '../app/QueryRefresh';\nimport {INSTIGATION_STATE_FRAGMENT} from '../instigation/InstigationUtils';\nimport {UnloadableSensors} from '../instigation/Unloadable';\nimport {SENSOR_FRAGMENT} from '../sensors/SensorFragment';\nimport {SensorInfo} from '../sensors/SensorInfo';\nimport {SensorsTable} from '../sensors/SensorsTable';\nimport {InstigationType} from '../types/globalTypes';\nimport {Loading} from '../ui/Loading';\nimport {REPOSITORY_INFO_FRAGMENT} from '../workspace/RepositoryInformation';\nimport {buildRepoPath, buildRepoAddress} from '../workspace/buildRepoAddress';\n\nimport {INSTANCE_HEALTH_FRAGMENT} from './InstanceHealthFragment';\nimport {InstanceTabs} from './InstanceTabs';\nimport {InstanceSensorsQuery} from './types/InstanceSensorsQuery';\n\nexport const InstanceSensors = React.memo(() => {\n  const queryData = useQuery<InstanceSensorsQuery>(INSTANCE_SENSORS_QUERY, {\n    fetchPolicy: 'cache-and-network',\n    notifyOnNetworkStatusChange: true,\n  });\n  const refreshState = useQueryRefreshAtInterval(queryData, FIFTEEN_SECONDS);\n\n  return (\n    <>\n      <PageHeader\n        title={<Heading>Instance status</Heading>}\n        tabs={<InstanceTabs tab=\"sensors\" refreshState={refreshState} />}\n      />\n      <Loading queryResult={queryData} allowStaleData={true}>\n        {(data) => <AllSensors data={data} />}\n      </Loading>\n    </>\n  );\n});\n\nconst AllSensors: React.FC<{data: InstanceSensorsQuery}> = ({data}) => {\n  const {instance, repositoriesOrError, unloadableInstigationStatesOrError} = data;\n\n  if (repositoriesOrError.__typename === 'PythonError') {\n    return <PythonErrorInfo error={repositoriesOrError} />;\n  }\n  if (unloadableInstigationStatesOrError.__typename === 'PythonError') {\n    return <PythonErrorInfo error={unloadableInstigationStatesOrError} />;\n  }\n\n  const unloadable = unloadableInstigationStatesOrError.results;\n  const withSensors = repositoriesOrError.nodes.filter((repository) => repository.sensors.length);\n\n  const sensorDefinitionsSection = withSensors.length ? (\n    <>\n      <Box padding={{horizontal: 24, vertical: 16}}>\n        <SensorInfo daemonHealth={instance.daemonHealth} />\n      </Box>\n      {withSensors.map((repository) =>\n        repository.sensors.length ? (\n          <React.Fragment key={repository.name}>\n            <Box\n              padding={{horizontal: 24, vertical: 16}}\n              border={{side: 'top', width: 1, color: Colors.KeylineGray}}\n            >\n              <Subheading>{`${buildRepoPath(\n                repository.name,\n                repository.location.name,\n              )}`}</Subheading>\n            </Box>\n            <Box padding={{bottom: 16}}>\n              <SensorsTable\n                repoAddress={buildRepoAddress(repository.name, repository.location.name)}\n                sensors={repository.sensors}\n              />\n            </Box>\n          </React.Fragment>\n        ) : null,\n      )}\n    </>\n  ) : null;\n\n  const unloadableSensors = unloadable.filter(\n    (state) => state.instigationType === InstigationType.SENSOR,\n  );\n  const unloadableSensorsSection = unloadableSensors.length ? (\n    <UnloadableSensors sensorStates={unloadableSensors} />\n  ) : null;\n\n  if (!sensorDefinitionsSection && !unloadableSensorsSection) {\n    return (\n      <Box padding={{vertical: 64}} border={{side: 'top', width: 1, color: Colors.KeylineGray}}>\n        <NonIdealState\n          icon=\"sensors\"\n          title=\"No sensors found\"\n          description={\n            <p>\n              This instance does not have any sensors defined. Visit the{' '}\n              <a\n                href=\"https://docs.dagster.io/concepts/partitions-schedules-sensors/schedules\"\n                target=\"_blank\"\n                rel=\"noreferrer\"\n              >\n                sensor documentation\n              </a>{' '}\n              for more information about setting up sensors in Dagster.\n            </p>\n          }\n        />\n      </Box>\n    );\n  }\n\n  return (\n    <>\n      {sensorDefinitionsSection}\n      {unloadableSensorsSection}\n    </>\n  );\n};\n\nconst INSTANCE_SENSORS_QUERY = gql`\n  query InstanceSensorsQuery {\n    instance {\n      ...InstanceHealthFragment\n    }\n    repositoriesOrError {\n      __typename\n      ... on RepositoryConnection {\n        nodes {\n          id\n          name\n          ...RepositoryInfoFragment\n          sensors {\n            id\n            ...SensorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n    unloadableInstigationStatesOrError {\n      ... on InstigationStates {\n        results {\n          id\n          ...InstigationStateFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ${INSTANCE_HEALTH_FRAGMENT}\n  ${REPOSITORY_INFO_FRAGMENT}\n  ${PYTHON_ERROR_FRAGMENT}\n  ${SENSOR_FRAGMENT}\n  ${INSTIGATION_STATE_FRAGMENT}\n`;\n","import {Page} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Redirect, Route, Switch} from 'react-router-dom';\n\nimport {InstanceBackfills} from './InstanceBackfills';\nimport {InstanceConfig} from './InstanceConfig';\nimport {InstanceHealthPage} from './InstanceHealthPage';\nimport {InstanceOverviewPage} from './InstanceOverviewPage';\nimport {InstanceSchedules} from './InstanceSchedules';\nimport {InstanceSensors} from './InstanceSensors';\n\nexport const InstanceStatusRoot = () => (\n  <Page>\n    <Switch>\n      <Route path=\"/instance/overview\">\n        <InstanceOverviewPage />\n      </Route>\n      <Route path=\"/instance/health\">\n        <InstanceHealthPage />\n      </Route>\n      <Route path=\"/instance/schedules\">\n        <InstanceSchedules />\n      </Route>\n      <Route path=\"/instance/sensors\">\n        <InstanceSensors />\n      </Route>\n      <Route path=\"/instance/backfills\">\n        <InstanceBackfills />\n      </Route>\n      <Route path=\"/instance/config\">\n        <InstanceConfig />\n      </Route>\n      <Route path=\"*\" render={() => <Redirect to=\"/instance\" />} />\n    </Switch>\n  </Page>\n);\n","import {MainContent} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Redirect, Route, Switch, useLocation} from 'react-router-dom';\n\nimport {AssetsCatalogRoot} from '../assets/AssetsCatalogRoot';\nimport {RunRoot} from '../runs/RunRoot';\nimport {RunsRoot} from '../runs/RunsRoot';\nimport {SnapshotRoot} from '../snapshots/SnapshotRoot';\n\nimport {InstanceStatusRoot} from './InstanceStatusRoot';\n\nexport const InstanceRoot = () => {\n  const {pathname} = useLocation();\n  const main = React.useRef<HTMLDivElement>(null);\n\n  React.useEffect(() => {\n    main.current?.scrollTo({top: 0});\n  }, [pathname]);\n\n  return (\n    <MainContent ref={main}>\n      <Switch>\n        <Route path=\"/instance/assets(/?.*)\">\n          <AssetsCatalogRoot />\n        </Route>\n        <Route path=\"/instance/runs\" exact>\n          <RunsRoot />\n        </Route>\n        <Route path=\"/instance/runs/:runId\" exact>\n          <RunRoot />\n        </Route>\n        <Route path=\"/instance/snapshots/:pipelinePath/:tab?\">\n          <SnapshotRoot />\n        </Route>\n        <Route path=\"/instance/:tab\">\n          <InstanceStatusRoot />\n        </Route>\n        <Route path=\"*\" render={() => <Redirect to=\"/instance/overview\" />} />\n      </Switch>\n    </MainContent>\n  );\n};\n\n// Imported via React.lazy, which requires a default export.\n// eslint-disable-next-line import/no-default-export\nexport default InstanceRoot;\n","\"use strict\";\n\n// This file was originally written by @drudru (https://github.com/drudru/ansi_up), MIT, 2011\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ANSI_COLORS = [[{ color: \"0, 0, 0\", \"class\": \"ansi-black\" }, { color: \"187, 0, 0\", \"class\": \"ansi-red\" }, { color: \"0, 187, 0\", \"class\": \"ansi-green\" }, { color: \"187, 187, 0\", \"class\": \"ansi-yellow\" }, { color: \"0, 0, 187\", \"class\": \"ansi-blue\" }, { color: \"187, 0, 187\", \"class\": \"ansi-magenta\" }, { color: \"0, 187, 187\", \"class\": \"ansi-cyan\" }, { color: \"255,255,255\", \"class\": \"ansi-white\" }], [{ color: \"85, 85, 85\", \"class\": \"ansi-bright-black\" }, { color: \"255, 85, 85\", \"class\": \"ansi-bright-red\" }, { color: \"0, 255, 0\", \"class\": \"ansi-bright-green\" }, { color: \"255, 255, 85\", \"class\": \"ansi-bright-yellow\" }, { color: \"85, 85, 255\", \"class\": \"ansi-bright-blue\" }, { color: \"255, 85, 255\", \"class\": \"ansi-bright-magenta\" }, { color: \"85, 255, 255\", \"class\": \"ansi-bright-cyan\" }, { color: \"255, 255, 255\", \"class\": \"ansi-bright-white\" }]];\n\nvar Anser = function () {\n    _createClass(Anser, null, [{\n        key: \"escapeForHtml\",\n\n\n        /**\n         * Anser.escapeForHtml\n         * Escape the input HTML.\n         *\n         * This does the minimum escaping of text to make it compliant with HTML.\n         * In particular, the '&','<', and '>' characters are escaped. This should\n         * be run prior to `ansiToHtml`.\n         *\n         * @name Anser.escapeForHtml\n         * @function\n         * @param {String} txt The input text (containing the ANSI snippets).\n         * @returns {String} The escaped html.\n         */\n        value: function escapeForHtml(txt) {\n            return new Anser().escapeForHtml(txt);\n        }\n\n        /**\n         * Anser.linkify\n         * Adds the links in the HTML.\n         *\n         * This replaces any links in the text with anchor tags that display the\n         * link. The links should have at least one whitespace character\n         * surrounding it. Also, you should apply this after you have run\n         * `ansiToHtml` on the text.\n         *\n         * @name Anser.linkify\n         * @function\n         * @param {String} txt The input text.\n         * @returns {String} The HTML containing the <a> tags (unescaped).\n         */\n\n    }, {\n        key: \"linkify\",\n        value: function linkify(txt) {\n            return new Anser().linkify(txt);\n        }\n\n        /**\n         * Anser.ansiToHtml\n         * This replaces ANSI terminal escape codes with SPAN tags that wrap the\n         * content.\n         *\n         * This function only interprets ANSI SGR (Select Graphic Rendition) codes\n         * that can be represented in HTML.\n         * For example, cursor movement codes are ignored and hidden from output.\n         * The default style uses colors that are very close to the prescribed\n         * standard. The standard assumes that the text will have a black\n         * background. These colors are set as inline styles on the SPAN tags.\n         *\n         * Another option is to set `use_classes: true` in the options argument.\n         * This will instead set classes on the spans so the colors can be set via\n         * CSS. The class names used are of the format `ansi-*-fg/bg` and\n         * `ansi-bright-*-fg/bg` where `*` is the color name,\n         * i.e black/red/green/yellow/blue/magenta/cyan/white.\n         *\n         * @name Anser.ansiToHtml\n         * @function\n         * @param {String} txt The input text.\n         * @param {Object} options The options passed to the ansiToHTML method.\n         * @returns {String} The HTML output.\n         */\n\n    }, {\n        key: \"ansiToHtml\",\n        value: function ansiToHtml(txt, options) {\n            return new Anser().ansiToHtml(txt, options);\n        }\n\n        /**\n         * Anser.ansiToJson\n         * Converts ANSI input into JSON output.\n         *\n         * @name Anser.ansiToJson\n         * @function\n         * @param {String} txt The input text.\n         * @param {Object} options The options passed to the ansiToHTML method.\n         * @returns {String} The HTML output.\n         */\n\n    }, {\n        key: \"ansiToJson\",\n        value: function ansiToJson(txt, options) {\n            return new Anser().ansiToJson(txt, options);\n        }\n\n        /**\n         * Anser.ansiToText\n         * Converts ANSI input into text output.\n         *\n         * @name Anser.ansiToText\n         * @function\n         * @param {String} txt The input text.\n         * @returns {String} The text output.\n         */\n\n    }, {\n        key: \"ansiToText\",\n        value: function ansiToText(txt) {\n            return new Anser().ansiToText(txt);\n        }\n\n        /**\n         * Anser\n         * The `Anser` class.\n         *\n         * @name Anser\n         * @function\n         * @returns {Anser}\n         */\n\n    }]);\n\n    function Anser() {\n        _classCallCheck(this, Anser);\n\n        this.fg = this.bg = this.fg_truecolor = this.bg_truecolor = null;\n        this.bright = 0;\n    }\n\n    /**\n     * setupPalette\n     * Sets up the palette.\n     *\n     * @name setupPalette\n     * @function\n     */\n\n\n    _createClass(Anser, [{\n        key: \"setupPalette\",\n        value: function setupPalette() {\n            this.PALETTE_COLORS = [];\n\n            // Index 0..15 : System color\n            for (var i = 0; i < 2; ++i) {\n                for (var j = 0; j < 8; ++j) {\n                    this.PALETTE_COLORS.push(ANSI_COLORS[i][j].color);\n                }\n            }\n\n            // Index 16..231 : RGB 6x6x6\n            // https://gist.github.com/jasonm23/2868981#file-xterm-256color-yaml\n            var levels = [0, 95, 135, 175, 215, 255];\n            var format = function format(r, g, b) {\n                return levels[r] + \", \" + levels[g] + \", \" + levels[b];\n            };\n            var r = void 0,\n                g = void 0,\n                b = void 0;\n            for (var _r = 0; _r < 6; ++_r) {\n                for (var _g = 0; _g < 6; ++_g) {\n                    for (var _b = 0; _b < 6; ++_b) {\n                        this.PALETTE_COLORS.push(format(_r, _g, _b));\n                    }\n                }\n            }\n\n            // Index 232..255 : Grayscale\n            var level = 8;\n            for (var _i = 0; _i < 24; ++_i, level += 10) {\n                this.PALETTE_COLORS.push(format(level, level, level));\n            }\n        }\n\n        /**\n         * escapeForHtml\n         * Escapes the input text.\n         *\n         * @name escapeForHtml\n         * @function\n         * @param {String} txt The input text.\n         * @returns {String} The escpaed HTML output.\n         */\n\n    }, {\n        key: \"escapeForHtml\",\n        value: function escapeForHtml(txt) {\n            return txt.replace(/[&<>]/gm, function (str) {\n                return str == \"&\" ? \"&amp;\" : str == \"<\" ? \"&lt;\" : str == \">\" ? \"&gt;\" : \"\";\n            });\n        }\n\n        /**\n         * linkify\n         * Adds HTML link elements.\n         *\n         * @name linkify\n         * @function\n         * @param {String} txt The input text.\n         * @returns {String} The HTML output containing link elements.\n         */\n\n    }, {\n        key: \"linkify\",\n        value: function linkify(txt) {\n            return txt.replace(/(https?:\\/\\/[^\\s]+)/gm, function (str) {\n                return \"<a href=\\\"\" + str + \"\\\">\" + str + \"</a>\";\n            });\n        }\n\n        /**\n         * ansiToHtml\n         * Converts ANSI input into HTML output.\n         *\n         * @name ansiToHtml\n         * @function\n         * @param {String} txt The input text.\n         * @param {Object} options The options passed ot the `process` method.\n         * @returns {String} The HTML output.\n         */\n\n    }, {\n        key: \"ansiToHtml\",\n        value: function ansiToHtml(txt, options) {\n            return this.process(txt, options, true);\n        }\n\n        /**\n         * ansiToJson\n         * Converts ANSI input into HTML output.\n         *\n         * @name ansiToJson\n         * @function\n         * @param {String} txt The input text.\n         * @param {Object} options The options passed ot the `process` method.\n         * @returns {String} The JSON output.\n         */\n\n    }, {\n        key: \"ansiToJson\",\n        value: function ansiToJson(txt, options) {\n            options = options || {};\n            options.json = true;\n            options.clearLine = false;\n            return this.process(txt, options, true);\n        }\n\n        /**\n         * ansiToText\n         * Converts ANSI input into HTML output.\n         *\n         * @name ansiToText\n         * @function\n         * @param {String} txt The input text.\n         * @returns {String} The text output.\n         */\n\n    }, {\n        key: \"ansiToText\",\n        value: function ansiToText(txt) {\n            return this.process(txt, {}, false);\n        }\n\n        /**\n         * process\n         * Processes the input.\n         *\n         * @name process\n         * @function\n         * @param {String} txt The input text.\n         * @param {Object} options An object passed to `processChunk` method, extended with:\n         *\n         *  - `json` (Boolean): If `true`, the result will be an object.\n         *  - `use_classes` (Boolean): If `true`, HTML classes will be appended to the HTML output.\n         *\n         * @param {Boolean} markup\n         */\n\n    }, {\n        key: \"process\",\n        value: function process(txt, options, markup) {\n            var _this = this;\n\n            var self = this;\n            var raw_text_chunks = txt.split(/\\033\\[/);\n            var first_chunk = raw_text_chunks.shift(); // the first chunk is not the result of the split\n\n            if (options === undefined || options === null) {\n                options = {};\n            }\n            options.clearLine = /\\r/.test(txt); // check for Carriage Return\n            var color_chunks = raw_text_chunks.map(function (chunk) {\n                return _this.processChunk(chunk, options, markup);\n            });\n\n            if (options && options.json) {\n                var first = self.processChunkJson(\"\");\n                first.content = first_chunk;\n                first.clearLine = options.clearLine;\n                color_chunks.unshift(first);\n                if (options.remove_empty) {\n                    color_chunks = color_chunks.filter(function (c) {\n                        return !c.isEmpty();\n                    });\n                }\n                return color_chunks;\n            } else {\n                color_chunks.unshift(first_chunk);\n            }\n\n            return color_chunks.join(\"\");\n        }\n\n        /**\n         * processChunkJson\n         * Processes the current chunk into json output.\n         *\n         * @name processChunkJson\n         * @function\n         * @param {String} text The input text.\n         * @param {Object} options An object containing the following fields:\n         *\n         *  - `json` (Boolean): If `true`, the result will be an object.\n         *  - `use_classes` (Boolean): If `true`, HTML classes will be appended to the HTML output.\n         *\n         * @param {Boolean} markup If false, the colors will not be parsed.\n         * @return {Object} The result object:\n         *\n         *  - `content` (String): The text.\n         *  - `fg` (String|null): The foreground color.\n         *  - `bg` (String|null): The background color.\n         *  - `fg_truecolor` (String|null): The foreground true color (if 16m color is enabled).\n         *  - `bg_truecolor` (String|null): The background true color (if 16m color is enabled).\n         *  - `clearLine` (Boolean): `true` if a carriageReturn \\r was fount at end of line.\n         *  - `was_processed` (Bolean): `true` if the colors were processed, `false` otherwise.\n         *  - `isEmpty` (Function): A function returning `true` if the content is empty, or `false` otherwise.\n         *\n         */\n\n    }, {\n        key: \"processChunkJson\",\n        value: function processChunkJson(text, options, markup) {\n\n            // Are we using classes or styles?\n            options = typeof options == \"undefined\" ? {} : options;\n            var use_classes = options.use_classes = typeof options.use_classes != \"undefined\" && options.use_classes;\n            var key = options.key = use_classes ? \"class\" : \"color\";\n\n            var result = {\n                content: text,\n                fg: null,\n                bg: null,\n                fg_truecolor: null,\n                bg_truecolor: null,\n                clearLine: options.clearLine,\n                decoration: null,\n                was_processed: false,\n                isEmpty: function isEmpty() {\n                    return !result.content;\n                }\n            };\n\n            // Each \"chunk\" is the text after the CSI (ESC + \"[\") and before the next CSI/EOF.\n            //\n            // This regex matches four groups within a chunk.\n            //\n            // The first and third groups match code type.\n            // We supported only SGR command. It has empty first group and \"m\" in third.\n            //\n            // The second group matches all of the number+semicolon command sequences\n            // before the \"m\" (or other trailing) character.\n            // These are the graphics or SGR commands.\n            //\n            // The last group is the text (including newlines) that is colored by\n            // the other group\"s commands.\n            var matches = text.match(/^([!\\x3c-\\x3f]*)([\\d;]*)([\\x20-\\x2c]*[\\x40-\\x7e])([\\s\\S]*)/m);\n\n            if (!matches) return result;\n\n            var orig_txt = result.content = matches[4];\n            var nums = matches[2].split(\";\");\n\n            // We currently support only \"SGR\" (Select Graphic Rendition)\n            // Simply ignore if not a SGR command.\n            if (matches[1] !== \"\" || matches[3] !== \"m\") {\n                return result;\n            }\n\n            if (!markup) {\n                return result;\n            }\n\n            var self = this;\n\n            self.decoration = null;\n\n            while (nums.length > 0) {\n                var num_str = nums.shift();\n                var num = parseInt(num_str);\n\n                if (isNaN(num) || num === 0) {\n                    self.fg = self.bg = self.decoration = null;\n                } else if (num === 1) {\n                    self.decoration = \"bold\";\n                } else if (num === 2) {\n                    self.decoration = \"dim\";\n                    // Enable code 2 to get string\n                } else if (num == 3) {\n                    self.decoration = \"italic\";\n                } else if (num == 4) {\n                    self.decoration = \"underline\";\n                } else if (num == 5) {\n                    self.decoration = \"blink\";\n                } else if (num === 7) {\n                    self.decoration = \"reverse\";\n                } else if (num === 8) {\n                    self.decoration = \"hidden\";\n                    // Enable code 9 to get strikethrough\n                } else if (num === 9) {\n                    self.decoration = \"strikethrough\";\n                } else if (num == 39) {\n                    self.fg = null;\n                } else if (num == 49) {\n                    self.bg = null;\n                    // Foreground color\n                } else if (num >= 30 && num < 38) {\n                    self.fg = ANSI_COLORS[0][num % 10][key];\n                    // Foreground bright color\n                } else if (num >= 90 && num < 98) {\n                    self.fg = ANSI_COLORS[1][num % 10][key];\n                    // Background color\n                } else if (num >= 40 && num < 48) {\n                    self.bg = ANSI_COLORS[0][num % 10][key];\n                    // Background bright color\n                } else if (num >= 100 && num < 108) {\n                    self.bg = ANSI_COLORS[1][num % 10][key];\n                } else if (num === 38 || num === 48) {\n                    // extend color (38=fg, 48=bg)\n                    var is_foreground = num === 38;\n                    if (nums.length >= 1) {\n                        var mode = nums.shift();\n                        if (mode === \"5\" && nums.length >= 1) {\n                            // palette color\n                            var palette_index = parseInt(nums.shift());\n                            if (palette_index >= 0 && palette_index <= 255) {\n                                if (!use_classes) {\n                                    if (!this.PALETTE_COLORS) {\n                                        self.setupPalette();\n                                    }\n                                    if (is_foreground) {\n                                        self.fg = this.PALETTE_COLORS[palette_index];\n                                    } else {\n                                        self.bg = this.PALETTE_COLORS[palette_index];\n                                    }\n                                } else {\n                                    var klass = palette_index >= 16 ? \"ansi-palette-\" + palette_index : ANSI_COLORS[palette_index > 7 ? 1 : 0][palette_index % 8][\"class\"];\n                                    if (is_foreground) {\n                                        self.fg = klass;\n                                    } else {\n                                        self.bg = klass;\n                                    }\n                                }\n                            }\n                        } else if (mode === \"2\" && nums.length >= 3) {\n                            // true color\n                            var r = parseInt(nums.shift());\n                            var g = parseInt(nums.shift());\n                            var b = parseInt(nums.shift());\n                            if (r >= 0 && r <= 255 && g >= 0 && g <= 255 && b >= 0 && b <= 255) {\n                                var color = r + \", \" + g + \", \" + b;\n                                if (!use_classes) {\n                                    if (is_foreground) {\n                                        self.fg = color;\n                                    } else {\n                                        self.bg = color;\n                                    }\n                                } else {\n                                    if (is_foreground) {\n                                        self.fg = \"ansi-truecolor\";\n                                        self.fg_truecolor = color;\n                                    } else {\n                                        self.bg = \"ansi-truecolor\";\n                                        self.bg_truecolor = color;\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n\n            if (self.fg === null && self.bg === null && self.decoration === null) {\n                return result;\n            } else {\n                var styles = [];\n                var classes = [];\n                var data = {};\n\n                result.fg = self.fg;\n                result.bg = self.bg;\n                result.fg_truecolor = self.fg_truecolor;\n                result.bg_truecolor = self.bg_truecolor;\n                result.decoration = self.decoration;\n                result.was_processed = true;\n\n                return result;\n            }\n        }\n\n        /**\n         * processChunk\n         * Processes the current chunk of text.\n         *\n         * @name processChunk\n         * @function\n         * @param {String} text The input text.\n         * @param {Object} options An object containing the following fields:\n         *\n         *  - `json` (Boolean): If `true`, the result will be an object.\n         *  - `use_classes` (Boolean): If `true`, HTML classes will be appended to the HTML output.\n         *\n         * @param {Boolean} markup If false, the colors will not be parsed.\n         * @return {Object|String} The result (object if `json` is wanted back or string otherwise).\n         */\n\n    }, {\n        key: \"processChunk\",\n        value: function processChunk(text, options, markup) {\n            var _this2 = this;\n\n            var self = this;\n            options = options || {};\n            var jsonChunk = this.processChunkJson(text, options, markup);\n\n            if (options.json) {\n                return jsonChunk;\n            }\n            if (jsonChunk.isEmpty()) {\n                return \"\";\n            }\n            if (!jsonChunk.was_processed) {\n                return jsonChunk.content;\n            }\n\n            var use_classes = options.use_classes;\n\n            var styles = [];\n            var classes = [];\n            var data = {};\n            var render_data = function render_data(data) {\n                var fragments = [];\n                var key = void 0;\n                for (key in data) {\n                    if (data.hasOwnProperty(key)) {\n                        fragments.push(\"data-\" + key + \"=\\\"\" + _this2.escapeForHtml(data[key]) + \"\\\"\");\n                    }\n                }\n                return fragments.length > 0 ? \" \" + fragments.join(\" \") : \"\";\n            };\n\n            if (jsonChunk.fg) {\n                if (use_classes) {\n                    classes.push(jsonChunk.fg + \"-fg\");\n                    if (jsonChunk.fg_truecolor !== null) {\n                        data[\"ansi-truecolor-fg\"] = jsonChunk.fg_truecolor;\n                        jsonChunk.fg_truecolor = null;\n                    }\n                } else {\n                    styles.push(\"color:rgb(\" + jsonChunk.fg + \")\");\n                }\n            }\n\n            if (jsonChunk.bg) {\n                if (use_classes) {\n                    classes.push(jsonChunk.bg + \"-bg\");\n                    if (jsonChunk.bg_truecolor !== null) {\n                        data[\"ansi-truecolor-bg\"] = jsonChunk.bg_truecolor;\n                        jsonChunk.bg_truecolor = null;\n                    }\n                } else {\n                    styles.push(\"background-color:rgb(\" + jsonChunk.bg + \")\");\n                }\n            }\n\n            if (jsonChunk.decoration) {\n                if (use_classes) {\n                    classes.push(\"ansi-\" + jsonChunk.decoration);\n                } else if (jsonChunk.decoration === \"bold\") {\n                    styles.push(\"font-weight:bold\");\n                } else if (jsonChunk.decoration === \"dim\") {\n                    styles.push(\"opacity:0.5\");\n                } else if (jsonChunk.decoration === \"italic\") {\n                    styles.push(\"font-style:italic\");\n                    // underline and blink are treated bellow\n                } else if (jsonChunk.decoration === \"reverse\") {\n                    styles.push(\"filter:invert(100%)\");\n                } else if (jsonChunk.decoration === \"hidden\") {\n                    styles.push(\"visibility:hidden\");\n                } else if (jsonChunk.decoration === \"strikethrough\") {\n                    styles.push(\"text-decoration:line-through\");\n                } else {\n                    styles.push(\"text-decoration:\" + jsonChunk.decoration);\n                }\n            }\n\n            if (use_classes) {\n                return \"<span class=\\\"\" + classes.join(\" \") + \"\\\"\" + render_data(data) + \">\" + jsonChunk.content + \"</span>\";\n            } else {\n                return \"<span style=\\\"\" + styles.join(\";\") + \"\\\"\" + render_data(data) + \">\" + jsonChunk.content + \"</span>\";\n            }\n        }\n    }]);\n\n    return Anser;\n}();\n\n;\n\nmodule.exports = Anser;","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst anser_1 = __importDefault(require(\"anser\"));\nconst escape_carriage_1 = require(\"escape-carriage\");\nconst React = __importStar(require(\"react\"));\nconst LINK_REGEX = /(https?:\\/\\/(?:www\\.|(?!www))[^\\s\\.]+\\.[^\\s]{2,}|www\\.[^\\s]+\\.[^\\s]{2,})/;\n/**\n * Converts ANSI strings into JSON output.\n * @name ansiToJSON\n * @function\n * @param {String} input The input string.\n * @return {Array} The parsed input.\n */\nfunction ansiToJSON(input, use_classes = false) {\n    input = escape_carriage_1.escapeCarriageReturn(input);\n    return anser_1.default.ansiToJson(input, {\n        json: true,\n        remove_empty: true,\n        use_classes\n    });\n}\n/**\n * Create a class string.\n * @name createClass\n * @function\n * @param {AnserJsonEntry}.\n * @return {String} class name(s)\n */\nfunction createClass(bundle) {\n    let classNames = \"\";\n    if (!bundle.bg && !bundle.fg) {\n        return null;\n    }\n    if (bundle.bg) {\n        classNames += bundle.bg + \" \";\n    }\n    if (bundle.fg) {\n        classNames += bundle.fg + \" \";\n    }\n    classNames = classNames.substring(0, classNames.length - 1);\n    return classNames;\n}\n/**\n * Create the style attribute.\n * @name createStyle\n * @function\n * @param {AnserJsonEntry}.\n * @return {Object} returns the style object\n */\nfunction createStyle(bundle) {\n    const style = {};\n    if (bundle.bg) {\n        style.backgroundColor = `rgb(${bundle.bg})`;\n    }\n    if (bundle.fg) {\n        style.color = `rgb(${bundle.fg})`;\n    }\n    return style;\n}\n/**\n * Converts an Anser bundle into a React Node.\n * @param linkify whether links should be converting into clickable anchor tags.\n * @param useClasses should render the span with a class instead of style.\n * @param bundle Anser output.\n */\nfunction convertBundleIntoReact(linkify, useClasses, bundle, key) {\n    const style = useClasses ? null : createStyle(bundle);\n    const className = useClasses ? createClass(bundle) : null;\n    if (!linkify) {\n        return React.createElement(\"span\", { style, key, className }, bundle.content);\n    }\n    const words = bundle.content.split(/(\\s+)/).reduce((words, word, index) => {\n        // If this is a separator, re-add the space removed from split.\n        if (index % 2 === 1) {\n            words.push(word);\n            return words;\n        }\n        // If  this isn't a link, just return the word as-is.\n        if (!LINK_REGEX.test(word)) {\n            words.push(word);\n            return words;\n        }\n        words.push(React.createElement(\"a\", {\n            key: index,\n            href: word,\n            target: \"_blank\"\n        }, `${word}`));\n        return words;\n    }, []);\n    return React.createElement(\"span\", { style, key, className }, words);\n}\nfunction Ansi(props) {\n    const { className, useClasses, children, linkify } = props;\n    return React.createElement(\"code\", { className }, ansiToJSON(children, !!useClasses).map(convertBundleIntoReact.bind(null, linkify, !!useClasses)));\n}\nexports.default = Ansi;\n","/**\n * Escape carrigage returns like a terminal\n * @param {string} txt - String to escape.\n * @return {string}    - Escaped string.\n */\nfunction escapeCarriageReturn(txt) {\n  if (!txt) return \"\";\n  if (!/\\r/.test(txt)) return txt;\n  txt = txt.replace(/\\r+\\n/gm, \"\\n\"); // \\r followed by \\n --> newline\n  while (/\\r[^$]/.test(txt)) {\n    var base = /^(.*)\\r+/m.exec(txt)[1];\n    var insert = /\\r+(.*)$/m.exec(txt)[1];\n    insert = insert + base.slice(insert.length, base.length);\n    txt = txt.replace(/\\r+.*$/m, \"\\r\").replace(/^.*\\r/m, insert);\n  }\n  return txt;\n}\n\nfunction findLongestString(arr) {\n  var longest = 0;\n  for (var i = 0; i < arr.length; i++) {\n    if (arr[longest].length <= arr[i].length) {\n      longest = i;\n    }\n  }\n  return longest;\n}\n\nfunction escapeSingleLineSafe(txt) {\n  if (!/\\r/.test(txt)) return txt;\n  var arr = txt.split(\"\\r\");\n  var res = [];\n\n  while (arr.length > 0) {\n    var longest = findLongestString(arr);\n    res.push(arr[longest]);\n    arr = arr.slice(longest + 1);\n  }\n\n  return res.join(\"\\r\");\n}\n\n/**\n * Safely escape carrigage returns like a terminal.\n * This allows to escape carrigage returns while allowing future output to be appended\n * without loosing information.\n * Use this as a intermediate escape step if your stream hasn't completed yet.\n * @param {string} txt - String to escape.\n * @return {string}    - Escaped string.\n */\nfunction escapeCarriageReturnSafe(txt) {\n  if (!txt) return \"\";\n  if (!/\\r/.test(txt)) return txt;\n  if (!/\\n/.test(txt)) return escapeSingleLineSafe(txt);\n  txt = txt.replace(/\\r+\\n/gm, \"\\n\"); // \\r followed by \\n --> newline\n  var idx = txt.lastIndexOf(\"\\n\");\n\n  return (\n    escapeCarriageReturn(txt.slice(0, idx)) +\n    \"\\n\" +\n    escapeSingleLineSafe(txt.slice(idx + 1))\n  );\n}\n\nmodule.exports = escapeCarriageReturn;\nmodule.exports.escapeCarriageReturn = escapeCarriageReturn;\nmodule.exports.escapeCarriageReturnSafe = escapeCarriageReturnSafe;\n","var debounce = require('./debounce'),\n    isObject = require('./isObject');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nmodule.exports = throttle;\n"],"names":["AssetPageHeader","assetKey","extra","breadcrumbs","React","list","text","href","path","reduce","accum","elem","encodeURIComponent","push","PageHeader","title","Box","flex","alignItems","gap","style","maxWidth","overflow","marginBottom","BreadcrumbsWithSlashes","items","currentBreadcrumbRenderer","breadcrumbRenderer","BreadcrumbLink","to","styled","Breadcrumbs","Link","Colors","AssetDefinedInMultipleReposNotice","assetId","loadedFromRepo","data","useQuery","ASSET_ID_SCAN_QUERY","otherReposWithAsset","repositoriesOrError","__typename","nodes","filter","r","name","location","assetNodes","some","a","id","opNames","length","padding","vertical","left","right","border","side","width","color","Alert","intent","buildRepoPath","map","o","join","gql","AssetNodeList","liveDataByNode","history","useHistory","Container","justifyContent","Spinner","purpose","horizontal","asset","AssetNodeWrapper","onClick","e","stopPropagation","assetDetailsPathForKey","view","AssetNode","definition","inAssetCatalog","selected","liveData","toGraphId","AssetNodeDefinition","assetNode","upstream","downstream","partitionHealthData","usePartitionHealthData","metadataForAssetNode","assetMetadata","assetType","assetConfigSchema","configSchemaForAssetNode","repoAddress","buildRepoAddress","repository","direction","minWidth","DefinitionLocation","flexBasis","flexGrow","minHeight","Description","description","maxHeight","partitionDefinition","top","bottom","PartitionHealthSummary","Icon","ConfigTypeSchema","type","typesInScope","recursiveConfigTypes","DagsterType","AssetMetadata","wrap","lineHeight","jobNames","jobName","isHiddenAssetGroupJob","PipelineReference","isJob","showIcon","pipelineName","pipelineHrefContext","OpNamesDisplay","isSourceAsset","marginTop","props","graphName","opCount","firstOp","displayNameForAssetKey","opPath","workspacePathFromAddress","size","ASSET_NODE_DEFINITION_FRAGMENT","ASSET_NODE_CONFIG_FRAGMENT","ASSET_NODE_FRAGMENT","ASSET_NODE_OP_METADATA_FRAGMENT","AssetNodeInstigatorTag","schedules","flatMap","jobs","j","sensors","ScheduleOrSensorTag","showSwitch","ASSET_NODE_INSTIGATORS_FRAGMENT","SCHEDULE_SWITCH_FRAGMENT","SENSOR_SWITCH_FRAGMENT","LINEAGE_GRAPH_ZOOM_LEVEL","AssetNodeLineageGraph","assetGraphData","params","assetGraphId","highlighted","setHighlighted","useAssetLayout","layout","loading","viewportEl","current","lastZoomLevel","Number","getJSONForKey","autocenter","focus","SVGViewport","ref","undefined","interactor","graphWidth","graphHeight","height","onDoubleClick","maxZoom","maxAutocenterZoom","scale","SVGContainer","SVGSaveZoomLevel","edges","Object","values","bounds","graphNode","JSON","parse","key","onMouseEnter","onMouseLeave","lineageScope","zoomToSVGBox","EXPERIMENTAL_MINI_SCALE","ForeignNode","window","localStorage","setItem","stringify","err","AssetNodeLineage","setParams","ButtonGroup","activeItems","Set","buttons","label","icon","Checkbox","format","checked","lineageShowSecondaryEdges","onChange","LaunchAssetExecutionButton","assetKeys","n","context","Button","disabled","AssetView","useQueryPersistedState","queryResult","ASSET_QUERY","variables","notifyOnNetworkStatusChange","assetOrError","previousData","lastMaterializedAt","assetMaterializations","timestamp","viewingMostRecent","asOf","token","tokenForAssetKey","useAssetGraphData","hideEdgesToNodesOutsideQuery","graphAssetKeys","graphData","graphId","useNeighborsFromGraph","useLiveDataForAssetKeys","liveResult","refreshState","useMergedRefresh","useQueryRefreshAtInterval","FIFTEEN_SECONDS","useDidLaunchEvent","refetch","isDefinitionLoaded","isUpstreamChanged","computeStatus","AssetComputeStatus","overflowY","tags","Tag","RepositoryLink","groupName","BaseTag","fillColor","textColor","interactive","tabs","Tabs","selectedTabId","margin","QueryRefresh","HistoricalViewAlert","time","hasDefinition","AssetNoDefinitionState","AssetEvents","assetLastMaterializedAt","assetHasDefinedPartitions","paramsTimeWindowOnly","NonIdealState","LogType","fontWeight","Timestamp","ms","timeFormat","showSeconds","showTimezone","ButtonLink","underline","AssetsCatalogRoot","useParams","currentPath","split","x","decodeURIComponent","ASSETS_CATALOG_ROOT_QUERY","skip","useDocumentTitle","Page","ReloadAllButton","AssetsCatalogTable","prefixPath","setPrefixPath","MAX_STREAMING_LOG_BYTES","ComputeLogContent","timeout","contentContainer","state","showScrollToTop","hideWarning","setState","clearTimeout","scheduleHideWarning","setTimeout","cancelHideWarning","onScrollUp","position","onScrollDown","_position","scrollToTop","this","ScrollToast","ScrollToTop","onMouseOver","onMouseOut","Group","spacing","logData","isLoading","isVisible","downloadUrl","content","isTruncated","TextEncoder","encode","shouldTruncate","nextLine","indexOf","truncated","slice","warning","FileWarning","download","FileContainer","renderScrollToTop","FileContent","RelativeContainer","LogContent","isSelected","LoadingContainer","FileFooter","COMPUTE_LOG_CONTENT_FRAGMENT","ScrollContainer","container","lastScroll","onScroll","scrollHeight","scrollTop","offsetHeight","scrollToBottom","addEventListener","_props","_state","shouldScroll","node","className","outline","tabIndex","ContentContainer","LineNumbers","Content","SolarizedColors","linkify","useClasses","matches","match","count","LineNumberContainer","Array","from","_","i","String","createGlobalStyle","FontFamily","s","merge","b","cursor","reducer","action","stdout","stepKey","log","stderr","initialState","COMPUTE_LOGS_SUBSCRIPTION_FRAGMENT","COMPUTE_LOGS_SUBSCRIPTION","ComputeLogPanel","runId","stepKeys","computeLogKey","ioType","setComputeLogUrl","rootServerURI","AppContext","dispatch","useSubscription","fetchPolicy","ComputeIOType","onSubscriptionData","subscriptionData","computeLogs","useComputeLogs","startsWith","resolveDownloadUrl","display","flexDirection","ContentWrapper","emptyCounts","DEBUG","INFO","WARNING","ERROR","CRITICAL","EVENT","queuedNodes","queued","ii","clientsideKey","counts","forEach","level","logNodeLevel","hasMore","useLogsProviderWithSubscription","client","useApolloClient","queue","syncPipelineStatusToApolloCache","status","local","readFragment","fragmentName","fragment","PIPELINE_RUN_LOGS_SUBSCRIPTION_STATUS_FRAGMENT","toWrite","RunStatus","canTerminate","writeFragment","throttledSetNodes","throttle","PIPELINE_RUN_LOGS_SUBSCRIPTION","logs","pipelineRunLogs","messages","hasMorePastEvents","nextPipelineStatus","reversed","reverse","pipelineStatusFromMessages","allNodes","LogsProviderWithSubscription","children","LogsProviderWithQuery","RUN_LOGS_QUERY","limit","pollInterval","onCompleted","stopPolling","pipelineRunOrError","logsForRun","run","events","startPolling","LogsProvider","WebSocketContext","availability","RunFragments","compactFormatter","memoize","Intl","NumberFormat","navigator","language","compactDisplay","notation","ExecutionStateDot","IStepState","shown","highlight","fuseOptions","threshold","LogsFilterInput","value","suggestionProviders","inputRef","perProvider","provider","fuse","Fuse","all","providerKeys","empty","buildSuggestions","queryString","keys","results","search","result","item","toLowerCase","includes","tokens","toLocaleLowerCase","trim","suggestions","onSelectSuggestion","suggestion","lastIndex","lastIndexOf","keep","useSuggestionsForString","numResults","highlightedResult","onInputChange","target","onSelect","onClear","Popover","isOpen","Results","ResultItem","isHighlight","FilterInput","placeholder","spellCheck","autoCorrect","onFocus","onBlur","onKeyDown","lastResult","preventDefault","rightElement","ClearButton","C","element","scrollIntoView","block","Item","onMouseDown","TextInput","LogsToolbar","steps","metadata","onSetFilter","logType","onSetLogType","onSetComputeLogKey","computeLogUrl","structured","tooltip","StructuredLogToolbar","ComputeLogToolbar","resolveState","logCapture","every","logCaptureSteps","extractLogCaptureStepsFromLegacySteps","isValidStepSelection","logKeyText","logKey","captureInfo","pid","Select","itemRenderer","options","Menu","handleClick","active","modifiers","activeItem","filterable","onItemSelect","rightIcon","Tooltip","placement","DownloadLink","IconWrapper","copyIcon","setCopyIcon","logQueryString","logQuery","setQueryString","copyToClipboard","useCopyToClipboard","selectedStep","find","v","filterText","getRunFilterProviders","segments","NonMatchCheckbox","hideNonMatches","event","currentTarget","LogLevel","num","enabled","levels","FilterLabel","$enabled","LogLabel","LogCount","useJobReExecution","useMutation","LAUNCH_PIPELINE_REEXECUTION_MUTATION","launchPipelineReexecution","repoMatch","useRepositoryForRun","pipelineSnapshotId","getReexecutionVariables","repositoryLocationName","repositoryLocation","repositoryName","handleLaunchResult","preserveQuerystring","behavior","showLaunchError","DELIMITER","levelsToQuery","sort","DefaultQuerystring","DefaultLogLevels","focusedTime","decodeRunPageFilters","qs","logValues","providers","sinceTime","tokenizedValueFromString","toUpperCase","encodeRunPageFilters","logQueryTokenStrings","Run","decode","defaults","logsFilter","setLogsFilter","queryKey","selection","selectionQuery","setSelectionQuery","runStatusFavicon","el","document","querySelector","previousHref","getAttribute","setAttribute","onShowStateDetails","errorNode","showCustomAlert","body","PythonErrorInfo","error","onSetSelectionQuery","query","RunContext","RunMetadataProvider","RunWithData","onSetLogsFilter","onLaunch","splitPanelContainer","queryLogType","setQueryLogType","setComputeLogKey","logTypeFromQuery","stepKeysJSON","runtimeGraph","executionPlan","toGraphQueryItems","selectionStepKeys","filterByQuery","logKeys","selectedLogKey","logsFilterStepKeys","onClickStep","evt","newSelected","index","filterForExactStep","shiftKey","k","splice","SplitPanelContainer","axis","identifier","firstInitialPercent","firstMinSize","first","GanttChart","mode","GanttChartMode","toolbarActions","RunActionButtons","graph","onSetSelection","gantt","second","LogsContainer","lt","LogsScrollingTable","filterStepKeys","filterKey","RunRoot","RUN_ROOT_QUERY","partialRefetch","snapshotID","isThisThingAJob","zIndex","fontFamily","fontSize","RunStatusTag","RunAssetKeyTags","assetKeysForRun","clickableTags","snapshotId","assets","startTime","interactionKind","RunDetails","TimestampDisplay","updateTime","endTime","fontVariantNumeric","formatElapsedTime","Date","now","RunById","useCanSeeConfig","INSTANCE_CONFIG_HAS_INFO","instance","hasInfo","AllScheduledTicks","SCHEDULER_INFO_QUERY","Loading","message","SchedulerInfo","daemonHealth","SchedulesNextTicks","repos","INSTANCE_HEALTH_FRAGMENT","REPOSITORY_SCHEDULES_FRAGMENT","PYTHON_ERROR_FRAGMENT","RunsRoot","useQueryPersistedRunFilters","filterTokens","setFilterTokens","runsFilterForSearchTokens","showScheduled","setShowScheduled","canSeeConfig","useCursorPaginatedQuery","nextCursorForResult","runs","pipelineRunsOrError","PAGE_SIZE","getResultArray","queuedFilter","statuses","queuedStatuses","inProgressFilter","inProgressStatuses","RUNS_ROOT_QUERY","pageSize","paginationProps","selectedTab","statusTokens","isEqual","doneStatuses","staticStatusTags","setStatusFilter","tokensMinusStatus","setFilterTokensWithStatus","onAddTag","tokenAsString","tokenToString","enabledFilters","filters","mutableTokens","queuedCount","inProgressCount","QueueDaemonAlert","allowStaleData","renderError","badRequest","networkError","statusCode","RunsFilterInput","StickyTableContainer","$top","RunTable","actionBarComponents","COUNT_FRAGMENT","RUN_TABLE_RUN_FRAGMENT","QUEUE_DAEMON_STATUS_QUERY","daemonStatus","required","healthy","SNAPSHOT_PARENT_QUERY","SnapshotNav","activeTab","explorerPath","explorerPathString","explorerPathToString","currentPipelineState","useActivePipelineForName","currentSnapshotID","pathComponent","workspacePipelinePathGuessRepo","minimal","pipelineSnapshotOrError","parentSnapshotId","tag","tab","TabLink","SnapshotRoot","pipelinePath","explorerPathFromString","PipelineRunsRoot","InstanceTabContext","healthTitle","InstanceTabs","InstanceBackfills","queryData","INSTANCE_HEALTH_FOR_BACKFILLS_QUERY","BACKFILLS_QUERY","partitionBackfillsOrError","backfillId","backfillHealths","allDaemonStatuses","daemon","daemonType","isBackfillHealthy","rel","BackfillTable","backfills","BACKFILL_TABLE_FRAGMENT","InstanceConfigStyle","InstanceConfig","INSTANCE_CONFIG_QUERY","config","info","version","editorDidMount","editor","documentHash","hash","RegExp","getSearchCursor","findNext","markText","lineNumbers","theme","InstanceHealthPage","INSTANCE_HEALTH_QUERY","DaemonList","daemonStatuses","RUN_STATUS_COLORS","QUEUED","NOT_STARTED","STARTING","MANAGED","STARTED","SUCCESS","FAILURE","CANCELING","CANCELED","RunStatusPez","opacity","Pez","$color","$opacity","RunStatusPezList","fade","step","Math","max","RunStatusOverlay","repoAddr","hoverOpenDelay","OverlayContainer","OverlayTitle","RunRow","titleForRun","HorizontalSpace","SectionHeader","TIME_FORMAT","NextTick","nextTick","schedule","executionTimezone","futureTicks","scheduleState","InstigationStatus","earliest","min","earliestOverall","timezone","SCHEDULE_FUTURE_TICKS_FRAGMENT","overlap","end","start","makeJobKey","repoAddressAsString","RunTimelineContainer","range","hourWindow","jobsWithRuns","setJobsWithRuns","loadedWindow","setLoadedWindow","RUN_TIMELINE_QUERY","createdBefore","terminatedFilter","updatedAfter","jobsByKey","job","unterminated","terminated","workspaceOrError","runsByJob","locationEntries","locationEntry","locationOrLoadError","repositories","pipelines","pipeline","jobKey","jobTicks","jobRuns","workspacePipelinePath","repoName","repoLocation","startTimes","RunTimeline","setWidth","observer","containerRef","ResizeObserver","entries","entry","contentRect","observe","disconnect","Timeline","$height","TimeDividers","interval","RunTimelineRow","NoRunsTimeline","locale","TimezoneContext","timeMarkers","totalTime","firstMarker","markerCount","ceil","date","toLocaleString","hour","timeZone","browserTimezone","toString","marker","nowLeft","toPrecision","DividerContainer","DividerLabels","DividerLabel","DividerLines","DividerLine","backgroundColor","mergeStatusToColor","anyInProgress","anyQueued","anyFailed","anySucceeded","anyScheduled","failedStatuses","successStatuses","containerWidth","batched","batches","minChunkWidth","minMultipleWidth","rangeLength","floor","consolidated","shift","next","minLeft","unshift","batchRunsForTimeline","Row","JobName","RunChunks","batch","runCount","RunChunk","$multiple","RunHoverContent","BatchCount","ROW_HEIGHT","HoverContentJobName","TimeElapsed","startUnix","endUnix","RUN_TIME_FRAGMENT","JobMenu","lastRun","canLaunchPipelineReexecution","usePermissions","useLazyQuery","RUN_RE_EXECUTION_QUERY","fetchHasExecutionPlan","fetchIfPossible","reExecuteAllItem","canRunAllSteps","reExecuteFromFailureItem","canRunFromFailure","onOpened","MenuLink","DISABLED_MESSAGE","RepoFilterButton","WorkspaceContext","allRepos","visibleRepos","toggleVisible","open","setOpen","Dialog","canOutsideClickClose","canEscapeKeyClose","onClose","RepoSelector","onBrowse","onToggle","searchValue","InstanceOverviewPage","queryResultOverview","INSTANCE_OVERVIEW_INITIAL_QUERY","queryResultLastRuns","LAST_TEN_RUNS_PER_JOB_QUERY","lastTenRunsData","bucketed","failed","inProgress","succeeded","neverRan","sortFn","aRun","bRun","localeCompare","sensor","targets","t","filteredJobs","searchToLower","filterJobs","lastTenRunsFlattened","flattened","filteredJobsFlattened","jobList","filteredJobsWithRuns","appendRuns","jobItem","matchingRuns","grow","RunTimelineSection","JobSection","heading","ONE_HOUR","setShown","setHourWindow","nowRef","nowSecs","LOOKAHEAD_HOURS","unvalidatedStart","unvalidatedEnd","timelineJobs","hrWindow","Table","repoAddressString","LegacyPipelineTag","LastRunSummary","OVERVIEW_JOB_FRAGMENT","REPOSITORY_INFO_FRAGMENT","InstanceSchedules","INSTANCE_SCHEDULES_QUERY","AllSchedules","unloadableInstigationStatesOrError","unloadable","withSchedules","loadedSchedulesSection","SchedulesTable","unloadableSchedules","instigationType","InstigationType","unloadableSchedulesSection","Unloadable","scheduleStates","SCHEDULE_FRAGMENT","INSTIGATION_STATE_FRAGMENT","InstanceSensors","INSTANCE_SENSORS_QUERY","AllSensors","withSensors","sensorDefinitionsSection","SensorInfo","SensorsTable","unloadableSensors","unloadableSensorsSection","sensorStates","SENSOR_FRAGMENT","InstanceStatusRoot","render","InstanceRoot","pathname","useLocation","main","scrollTo","MainContent","M","exact","_createClass","defineProperties","descriptor","enumerable","configurable","writable","defineProperty","Constructor","protoProps","staticProps","prototype","ANSI_COLORS","Anser","TypeError","_classCallCheck","fg","bg","fg_truecolor","bg_truecolor","bright","txt","escapeForHtml","ansiToHtml","ansiToJson","ansiToText","PALETTE_COLORS","g","_r","_g","_b","_i","replace","str","process","json","clearLine","markup","_this","raw_text_chunks","first_chunk","test","color_chunks","chunk","processChunk","processChunkJson","remove_empty","c","isEmpty","use_classes","decoration","was_processed","nums","self","num_str","parseInt","isNaN","is_foreground","palette_index","klass","setupPalette","_this2","jsonChunk","styles","classes","render_data","fragments","hasOwnProperty","module","exports","__importDefault","mod","__esModule","__importStar","call","anser_1","require","escape_carriage_1","LINK_REGEX","convertBundleIntoReact","bundle","createStyle","classNames","substring","createClass","createElement","words","word","input","escapeCarriageReturn","default","ansiToJSON","bind","base","exec","insert","findLongestString","arr","longest","escapeSingleLineSafe","res","escapeCarriageReturnSafe","idx","debounce","isObject","func","wait","leading","trailing"],"sourceRoot":""}